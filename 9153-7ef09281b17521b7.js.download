try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="17638416719484a12ecf001"}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9153],{1068:(e,t,s)=>{"use strict";s.d(t,{M:()=>u});var a=s(77145),l=s(18502),r=s(30849);s(95661);var i=s(52597),n=s(69730),o=s(58295),d=s(21016),c=s(80421),m=s(56024);let u=e=>{var t,s;let{projectId:u,setSelectedTemplateId:p,openTemplatesDialog:x}=e,{data:h,isLoading:g}=(0,l.I)(c.c.projectDetails({projectId:u})),f=(0,d.A)("md");return h||g?(0,a.jsxs)("div",{className:"group/attached-template relative flex flex-wrap gap-2",children:[(0,a.jsxs)("button",{className:(0,m.cn)("flex h-16 w-16 items-center justify-center bg-muted p-0 transition-opacity duration-150 ease-in-out hover:opacity-80",f&&"h-24 w-24"),type:"button",onClick:x,children:[g?(0,a.jsx)(i.y,{size:"small"}):(0,a.jsx)(r.default,{src:null!=(t=null==h?void 0:h.latest_screenshot_url)?t:"",alt:"Screenshot of ".concat(null!=(s=(null==h?void 0:h.display_name)||(null==h?void 0:h.name))?s:"template project"),fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover",objectPosition:"top"},draggable:"false",className:"rounded-xl border border-muted-border"}),(0,a.jsx)("div",{className:"absolute inset-px rounded-xl bg-gradient-to-t from-background/50 to-background/0"}),(0,a.jsx)(n.A,{name:"file_export",size:f?"default":"small",className:"absolute bottom-1.5 left-1.5 text-foreground"})]}),(0,a.jsxs)(o.m_,{instant:!0,children:[(0,a.jsx)(o.k$,{asChild:!0,children:(0,a.jsx)("button",{className:(0,m.cn)("absolute -right-0.5 -top-0.5 z-[10000] flex items-center justify-center rounded-full border bg-primary text-xs text-primary-foreground opacity-0 shadow shadow-background/25 transition-opacity duration-150 ease-out group-hover/attached-template:opacity-100",f&&"h-5 w-5 opacity-100"),onClick:()=>{p(void 0)},children:(0,a.jsx)(n.A,{name:"x_small",size:f?"default":"small"})})}),(0,a.jsx)(o.ZI,{children:"Remove template"})]})]},u):null}},1702:(e,t,s)=>{"use strict";s.d(t,{u:()=>c});var a=s(77145),l=s(30849),r=s(26294),i=s(95661),n=s(52811),o=s(89002);let d={src:"/_next/static/media/modal-attach-image.a9312b4f.png",height:736,width:1472,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAALVBMVEUYDDIsHE4jFERQOIA5J13y4v/77P+1kuRCLm+jg9E7J2PWvPTOt+p6WrjDpukyd0olAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJ0lEQVR4nAXBiQEAIAgDsSsFf91/XBOqtRkgap+3CNEd6ZC4TvDIDwrwAI+AKn8QAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4};function c(e){let{isOpen:t,onOpenChange:s,onAttachImages:c,onDismiss:m,children:u}=e,p=(0,r.c3)("AttachImageModal"),[x,h]=(0,i.useState)({x:0,y:0});return(0,i.useEffect)(()=>{if(!t)return;let e=e=>{let{clientX:t,clientY:s}=e,{innerWidth:a,innerHeight:l}=window;h({x:(t/a-.5)*20,y:(s/l-.5)*20})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[t]),(0,a.jsxs)(o.AM,{open:t,onOpenChange:s,children:[(0,a.jsx)(o.Wv,{asChild:!0,children:u}),(0,a.jsx)(o.hl,{className:"w-80 rounded-3.5xl px-4 py-5",align:"start",sideOffset:8,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"relative h-24 w-full overflow-hidden rounded-2xl",children:(0,a.jsx)("div",{className:"absolute inset-0 transition-transform ease-out",style:{transform:"scale(1.8) translateX(".concat(x.x,"px) translateY(").concat(x.y,"px)")},children:(0,a.jsx)(l.default,{src:d,alt:"Upload visual references",fill:!0,className:"object-cover"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg",children:p("titleFiles")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:p("descriptionFiles")})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.$,{size:"sm",onClick:()=>{s(!1),c()},className:"rounded-full",type:"button",children:p("addFiles")}),(0,a.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>{m(),s(!1)},className:"rounded-full",type:"button",children:p("dismiss")})]})})]})})]})}},1778:e=>{e.exports={button:"TechStackSelector_button__pszsB"}},4292:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(95661),l=s(40702),r=s(95138),i=s(67412),n=s(69858),o=s(18221),d=s(62548);let c=e=>{let{onSubmit:t,chatModeEnabled:s=!1}=e,{authUser:c,authState:m}=(0,l.Z2)(),u=(0,i.A)(),[p,x]=(0,a.useState)(!1),{store:h,clearEditorState:g,restoreEditorState:f}=(0,o.Xl)(),j=h(e=>e.images),b=h(e=>e.message),v=(0,a.useMemo)(()=>j.some(e=>!e.uploaded),[j]),A=(0,a.useMemo)(()=>0===b.length&&0===j.length||c&&v||(0,n.rn)(b)||p||"loading"===m,[b,j.length,c,v,p,m]);return{sendChatMessage:(0,a.useCallback)(async()=>{if(!A){if(!c)return void u("signup");x(!0);try{let e=j.map(e=>({file_id:e.existingFileId||e.id,file_name:e.name,type:d.g.USER_UPLOAD})),a={id:(0,r.g_)(),message:b,files:e,optimisticImageUrls:j.map(e=>e.url),chat_only:s,agent_mode_enabled:!1};await t({body:a,options:{clear:g,restore:f}})}finally{x(!1)}}},[c,A,b,j,t,g,f,u,s]),isSendingDisabled:A,isSubmitting:p}}},6436:(e,t,s)=>{"use strict";s.d(t,{x:()=>r});var a=s(95661),l=s(42673);let r=e=>{let{workspaceId:t,currentWorkspace:s,isLovableCloudEnabled:r,hasTemplateInUrl:i}=e,[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(null),[m,u]=(0,a.useState)([]),[p,x]=(0,a.useState)(void 0),[h,g]=(0,a.useState)(void 0),[f,j]=(0,a.useState)(!1),b=(0,l.C)(e=>e.setSelectedTheme),v=(0,a.useCallback)(e=>{x(e),b(e)},[b]);return(0,a.useEffect)(()=>{c(null),j(!1),g(void 0),v(void 0),u([])},[t,r,v]),(0,a.useEffect)(()=>{i||f||!h&&(null==s?void 0:s.default_template_id)&&g(s.default_template_id)},[s,f,i,h]),{techStack:n,setTechStack:o,selectedTemplateId:h,setSelectedTemplateId:g,hasUserRemovedTemplate:f,setHasUserRemovedTemplate:j,selectedTheme:p,setSelectedTheme:v,selectedSupabaseProject:d,setSelectedSupabaseProject:c,selectedLibraries:m,setSelectedLibraries:u}}},10830:(e,t,s)=>{"use strict";s.d(t,{AX:()=>m});var a=s(77145),l=s(95661),r=s(49493),i=s(57841),n=s(52811),o=s(20247),d=s(69730),c=s(89391);function m(e){let{open:t,onOpenChange:s,onWorkspaceSelect:i,selectedWorkspaceId:d}=e,c=(0,r.Mu)(e=>e.workspaces),m=(0,r.Mu)(e=>e.isLoading),p=(0,l.useCallback)(e=>{e.id&&(i(e.id),s(!1))},[i,s]);return(0,a.jsx)(o.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(o.Cf,{className:"max-h-screen w-96 gap-4",size:"sm",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,a.jsxs)(o.c7,{children:[(0,a.jsx)(o.L3,{className:"text-xl",children:"Choose Workspace for Auto-Submit"}),(0,a.jsx)(o.rr,{className:"text-sm",children:"Please select which workspace to create this project in."})]}),m?(0,a.jsx)("div",{className:"flex max-h-72 w-full flex-col space-y-2 overflow-y-auto p-2",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 animate-pulse rounded bg-muted"}),(0,a.jsx)("div",{className:"h-4 flex-1 animate-pulse rounded bg-muted"})]},t))}):(0,a.jsx)("div",{className:"flex max-h-72 w-full flex-col overflow-y-auto",children:c.map(e=>{var t;return(0,a.jsx)(u,{workspace:e,onSelect:()=>p(e),selected:d==e.id},null!=(t=e.id)?t:"fake-workspace-id")})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(n.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"})})]})})}let u=e=>{let{workspace:t,onSelect:s,selected:l}=e;return(0,a.jsxs)(n.$,{variant:"ghost",onClick:s,className:"group flex h-auto w-full items-center justify-start gap-3 px-3 py-3 text-left",children:[(0,a.jsx)(i.z,{workspace:t}),(0,a.jsx)("p",{className:"min-w-0 truncate text-sm",children:t.name}),t.plan&&(0,a.jsx)(c.U,{plan:t.plan}),l&&(0,a.jsx)(d.A,{name:"check",size:"small",className:"ml-auto"})]})};s(51762)},12742:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var a=s(95661);function l(e){let{words:t,typingSpeed:s=30,deletingSpeed:l=30,pauseBetweenWords:r=1500,prefix:i=""}=e,[n,o]=(0,a.useState)(0),[d,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!t||0===t.length)return;let e=setTimeout(()=>{let e=t[n];if(e)if(m){if(""===d){u(!1),o(e=>(e+1)%t.length);return}c(e.substring(0,d.length-1))}else{if(d===e)return void setTimeout(()=>u(!0),r);c(e.substring(0,d.length+1))}},m?l:s);return()=>clearTimeout(e)},[d,n,m,t,s,l,r]),i+d}},21926:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var a=s(92912),l=s(95661),r=s(52215),i=s(39528);let n=e=>{let{createProject:t,isLovableAdmin:s,selectedModel:n,setShowDismissApiKeyDialog:o}=e;return{handleMessageSubmit:(0,l.useCallback)(async e=>{let{body:l,options:d}=e;if((0,r.u)(l.message)){a.Ay.capture(i.$6.CREATION.API_KEY_DETECTED),o(!0);return}await t({body:{...l,model:s&&"auto"!==n&&null!==n?n:void 0},options:d})},[t,s,n,o])}}},22196:(e,t,s)=>{"use strict";s.d(t,{k:()=>m});var a=s(77145),l=s(18502);s(95661);var r=s(83220),i=s(20247),n=s(69730),o=s(99989),d=s(50562),c=s(64021);let m=e=>{let{isOpen:t,setIsOpen:s,setSelectedTemplateId:l}=e,n=(0,r.j4)(e=>e.currentWorkspace);return(0,a.jsx)(i.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(i.Cf,{className:"md:max-w-4xl",children:[(0,a.jsxs)(i.c7,{className:"mb-4 border-b pb-4",children:[(0,a.jsx)(i.L3,{children:"Use a template"}),(0,a.jsxs)(i.rr,{children:["Select a project from ",(0,a.jsx)("span",{className:"font-medium",children:null==n?void 0:n.name})," and tell Lovable how to use it. Set projects as templates in project settings."]})]}),(0,a.jsx)(u,{setSelectedTemplateId:l,closeDialog:()=>{s(!1)}})]})})},u=e=>{var t;let{setSelectedTemplateId:s,closeDialog:i}=e,m=(0,r.j4)(e=>e.currentWorkspace),{data:u,isLoading:p}=(0,l.I)(o.y.templates({workspaceId:null!=(t=null==m?void 0:m.id)?t:""}));return(0,a.jsx)("div",{className:"flex flex-1",children:(0,a.jsxs)("div",{className:"grid max-h-[500px] w-full grid-cols-1 gap-6 overflow-y-auto md:grid-cols-2 lg:grid-cols-3",children:[p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.p,{}),(0,a.jsx)(d.p,{}),(0,a.jsx)(d.p,{})]}),!p&&(u&&u.length>0?u.map(e=>(0,a.jsx)(c.U,{project:e,subtitleType:"created-by",onClick:t=>{t.preventDefault(),t.stopPropagation(),s(e.id),i()}},e.id)):(0,a.jsxs)("div",{className:"col-span-full flex h-[300px] w-full flex-col items-center justify-center gap-2 text-center text-sm text-muted-foreground",children:[(0,a.jsx)(n.A,{name:"file_export",size:"large"}),(0,a.jsx)("p",{children:"Set a project as a template in project settings."})]}))]})})}},29495:(e,t,s)=>{"use strict";s.d(t,{F:()=>l});var a=s(95661);let l=()=>{let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!1),d=(0,a.useCallback)(()=>o(!0),[]);return{isSettingsDialogOpen:e,setIsSettingsDialogOpen:t,showDismissApiKeyDialog:s,setShowDismissApiKeyDialog:l,isThemeDialogOpen:r,setIsThemeDialogOpen:i,showTemplatesDialog:n,setShowTemplatesDialog:o,openTemplatesDialog:d}}},30813:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var a=s(77145),l=s(30849),r=s(95661),i=s(77214),n=s(40702),o=s(83220),d=s(52811),c=s(27458),m=s(89002),u=s(54437);let p={src:"/_next/static/media/supabase-education-3.115fe263.jpg",height:1009,width:1514,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAFAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAFBv/aAAwDAQACEAMQAAAAqQBYf//EABwQAAEDBQAAAAAAAAAAAAAAAAMBAhIAExUiof/aAAgBAQABPwDOlEC00OyMij5dr//EABkRAAIDAQAAAAAAAAAAAAAAAAEEAAMTI//aAAgBAgEBPwBhm/Q9DP/EABoRAAICAwAAAAAAAAAAAAAAAAIhAQQAETP/2gAIAQMBAT8ACnVGOINuN5//2Q==",blurWidth:8,blurHeight:5},x=e=>{let{className:t}=e,{isAuthenticated:s}=(0,n.Z2)(),{currentWorkspaceId:x}=(0,o.Dx)(),[h,g]=(0,i.V)("supabase-education-seen",{defaultValue:!1}),[f,j]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),{supabaseOrganizations:A,isLoading:w}=(0,u.G)({workspaceId:null!=x?x:""}),y=!!(null==A?void 0:A.length);(0,r.useEffect)(()=>{v(!0)},[]);let N=(0,r.useCallback)(()=>{g(!0),j(!1)},[g]);return s&&!h&&b&&!w&&y?(0,a.jsxs)(m.AM,{open:f,onOpenChange:j,children:[(0,a.jsx)(m.Wv,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",className:"flex h-10 items-center justify-center gap-1 rounded-full text-muted-foreground focus-visible:ring-0 md:h-8 ".concat(t||""),type:"button",children:[(0,a.jsx)(c.gu,{name:"Supabase",className:"mr-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden md:flex",children:"Supabase"})]})}),(0,a.jsx)(m.hl,{className:"w-80 rounded-3.5xl p-4",align:"start",sideOffset:8,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(l.default,{src:p,alt:"Supabase moved",className:"rounded-2xl border object-cover"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg",children:"Supabase has moved"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"You can now select your Supabase project from the “+” menu on the left."})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(d.$,{size:"sm",onClick:N,className:"rounded-full",type:"button",children:"Got it"})})]})})]}):null}},35950:(e,t,s)=>{"use strict";s.d(t,{_:()=>w});var a=s(77145),l=s(83220),r=s(64482),i=s(30604),n=s(59453),o=s(19695),d=s(8711),c=s(69730),m=s(27458),u=s(53103),p=s(6579),x=s(54437),h=s(57657),g=s(95661),f=s(61156),j=s(6397),b=s(70420),v=s(56024);function A(e){let{workspaceId:t,onSupabaseProjectSelect:s,disabled:i=!1,onClose:n}=e,[m,u]=(0,g.useState)(!1),[A,w]=(0,g.useState)(""),{supabaseOrganizations:y}=(0,x.G)({workspaceId:t});(0,x.f)({workspaceId:t});let N=(0,l.j4)(e=>e.membership),C=(null==N?void 0:N.role)==="admin"||(null==N?void 0:N.role)==="owner",{handleConnect:_,isConnecting:S}=(0,p.UO)(t),k=(0,r.f)(),E=(0,g.useMemo)(()=>{if(!A.trim())return y;let e=A.toLowerCase();return null==y?void 0:y.map(t=>{var s;return{...t,projects:null==(s=t.projects)?void 0:s.filter(t=>t.name.toLowerCase().includes(e))}}).filter(e=>e.projects&&e.projects.length>0)},[y,A]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d._2,{onClick:e=>{e.preventDefault(),u(!0)},className:"text-sm",disabled:i,onSelect:e=>e.preventDefault(),children:[(0,a.jsx)(c.A,{name:"database",className:"h-4 w-4"}),"Connect Database"]}),(0,a.jsx)(h.cj.Root,{license:"commercial",presented:m,onPresentedChange:u,children:(0,a.jsx)(h.cj.Portal,{children:(0,a.jsxs)(h.cj.View,{className:"z-[10000]",children:[(0,a.jsx)(h.cj.Backdrop,{themeColorDimming:"auto"}),(0,a.jsxs)(h.cj.Content,{className:"flex h-[65vh] flex-col gap-3 rounded-t-2xl p-4",style:{paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:[(0,a.jsx)(h.s6.Root,{children:(0,a.jsx)(h.cj.Handle,{children:"Connect database"})}),(0,a.jsx)(h.cj.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,a.jsxs)("div",{className:"flex max-h-full flex-1 flex-col gap-2",children:[k&&!A&&(0,a.jsxs)("div",{className:"pointer-events-none mb-2 flex items-start gap-2 whitespace-normal rounded-md border border-muted-border bg-muted px-3 py-2 text-base text-foreground",children:[(0,a.jsx)(c.A,{name:"cloud",className:"mt-0.5"}),"Lovable Cloud auto-enables when you ask for it"]}),(0,a.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:"Supabase Projects"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.A,{name:"search",className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(j.p,{placeholder:"Search projects...",value:A,onChange:e=>w(e.target.value),className:"pl-9",autoFocus:!0})]}),(0,a.jsx)("div",{className:"min-h-0 flex-1 overflow-y-auto pr-1",children:E&&E.length>0?E.map(e=>{var t;return e.status===b.s.status.NEEDS_REFRESH?(0,a.jsxs)("button",{onClick:()=>_({supabaseOrgId:e.id}),className:"mb-3 flex w-full items-center gap-2 rounded-md px-2 py-2 text-left text-destructive-primary hover:bg-muted",disabled:!C,children:[(0,a.jsx)(c.A,{name:"warning_fill",size:"small",className:"flex-shrink-0 text-destructive-primary"}),(0,a.jsx)("span",{className:"truncate text-sm",children:e.name})]},e.id):(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:e.name}),(0,a.jsxs)("div",{className:"mt-1 flex flex-col gap-0.5",children:[null==(t=e.projects)?void 0:t.map(e=>{let t=(0,f.L)(e);return(0,a.jsx)(o.Q,{showTooltip:!t,tooltipContent:"Check project status in Supabase.",children:(0,a.jsxs)("button",{className:(0,v.cn)("flex w-full items-center gap-1 rounded-md px-3 py-1.5 text-left hover:bg-muted disabled:opacity-50",!t&&"opacity-50"),onClick:()=>{if(t)s(e),u(!1),w(""),null==n||n();else window.open("https://supabase.com/dashboard/project/".concat(e.id),"_blank")},children:[(0,a.jsx)("span",{className:"truncate text-base",children:e.name}),!t&&(0,a.jsx)(c.A,{name:"arrow_up_right"})]})},e.id)}),(0,a.jsxs)("a",{href:"https://supabase.com/dashboard/new/".concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md px-3 py-1.5 text-base hover:bg-muted",children:[(0,a.jsx)("span",{children:"Create project"}),(0,a.jsx)(c.A,{name:"arrow_up_right"})]})]})]},e.id)}):A?(0,a.jsxs)("p",{className:"px-2 py-4 text-center text-base text-muted-foreground",children:['No projects found matching "',A,'"']}):(0,a.jsx)("p",{className:"px-2 py-4 text-center text-base text-muted-foreground",children:"No projects found"})}),(0,a.jsx)(o.Q,{showTooltip:!C,tooltipContent:"You are not an admin of this workspace",children:(0,a.jsxs)("button",{onClick:()=>_(),className:"mt-auto flex items-center gap-2 rounded-md px-2 py-2 text-base hover:bg-muted",disabled:S||!C||i,children:[(0,a.jsx)(c.A,{name:"plus_small"}),"Add organization"]})})]})]})]})})})]})}function w(e){let{workspaceId:t,selectedSupabaseProject:s,onSupabaseProjectSelect:h,disabled:g=!1}=e,f=(0,u.a)(),{supabaseOrganizations:j}=(0,x.G)({workspaceId:t});(0,x.f)({workspaceId:t});let b=(0,l.j4)(e=>e.membership),v=(null==b?void 0:b.role)==="admin"||(null==b?void 0:b.role)==="owner",{handleConnect:w,isConnecting:y}=(0,p.UO)(t),N=(0,r.f)();return f?(0,a.jsx)(A,{workspaceId:t,selectedSupabaseProject:s,onSupabaseProjectSelect:h,disabled:g}):(0,a.jsxs)(i.B,{setSelectedProject:h,setOpen:()=>{},children:[N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.lp,{className:"flex flex-col items-start gap-0.5 whitespace-normal text-sm text-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(c.A,{name:"cloud",size:"small"}),"Lovable Cloud"]}),(0,a.jsx)("div",{className:"text-sm font-normal text-muted-foreground",children:"Suggested as you build"})]}),(0,a.jsx)(d.mB,{})]}),(0,a.jsxs)(d.lp,{className:"flex flex-col items-start gap-0.5 whitespace-normal text-sm text-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(m.Wu,{className:"h-4 w-4"}),"Supabase"]}),(0,a.jsx)("div",{className:"text-sm font-normal text-muted-foreground",children:"Select a project"})]}),null==j?void 0:j.map(e=>(0,a.jsx)(n.g,{organization:e,reconnectOrg:w,canManageWorkspaceIntegrations:v},e.id)),(0,a.jsx)(o.Q,{showTooltip:!v,tooltipContent:"You are not an admin of this workspace",children:(0,a.jsxs)(d._2,{onClick:()=>w(),className:"justify-between text-sm text-muted-foreground",disabled:y||!v||g,children:["Add Supabase organization",(0,a.jsx)(c.A,{name:"plus_small",size:"small"})]})})]})}},38669:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var a=s(95661);let l=e=>{let{canCreateProjects:t,canManageSupabase:s}=e;return(0,a.useMemo)(()=>{let e=t?void 0:"You don't have permission to create projects in this workspace. Contact a workspace admin for access.";return{disableChangeVisibility:!t,disabledTooltipContent:e,disableFormActions:!1,disableSubmission:!1,disableModelSelector:!1,disableConnectSupabase:!t||!s,disablePromptSuggestions:!t,showActionButtons:!0}},[t,s])}},48294:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s(95661),l=s(14618),r=s(65758),i=s(19620);let n=e=>{let{promptKey:t,promptParam:s,setImages:n}=e,o=(0,a.useMemo)(()=>t?(0,r.Bj)(t):null,[t]),d=(null==o?void 0:o.prompt)||s,{download:c}=(0,l.l)();return(0,a.useEffect)(()=>{(null==o?void 0:o.files)&&o.files.length>0?Promise.all(o.files.map(async e=>{try{let{url:t}=await c({dir_name:e.userId,file_name:e.fileId});return{id:"hash-file-".concat(e.fileId),url:t,name:e.fileName,size:0,type:e.mimeType,uploaded:!0,uploading:!1,existingFileId:e.fileId}}catch(t){return i.logging.error("Error fetching download URL for file from hash",{error:t,fileId:e.fileId}),null}})).then(e=>{n(e.filter(e=>null!=e))}):(null==o?void 0:o.images)&&o.images.length>0&&n(o.images.map((e,t)=>{try{return{id:"hash-image-".concat(e,"-").concat(t),url:decodeURIComponent(e),name:"Image ".concat(t+1),size:0,type:"image/jpeg",uploaded:!0,uploading:!1}}catch(t){return i.logging.error("Error decoding malformed image URL from hash fragment",{error:t,url:e}),null}}).filter(e=>null!=e))},[null==o?void 0:o.images,null==o?void 0:o.files,n,c]),{hashPromptData:o,effectivePrompt:d,cleanupHashPrompt:()=>{t&&(0,r.t)(t)}}}},49153:(e,t,s)=>{"use strict";s.d(t,{CreateForm:()=>eQ});var a=s(77145),l=s(13410),r=s(92912),i=s(95661),n=s(50514),o=s(95018),d=s(4292),c=s(83220),m=s(79294),u=s(61374),p=s(49493),x=s(69070),h=s(64482),g=s(48891),f=s(53413),j=s(8719),b=s(49692),v=s(56024),A=s(69730);let w=e=>{let{className:t,iconSize:s="large",disabled:l=!1,isSendingDisabled:r=!1}=e;return(0,a.jsx)("button",{id:"chatinput-send-message-button",type:"submit",className:(0,v.cn)("flex h-10 w-10 items-center justify-center rounded-full bg-foreground transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50 md:h-8 md:w-8",t),disabled:r||l,children:(0,a.jsx)(A.A,{name:"arrow_up",weight:"medium",size:s,className:"text-background"})})};var y=s(69858),N=s(44081),C=s(92753),_=s(52811),S=s(69958),k=s(89002),E=s(15365),T=s(53103),I=s(40911),D=s(63851),O=s(74507);let M=e=>{let{library:t,checked:s}=e;return(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsx)("div",{className:(0,v.cn)("flex h-4 w-4 items-center justify-center rounded-sm border",s?"border-primary bg-primary":"border-input"),children:s&&(0,a.jsx)(A.A,{name:"check",size:"xsmall",className:"text-primary-foreground"})}),(0,a.jsxs)("div",{className:"flex-1 truncate",children:[(0,a.jsx)("div",{className:"truncate font-medium",children:t.name||"Untitled Library"}),(0,a.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:"Updated ".concat(new Date(t.updated_at).toLocaleDateString())})]})]})},P=(0,i.forwardRef)((e,t)=>{let{displayText:s,selectedCount:l,disabled:r,className:i,...n}=e;return(0,a.jsxs)(_.$,{ref:t,variant:"outline",size:"sm",className:(0,v.cn)("flex h-10 max-w-52 items-center justify-between gap-2 rounded-full text-muted-foreground focus-visible:ring-0 md:h-8",l>0&&"border-foreground/20 text-foreground",i),disabled:r,...n,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{name:"folder",size:"small"}),(0,a.jsx)("span",{className:"truncate text-sm font-medium",children:s})]}),(0,a.jsx)(A.A,{name:"chevron_down",size:"small",className:"opacity-50"})]})});P.displayName="LibraryConnectionsPillTrigger";let R=e=>{let{selectedLibraries:t=[],onLibrariesSelectAction:s,disabled:r=!1}=e,[n,o]=(0,i.useState)(!1),d=(0,T.a)();(0,E.WW)();let m=(0,c.j4)(e=>e.currentWorkspace),u=(0,l.useRouter)(),{data:p,isLoading:x}=(0,I.I)({queryKey:["available-library-projects",null==m?void 0:m.id],queryFn:async()=>{if(!(null==m?void 0:m.id))return[];let e=(0,D.P)();return(await e.get("/workspaces/".concat(m.id,"/available-library-projects"))).libraries||[]},enabled:!!(null==m?void 0:m.id)&&n,permission:O.eZ.ViewWorkspace});if(d||!m)return null;let h=e=>{if("create-library"===e){u.push("/workspaces/".concat(m.id,"/libraries/new")),o(!1);return}let a=null==p?void 0:p.find(t=>t.id===e);a&&(t.some(t=>t.project_id===e)?s(t.filter(t=>t.project_id!==e)):s([...t,{project_id:e,name:a.name||a.description}]))},g=t.length>0?"".concat(t.length," ").concat(1===t.length?"library":"libraries"):"Libraries";return(0,a.jsxs)(k.AM,{open:n,onOpenChange:o,children:[(0,a.jsx)(k.Wv,{asChild:!0,children:(0,a.jsx)(P,{displayText:g,selectedCount:t.length,disabled:r,role:"combobox","aria-expanded":n})}),(0,a.jsx)(k.hl,{className:"w-64 p-0",align:"start",children:(0,a.jsxs)(S.uB,{children:[(0,a.jsx)(S.G7,{placeholder:"Search library projects..."}),(0,a.jsxs)(S.oI,{children:[(0,a.jsx)(S.xL,{children:x?"Loading libraries...":"No library projects found."}),p&&p.length>0&&(0,a.jsx)(S.L$,{heading:"Available Libraries",children:p.map(e=>(0,a.jsx)(S.h_,{value:e.id,onSelect:()=>h(e.id),children:(0,a.jsx)(M,{library:e,checked:t.some(t=>t.project_id===e.id)})},e.id))})]}),(0,a.jsx)("div",{className:"border-t",children:(0,a.jsxs)(_.$,{className:"w-full rounded-none py-5 text-muted-foreground",variant:"ghost",onClick:()=>h("create-library"),children:[(0,a.jsx)(A.A,{name:"plus",size:"small",weight:"medium"}),"Create Library"]})})]})})]})};var z=s(61035),F=s(17307),L=s(214);let B=(0,i.forwardRef)((e,t)=>{let{displayText:s,theme:l,disabled:r=!1,onClear:i,...n}=e;return(0,a.jsxs)("div",{className:"group/pill relative",children:[(0,a.jsxs)(_.$,{ref:t,variant:"outline",size:"sm",className:"flex h-10 max-w-52 items-center justify-between gap-1 rounded-full text-muted-foreground group-hover/pill:border-accent group-hover/pill:bg-accent focus-visible:ring-0 md:h-8",type:"button",disabled:r,...n,children:[(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-1",children:[(0,a.jsx)(A.A,{name:"color_swatch",weight:"medium",className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:s})]}),(0,a.jsx)(A.A,{name:"chevron_down",className:(0,v.cn)("h-4 w-4 flex-shrink-0",l&&"opacity-0")})]}),l&&i&&(0,a.jsx)("button",{type:"button",onClick:i,className:"absolute right-1.5 top-1/2 z-10 flex h-5 w-5 -translate-y-1/2 items-center justify-center rounded-full hover:bg-muted","aria-label":"Clear theme",children:(0,a.jsx)(A.A,{name:"close",className:"h-4 w-4"})})]})});B.displayName="PillTrigger";var U=s(43691);let W=e=>{let{selectedTheme:t,onThemeSelectAction:s,onManageThemesAction:l,onCreateNewThemeAction:r,disabled:n=!1}=e,[o,d]=(0,i.useState)(!1),c=(0,T.a)(),{resolvedTheme:m="light"}=(0,z.D)(),{isLoading:u,themes:p}=(0,F.j)(),x=(0,E.WW)(),h=(0,L.pk)(),g=(0,F.l)();if(c||!x&&!h)return null;let f=e=>{if("manage"===e){null==l||l(),d(!1);return}if("create-new"===e){null==r||r(),d(!1);return}if("none"===e){s(void 0),d(!1);return}s(e),d(!1)},j=t?((e,t)=>{if(!t)return"Unknown theme";let s=t.find(t=>t.id===e);return(null==s?void 0:s.name)||"Unknown theme"})(t,p):"Theme",b=t?null==p?void 0:p.find(e=>e.id===t):void 0;return(0,a.jsxs)(k.AM,{open:o,onOpenChange:d,children:[(0,a.jsx)(k.Wv,{asChild:!0,children:(0,a.jsx)(B,{displayText:j,theme:b,disabled:n,onClear:e=>{e.stopPropagation(),s(void 0)},role:"combobox","aria-expanded":o})}),(0,a.jsx)(k.hl,{className:"z-40 w-64 p-0",align:"start",children:(0,a.jsxs)(S.uB,{children:[(0,a.jsx)(S.G7,{wrapperClassName:"h-10",placeholder:"Search themes..."}),(0,a.jsxs)(S.oI,{children:[(0,a.jsx)(S.xL,{children:u?"Loading themes...":"No themes found."}),g.filter(e=>e.themes.length>0).map(e=>(0,a.jsx)(S.L$,{heading:e.title,children:e.themes.map(e=>(0,a.jsx)(S.h_,{value:"".concat(e.name,"-").concat(e.id),onSelect:()=>f(e.id),children:(0,a.jsx)(U.j,{theme:e,checked:t===e.id,pageMode:m})},e.id))},e.id))]}),(0,a.jsxs)("div",{className:"flex items-center divide-x border-t",children:[(0,a.jsxs)(_.$,{className:"w-full rounded-none py-5 text-muted-foreground",variant:"ghost",onClick:()=>f("create-new"),children:[(0,a.jsx)(A.A,{name:"plus",size:"small",weight:"medium"}),"Create new"]}),(0,a.jsx)(_.$,{className:"aspect-square h-full w-10 rounded-none text-muted-foreground",variant:"ghost",onClick:()=>f("manage"),children:(0,a.jsx)(A.A,{name:"cog",size:"small",weight:"medium"})})]})]})})]})};var $=s(27458),Q=s(10830),K=s(39528),V=s(18221),G=s(94602),H=s(77214);let Z=(0,i.memo)(e=>{let{onEnable:t}=e;return(0,a.jsx)(k.hl,{align:"end",side:"bottom",className:"w-80 rounded-3.5xl p-4",alignOffset:-16,children:(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Chat before you build"}),(0,a.jsx)("p",{className:"text-base text-muted-foreground md:text-sm",children:"Ask questions, explore ideas, or plan your project before creating it. Switch to build mode when you're ready to start."})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(_.$,{size:"sm",onClick:t,className:"rounded-full",type:"button","aria-label":"Enable chat mode",children:"Enable"})})]})})});Z.displayName="ChatModeButtonPopover";let X=e=>{let{chatModeEnabled:t,onToggle:s,disabled:l}=e,[r,n]=(0,H.V)("chat-mode-education-seen",{defaultValue:!1}),[o,d]=(0,i.useState)(!1),c=(0,i.useCallback)(()=>{r?s():d(!0)},[r,s]),m=(0,i.useCallback)(()=>{n(!0),d(!1),s()},[n,s]),u=o&&!r,p=(0,v.cn)("flex h-10 gap-1.5 rounded-full border px-3 py-0","font-normal text-muted-foreground","hover:border-border hover:bg-accent","md:h-8 md:font-medium",{"border-affirmative-primary bg-affirmative-primary text-affirmative-primary-foreground":t,"hover:border-affirmative-primary hover:bg-affirmative-primary hover:text-affirmative-primary-foreground":t});return(0,a.jsxs)(k.AM,{open:u,onOpenChange:d,children:[(0,a.jsx)(k.Wv,{asChild:!0,children:(0,a.jsxs)(_.$,{type:"button",variant:"outline",size:"sm",onClick:c,disabled:l,className:p,"aria-label":"Toggle chat mode","aria-pressed":t,children:[(0,a.jsx)(A.A,{name:"message",size:"small",weight:"medium"}),"Chat"]})}),(0,a.jsx)(Z,{onEnable:m})]})};var Y=s(55365),q=s(54351),J=s(27623),ee=s(91604),et=s(20247),es=s(77563),ea=s(72632),el=s(73923),er=s(92918),ei=s(94087),en=s(26294),eo=s(1702),ed=s(3140),ec=s(28717),em=s(15941),eu=s(8711),ep=s(58295),ex=s(43987),eh=s(86396),eg=s(20064),ef=s(71549);function ej(e){let{isLovableAdmin:t,onSettingsClick:s,handleTemplatesClick:l,disabled:n=!1,selectedSupabaseProject:o,onSupabaseProjectSelect:d,hideSupabase:m=!1}=e,u=(0,en.c3)("AttachImageActionModal"),p=(0,ed.M)(),[x,h]=(0,i.useState)(!1),[g,f]=(0,H.V)("has_seen_attach_image_modal",{defaultValue:!1}),{dropzoneElement:j,openFileUploadFromDropdown:b,getInputProps:v,addImages:w}=(0,eh.F)({portalTargetRef:null}),{handleScreenCapture:y}=(0,eg.T)(w,K.yD.CREATE_FORM.SCREENSHOT_CAPTURED),N=()=>{r.bC.capture(K.yD.CREATE_FORM.ATTACH_CLICKED,{has_seen_attach_modal:g}),null==p||p.track(K.yD.CREATE_FORM.ATTACH_CLICKED,{has_seen_attach_modal:g},{integrations:{All:!1,POSTHOG:!0}}),g?b():h(!0)},{userData:C}=(0,ec.ur)(),S=(0,c.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:k}=(0,ea.cb)(null==S?void 0:S.plan);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(em.K,{children:(0,a.jsxs)(eu.rI,{onOpenChange:n?void 0:e=>{e&&(r.bC.capture(K.yD.CREATE_FORM.DROPDOWN_CLICKED),null==p||p.track(K.yD.CREATE_FORM.DROPDOWN_CLICKED,{},{integrations:{All:!1,POSTHOG:!0}}))},children:[(0,a.jsx)(eu.ty,{asChild:!0,children:(0,a.jsx)(_.$,{variant:"outline",size:"sm",className:"h-10 w-10 rounded-full p-0 text-muted-foreground hover:text-foreground md:h-8 md:w-8",type:"button",disabled:n,children:(0,a.jsx)(A.A,{name:"plus_small",size:"default",className:"text-muted-foreground"})})}),(0,a.jsxs)(eu.SQ,{align:"start",className:"min-w-52",children:[(0,a.jsxs)(eu._2,{onClick:n?void 0:y,disabled:n,className:"hidden md:flex",children:[(0,a.jsx)(A.A,{name:"screenshot",size:"small",className:"text-muted-foreground"}),u("screenshot")]}),t&&(0,a.jsxs)(eu._2,{onClick:n?void 0:s,disabled:n,children:[(0,a.jsx)(A.A,{name:"sliders_horizontal",size:"small",className:"text-muted-foreground"}),u("advancedSettings")]}),k&&(null==C?void 0:C.id)&&(0,a.jsxs)(eu._2,{onClick:n?void 0:l,disabled:n,children:[(0,a.jsx)(A.A,{name:"file_export"}),u("templates")," ",S&&(0,a.jsx)(ex.M,{workspace:S,requiredPlanCategory:"biz"})]}),S&&(0,a.jsx)(ef.T,{workspace:S,selectedSupabaseProject:o,onSupabaseProjectSelect:d,hideSupabase:m,disabled:n})]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(ep.m_,{children:[(0,a.jsx)(ep.k$,{asChild:!0,children:g?(0,a.jsxs)(_.$,{variant:"outline",size:"sm",className:"h-10 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground md:h-8",type:"button",onClick:n?void 0:N,disabled:n,children:[(0,a.jsx)(A.A,{name:"paperclip",size:"small"}),(0,a.jsx)("span",{className:"hidden md:flex",children:u("attach")})]}):(0,a.jsx)(eo.u,{isOpen:!n&&x,onOpenChange:n?()=>{}:e=>{h(e),!e&&x&&f(!0)},onAttachImages:n?()=>{}:()=>{r.bC.capture(K.yD.CREATE_FORM.ATTACH_ADD_IMAGES_CLICKED),null==p||p.track(K.yD.CREATE_FORM.ATTACH_ADD_IMAGES_CLICKED,{},{integrations:{All:!1,POSTHOG:!0}}),b()},onDismiss:n?()=>{}:()=>{r.bC.capture(K.yD.CREATE_FORM.ATTACH_DISMISSED),null==p||p.track(K.yD.CREATE_FORM.ATTACH_DISMISSED,{},{integrations:{All:!1,POSTHOG:!0}})},children:(0,a.jsxs)(_.$,{variant:"outline",size:"sm",className:"h-10 w-10 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground md:h-8 md:w-fit",type:"button",disabled:n,onClick:N,children:[(0,a.jsx)(A.A,{name:"paperclip",size:"small"}),(0,a.jsx)("span",{className:"hidden md:flex",children:u("attach")})]})})}),(0,a.jsx)(ep.ZI,{className:"border-background bg-background text-foreground",children:u("tooltip")})]})}),j,(0,a.jsx)("input",{id:"file-upload",className:"hidden",...v()})]})}var eb=s(75417),ev=s(71148);function eA(e){let{children:t,className:s,speed:l=1,colorFrom:r="#ffaa40",colorTo:i="#9c40ff",colors:n,...o}=e,d="linear-gradient(to right, ".concat((n||[r,i,r]).join(", "),")");return(0,a.jsx)("span",{style:{"--bg-size":"".concat(300*l,"%"),backgroundImage:d},className:(0,v.cn)("inline animate-gradient bg-[length:var(--bg-size)_100%] bg-clip-text text-transparent",s),...o,children:t})}let ew=["website","drawing","wireframe"];function ey(e){let{isLovableAdmin:t,onSettingsClick:s,handleTemplatesClick:l,disabled:n=!1,selectedSupabaseProject:o,onSupabaseProjectSelect:d,hideSupabase:m=!1}=e,u=(0,en.c3)("AttachImageActionModal"),p=(0,ed.M)(),[x,h]=(0,H.V)("has_seen_clone_dialog",{defaultValue:!1}),[g,f]=(0,i.useState)(!1),{dropzoneElement:j,openFileUploadFromDropdown:v,getInputProps:w,addImages:y}=(0,eh.F)({portalTargetRef:null}),{handleScreenCapture:N}=(0,eg.T)(y,K.yD.CREATE_FORM.CLONE_SCREENSHOT_CAPTURED),{focusChatInput:C}=(0,b.N)(),{userData:S}=(0,ec.ur)(),E=(0,c.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:T}=(0,ea.cb)(null==E?void 0:E.plan),I=(0,i.useMemo)(()=>ew.map(e=>u("cloneOptions.".concat(e))),[u]),[D,O]=(0,i.useState)(0);(0,i.useEffect)(()=>{if(I.length<=1)return;let e=window.setInterval(()=>{O(e=>{let t=e+1;return t>=I.length?0:t})},2600);return()=>window.clearInterval(e)},[I]),(0,i.useEffect)(()=>{O(0)},[I]);let M=I[D],P=u("cloneButton",{type:M}),R=u("cloneButtonPrefix");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(em.K,{children:(0,a.jsxs)(eu.rI,{onOpenChange:n?void 0:e=>{e&&(r.bC.capture(K.yD.CREATE_FORM.DROPDOWN_CLICKED),null==p||p.track(K.yD.CREATE_FORM.DROPDOWN_CLICKED,{},{integrations:{All:!1,POSTHOG:!0}}))},children:[(0,a.jsx)(eu.ty,{asChild:!0,children:(0,a.jsx)(_.$,{variant:"outline",size:"sm",className:"h-10 w-10 rounded-full p-0 text-muted-foreground hover:text-foreground md:h-8 md:w-8",type:"button",disabled:n,children:(0,a.jsx)(A.A,{name:"plus_small",size:"default",className:"text-muted-foreground"})})}),(0,a.jsxs)(eu.SQ,{align:"start",className:"min-w-52",children:[(0,a.jsxs)(eu._2,{onClick:n?void 0:v,disabled:n,className:"hidden md:flex",children:[(0,a.jsx)(A.A,{name:"paperclip",size:"small",className:"text-muted-foreground"}),u("attach")]}),t&&(0,a.jsxs)(eu._2,{onClick:n?void 0:s,disabled:n,children:[(0,a.jsx)(A.A,{name:"sliders_horizontal",size:"small",className:"text-muted-foreground"}),u("advancedSettings")]}),T&&(null==S?void 0:S.id)&&(0,a.jsxs)(eu._2,{onClick:n?void 0:l,disabled:n,children:[(0,a.jsx)(A.A,{name:"file_export"}),u("templates")," ",E&&(0,a.jsx)(ex.M,{workspace:E,requiredPlanCategory:"biz"})]}),E&&(0,a.jsx)(ef.T,{workspace:E,selectedSupabaseProject:o,onSupabaseProjectSelect:d,hideSupabase:m,disabled:n})]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(ep.m_,{children:[(0,a.jsx)(ep.k$,{asChild:!0,children:x?(0,a.jsx)(_.$,{variant:"outline",size:"sm",className:"h-10 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground md:h-8",type:"button",onClick:n?void 0:()=>{N(),setTimeout(()=>{C()},100)},disabled:n,"aria-label":P,children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:R}),(0,a.jsx)("span",{className:"relative inline-flex min-w-[66px] items-center overflow-hidden",children:(0,a.jsx)(eb.N,{mode:"wait",initial:!1,children:(0,a.jsx)(ev.P.span,{initial:{y:-12,opacity:0},animate:{y:0,opacity:1},exit:{y:12,opacity:0},transition:{duration:.35,ease:[.16,1,.3,1]},className:"inline-flex whitespace-nowrap",children:(0,a.jsx)(eA,{colors:["#a1a1aa","#6366f1","#a1a1aa"],speed:.65,children:M})},"".concat(M,"-").concat(D))})})]})}):(0,a.jsxs)(k.AM,{open:g,onOpenChange:f,children:[(0,a.jsx)(k.Wv,{asChild:!0,children:(0,a.jsx)(_.$,{variant:"outline",size:"sm",className:"h-10 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground md:h-8",type:"button",disabled:n,"aria-label":P,children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:R}),(0,a.jsx)("span",{className:"relative inline-flex min-w-[66px] items-center overflow-hidden",children:(0,a.jsx)(eb.N,{mode:"wait",initial:!1,children:(0,a.jsx)(ev.P.span,{initial:{y:-12,opacity:0},animate:{y:0,opacity:1},exit:{y:12,opacity:0},transition:{duration:.35,ease:[.16,1,.3,1]},className:"inline-flex whitespace-nowrap",children:(0,a.jsx)(eA,{colors:["#a1a1aa","#6366f1","#a1a1aa"],speed:.65,children:M})},"".concat(M,"-").concat(D))})})]})})}),(0,a.jsx)(k.hl,{className:"w-80 rounded-3.5xl px-4 py-5",align:"start",sideOffset:8,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"relative w-full overflow-hidden rounded-2xl",children:(0,a.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-auto w-full",src:"/videos/features/clone-button-d4zjamw.mp4",children:(0,a.jsx)("track",{kind:"captions"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg",children:u("cloneModalTitle")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:u("cloneModalDescription")})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(_.$,{size:"sm",onClick:()=>{h(!0),f(!1),setTimeout(()=>{N(),setTimeout(()=>{C()},100)},0)},className:"rounded-full",type:"button",children:u("cloneModalClose")})})]})})]})}),(0,a.jsx)(ep.ZI,{className:"border-background bg-background text-foreground",children:u("cloneTooltip")})]})}),j,(0,a.jsx)("input",{id:"file-upload",className:"hidden",...w()})]})}let eN=["website","drawing","wireframe"];function eC(e){let{isLovableAdmin:t,onSettingsClick:s,handleTemplatesClick:l,disabled:n=!1,selectedSupabaseProject:o,onSupabaseProjectSelect:d,hideSupabase:m=!1}=e,u=(0,en.c3)("AttachImageActionModal"),p=(0,ed.M)(),[x,h]=(0,H.V)("has_seen_start_from_dialog",{defaultValue:!1}),[g,f]=(0,i.useState)(!1),{dropzoneElement:j,openFileUploadFromDropdown:v,getInputProps:w,addImages:y}=(0,eh.F)({portalTargetRef:null}),{handleScreenCapture:N}=(0,eg.T)(y,K.yD.CREATE_FORM.CLONE_SCREENSHOT_CAPTURED),{focusChatInput:C}=(0,b.N)(),{userData:S}=(0,ec.ur)(),E=(0,c.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:T}=(0,ea.cb)(null==E?void 0:E.plan),I=(0,i.useMemo)(()=>eN.map(e=>u("startFromOptions.".concat(e))),[u]),[D,O]=(0,i.useState)(0);(0,i.useEffect)(()=>{if(I.length<=1)return;let e=window.setInterval(()=>{O(e=>{let t=e+1;return t>=I.length?0:t})},2600);return()=>window.clearInterval(e)},[I]),(0,i.useEffect)(()=>{O(0)},[I]);let M=I[D],P=u("startFromButton",{type:M}),R=u("startFromButtonPrefix");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(em.K,{children:(0,a.jsxs)(eu.rI,{onOpenChange:n?void 0:e=>{e&&(r.bC.capture(K.yD.CREATE_FORM.DROPDOWN_CLICKED),null==p||p.track(K.yD.CREATE_FORM.DROPDOWN_CLICKED,{},{integrations:{All:!1,POSTHOG:!0}}))},children:[(0,a.jsx)(eu.ty,{asChild:!0,children:(0,a.jsx)(_.$,{variant:"outline",size:"sm",className:"h-10 w-10 rounded-full p-0 text-muted-foreground hover:text-foreground md:h-8 md:w-8",type:"button",disabled:n,children:(0,a.jsx)(A.A,{name:"plus_small",size:"default",className:"text-muted-foreground"})})}),(0,a.jsxs)(eu.SQ,{align:"start",className:"min-w-52",children:[(0,a.jsxs)(eu._2,{onClick:n?void 0:v,disabled:n,className:"hidden md:flex",children:[(0,a.jsx)(A.A,{name:"paperclip",size:"small",className:"text-muted-foreground"}),u("attach")]}),t&&(0,a.jsxs)(eu._2,{onClick:n?void 0:s,disabled:n,children:[(0,a.jsx)(A.A,{name:"sliders_horizontal",size:"small",className:"text-muted-foreground"}),u("advancedSettings")]}),T&&(null==S?void 0:S.id)&&(0,a.jsxs)(eu._2,{onClick:n?void 0:l,disabled:n,children:[(0,a.jsx)(A.A,{name:"file_export"}),u("templates")," ",E&&(0,a.jsx)(ex.M,{workspace:E,requiredPlanCategory:"biz"})]}),E&&(0,a.jsx)(ef.T,{workspace:E,selectedSupabaseProject:o,onSupabaseProjectSelect:d,hideSupabase:m,disabled:n})]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(ep.m_,{children:[(0,a.jsx)(ep.k$,{asChild:!0,children:x?(0,a.jsx)(_.$,{variant:"outline",size:"sm",className:"h-10 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground md:h-8",type:"button",onClick:n?void 0:()=>{N(),setTimeout(()=>{C()},100)},disabled:n,"aria-label":P,children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:R}),(0,a.jsx)("span",{className:"relative inline-flex min-w-[66px] items-center overflow-hidden",children:(0,a.jsx)(eb.N,{mode:"wait",initial:!1,children:(0,a.jsx)(ev.P.span,{initial:{y:-12,opacity:0},animate:{y:0,opacity:1},exit:{y:12,opacity:0},transition:{duration:.35,ease:[.16,1,.3,1]},className:"inline-flex whitespace-nowrap",children:(0,a.jsx)(eA,{colors:["#a1a1aa","#6366f1","#a1a1aa"],speed:.65,children:M})},"".concat(M,"-").concat(D))})})]})}):(0,a.jsxs)(k.AM,{open:g,onOpenChange:f,children:[(0,a.jsx)(k.Wv,{asChild:!0,children:(0,a.jsx)(_.$,{variant:"outline",size:"sm",className:"h-10 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground md:h-8",type:"button",disabled:n,"aria-label":P,children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:R}),(0,a.jsx)("span",{className:"relative inline-flex min-w-[66px] items-center overflow-hidden",children:(0,a.jsx)(eb.N,{mode:"wait",initial:!1,children:(0,a.jsx)(ev.P.span,{initial:{y:-12,opacity:0},animate:{y:0,opacity:1},exit:{y:12,opacity:0},transition:{duration:.35,ease:[.16,1,.3,1]},className:"inline-flex whitespace-nowrap",children:(0,a.jsx)(eA,{colors:["#a1a1aa","#6366f1","#a1a1aa"],speed:.65,children:M})},"".concat(M,"-").concat(D))})})]})})}),(0,a.jsx)(k.hl,{className:"w-80 rounded-3.5xl px-4 py-5",align:"start",sideOffset:8,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"relative w-full overflow-hidden rounded-2xl",children:(0,a.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-auto w-full",src:"/videos/features/start-from-ryympzk.mp4",children:(0,a.jsx)("track",{kind:"captions"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg",children:u("startFromModalTitle")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:u("startFromModalDescription")})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(_.$,{size:"sm",onClick:()=>{h(!0),f(!1),setTimeout(()=>{N(),setTimeout(()=>{C()},100)},0)},className:"rounded-full",type:"button",children:u("startFromModalClose")})})]})})]})}),(0,a.jsx)(ep.ZI,{className:"border-background bg-background text-foreground",children:u("startFromTooltip")})]})}),j,(0,a.jsx)("input",{id:"file-upload",className:"hidden",...w()})]})}let e_=e=>{let{isLovableAdmin:t,onSettingsClick:s,handleTemplatesClick:l,disabled:r=!1,hideSupabase:i=!1,selectedSupabaseProject:n,onSupabaseProjectSelect:o}=e,d=(0,ei.Q)(er.PostHogExperiment.CLONE_BUTTON,{control:ej,variant1:ey,variant2:eC});return(0,a.jsx)(d,{isLovableAdmin:t,onSettingsClick:s,handleTemplatesClick:l,disabled:r,hideSupabase:i,selectedSupabaseProject:n,onSupabaseProjectSelect:o})};e_.displayName="CloneAttachButtons";let eS=e=>{let{chatModeEnabled:t,setChatModeEnabled:s,techStack:l,setTechStack:r,isSettingsDialogOpen:n,setIsSettingsDialogOpen:o,openTemplatesDialog:d,disabled:m=!1,workspaceId:u,selectedSupabaseProject:p,onSupabaseProjectSelect:x,hideSupabase:h=!1}=e,g=(0,E.WW)(),{selectedTechnologies:f}=(0,i.useMemo)(()=>{if(l){let e=el.y.find(e=>e.id===l);if(e){let{technologies:t,description:s}=e;return{selectedTechnologies:t.map(e=>el.Z.find(t=>t.id===e)),techStackDescription:s}}}return{selectedTechnologies:[],techStackDescription:""}},[l]),j=(0,c.j4)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:b}=(0,ea.cb)(null==j?void 0:j.plan),v=(0,J.BK)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e_,{isLovableAdmin:g,onSettingsClick:()=>o(!0),handleTemplatesClick:()=>{b?d():v(J.KU.BIZ_TEMPLATES)},disabled:m,selectedSupabaseProject:p,hideSupabase:h,onSupabaseProjectSelect:x}),(0,a.jsx)(et.lG,{onOpenChange:o,open:n,children:(0,a.jsxs)(et.Cf,{children:[(0,a.jsxs)(et.c7,{children:[(0,a.jsx)(et.L3,{children:"Advanced Settings"}),(0,a.jsx)(et.rr,{children:"Make advanced or experimental changes before starting a new project"})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-center",children:[g&&(0,a.jsx)("div",{className:"mb-3 flex w-full flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ee.S,{id:"chat-mode",checked:t,onCheckedChange:e=>s(e),disabled:m}),(0,a.jsx)(es.Label,{htmlFor:"chat-mode",children:"Enable Chat Mode"})]})}),(0,a.jsxs)("div",{className:"mb-2 w-full",children:[(0,a.jsx)("p",{className:"mb-1 text-sm font-medium",children:"Tech Stack"}),(0,a.jsx)("div",{className:m?"pointer-events-none opacity-50":"",children:(0,a.jsx)(q.A,{className:"w-full",value:l,onChange:e=>{e&&!m&&r(e)}})})]}),(0,a.jsx)("div",{className:"mb-3 flex w-full items-center justify-between",children:(0,a.jsx)("div",{className:"flex-grow text-sm text-muted-foreground",children:"The tech stack to be used for initial generation."})}),(0,a.jsx)("div",{className:"flex gap-4",children:f.map(e=>(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(es.Label,{children:e.name}),(0,a.jsx)(Y.i,{id:e.id})]},e.name))})]})]})})]})};var ek=s(58504),eE=s(29495),eT=s(38669),eI=s(6436),eD=s(21926),eO=s(48294),eM=s(49475),eP=s(30813),eR=s(1068),ez=s(22196),eF=s(42673),eL=s(31965),eB=s(73279),eU=s(67185),eW=s(12742);let e$=e=>{var t,s;let{disabled:l=!1,minHeight:r,height:i,contentKey:n="TypeWriter"}=e,o=(0,en.c3)(n),d=(0,eB.ot)(),c=(0,eW.d)({words:null!=(s=null==(t=d[n])?void 0:t.words)?s:[],prefix:o("prefix")});return(0,a.jsx)(eU.h,{autoSize:!0,minHeight:null!=r?r:80,shouldAutoFocus:!l,placeholder:l?"Viewers can only view existing projects":c,enableSlashCommands:!1,isChatModeActive:!1,disabled:l})},eQ=e=>{let{maxWidth:t="max-w-3xl",textareaMinHeight:s,typeWriterContentKey:l,className:r,hideSupabase:i=!1}=e;return(0,a.jsx)(V.Ar,{localStorageKey:"create-form",children:(0,a.jsx)(eK,{hideSupabase:i,maxWidth:t,textareaMinHeight:s,typeWriterContentKey:l,className:r})})},eK=e=>{let{maxWidth:t,textareaMinHeight:s,typeWriterContentKey:S,className:k,hideSupabase:T=!1}=e,I=(0,eF.C)(e=>e.createNewBlankTheme),{store:D}=(0,V.Xl)(),M=D(e=>e.message),P=D(e=>e.setImages),z=(0,V.Uw)(e=>e.suggestionLabel),F=(0,V.Uw)(e=>e.images),B=(0,L.zJ)(),U=(0,L.Ws)(),H=(0,E.WW)(),Z=(0,L.B1)(),[Y,q]=(0,n.A)("chat-mode-enabled-landing-page",{defaultValue:!1}),{currentWorkspaceId:J,setCurrentWorkspaceId:ee}=(0,c.Dx)(),et=(0,p.Mu)(e=>e.isLoading),es=(0,l.useSearchParams)(),ea=es.get("promptKey"),el=es.get("prompt"),er=es.get("autosubmit"),ei=es.get("builder_token"),en=(0,c.j4)(e=>e.currentWorkspace),eo=(0,h.f)(),{permitted:ed}=(0,u.J)(O.eZ.CreateWorkspaceProjects),{permitted:ec}=(0,u.J)(O.eZ.ManageWorkspaceSupabase),{selectedModel:em}=(0,m.Y$)(),{isSettingsDialogOpen:eu,setIsSettingsDialogOpen:ep,showDismissApiKeyDialog:ex,setShowDismissApiKeyDialog:eh,isThemeDialogOpen:eg,setIsThemeDialogOpen:ef,showTemplatesDialog:ej,setShowTemplatesDialog:eb,openTemplatesDialog:ev}=(0,eE.F)(),eA=!!es.get("templateId"),{techStack:ew,setTechStack:ey,selectedTemplateId:eN,setSelectedTemplateId:eC,hasUserRemovedTemplate:e_,setHasUserRemovedTemplate:eB,selectedTheme:eU,setSelectedTheme:eW,selectedSupabaseProject:eQ,setSelectedSupabaseProject:eK,selectedLibraries:eV,setSelectedLibraries:eG}=(0,eI.x)({workspaceId:J,currentWorkspace:en,isLovableCloudEnabled:eo,hasTemplateInUrl:eA});(0,i.useEffect)(()=>{let e=es.get("templateId");e&&(eC(e),eB(!1))},[es,eC,eB]);let{disableChangeVisibility:eH,disableFormActions:eZ,disableSubmission:eX,disableModelSelector:eY,disableConnectSupabase:eq,showActionButtons:eJ}=(0,eT.e)({canCreateProjects:ed,canManageSupabase:ec}),{hashPromptData:e0,effectivePrompt:e1,cleanupHashPrompt:e2}=(0,eO.j)({promptKey:ea,promptParam:el,setImages:P}),{createProject:e5}=(0,eM.E)({workspaceId:J,selectedModel:em,techStack:ew,suggestionLabel:z,selectedTemplateId:eN,selectedSupabaseProject:eQ,selectedTheme:eU,selectedLibraries:eV,chatModeEnabled:Y,isChatFullscreenEnabled:U,cleanupHashPrompt:e2}),{handleMessageSubmit:e4}=(0,eD.T)({createProject:e5,isLovableAdmin:H,selectedModel:em,setShowDismissApiKeyDialog:eh}),{sendChatMessage:e3,isSendingDisabled:e6,isSubmitting:e9}=(0,d.$)({onSubmit:e4,chatModeEnabled:Y}),{showWorkspaceDialog:e8,onWorkspaceSelect:e7,handleWorkspaceDialogOpenChange:te}=(0,ek.Z)({effectivePrompt:e1,autoSubmit:er,builderToken:ei,workspaceId:J,isLoadingWorkspaces:et,images:F,hashPromptData:e0,createProject:e5,cleanupHashPrompt:e2});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.c,{isOpen:ex,onDismiss:()=>eh(!1),onConfirm:()=>{eh(!1),M&&(r.Ay.capture(K.$6.CREATION.API_KEY_WARNING_DISMISSED),e5({body:{message:M,id:(0,o.A)()}}))}}),(0,a.jsx)(ez.k,{isOpen:ej,setIsOpen:eb,selectedTemplateId:eN,setSelectedTemplateId:e=>{eC(e),eB(!1)}}),(0,a.jsx)(eL.S,{open:eg,onOpenChange:ef}),(0,a.jsx)(Q.AX,{open:e8,onOpenChange:te,onWorkspaceSelect:e=>{ee(e),e7(e)},selectedWorkspaceId:J}),(0,a.jsx)("div",{className:(0,v.cn)("w-full ".concat(t),k),children:(0,a.jsx)("div",{className:"relative w-full",children:(0,a.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,a.jsx)("div",{className:"relative size-full",children:(0,a.jsxs)(b._,{onSendChatMessage:e4,isSubmitting:e9,children:[(0,a.jsx)(G.s,{}),(0,a.jsxs)(g.V,{className:"w-full rounded-3.5xl border border-muted-border bg-muted text-base shadow-xl transition-all duration-150 ease-in-out focus-within:border-foreground/20 hover:border-foreground/10 focus-within:hover:border-foreground/20",onSubmit:eX?()=>{}:e3,children:[(F.length>0||!!eN)&&(0,a.jsx)("div",{className:"p-1 pb-0",children:(0,a.jsx)(j.d,{children:eN&&(0,a.jsx)(eR.M,{projectId:eN,setSelectedTemplateId:e=>{eC(e),e||eB(!0)},openTemplatesDialog:ev})})}),(0,a.jsx)(e$,{disabled:eX,minHeight:s,contentKey:S}),(0,a.jsx)(y.eh,{}),(0,a.jsxs)(f.Z,{className:"flex-wrap items-center",children:[(0,a.jsx)(eS,{chatModeEnabled:Y,setChatModeEnabled:q,techStack:ew,setTechStack:ey,isSettingsDialogOpen:eu,setIsSettingsDialogOpen:ep,openTemplatesDialog:ev,disabled:eZ,workspaceId:J||"",selectedSupabaseProject:eQ,onSupabaseProjectSelect:eK,hideSupabase:T}),(0,a.jsx)(W,{selectedTheme:eU,onThemeSelectAction:eW,onManageThemesAction:()=>ef(!0),onCreateNewThemeAction:()=>{I(),ef(!0)},disabled:eH}),!T&&(0,a.jsx)(eP.Z,{}),Z&&(0,a.jsx)(R,{selectedLibraries:eV,onLibrariesSelectAction:e=>eG(e||[]),disabled:eH}),!T&&"object"==typeof eQ&&eQ&&(0,a.jsx)("div",{className:eq?"pointer-events-none opacity-50":"",children:(0,a.jsxs)(_.$,{variant:"default",size:"sm",className:"flex h-8 max-w-32 items-center gap-1 rounded-full pr-2 focus-visible:ring-0 md:max-w-40",onClick:()=>eK(null),disabled:eq,children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.gu,{name:"Supabase",className:"mr-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden truncate text-sm font-medium md:flex",children:eQ.name})]}),(0,a.jsx)(A.A,{name:"x",size:"small",className:"h-3.5 w-3.5 opacity-70"})]})}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[B&&(0,a.jsx)("div",{className:eY?"pointer-events-none opacity-50":"",children:(0,a.jsx)(C.B,{projectId:"create-form"})}),(0,a.jsxs)("div",{className:"relative flex items-center gap-1 md:gap-2",children:[(0,a.jsx)("div",{className:eJ?"":"pointer-events-none opacity-50"}),U&&(0,a.jsx)(X,{chatModeEnabled:Y,onToggle:()=>q(!Y),disabled:!eJ}),(0,a.jsx)(N.f,{size:"large",disabled:!eJ}),(0,a.jsx)(w,{isSendingDisabled:e6||!eJ,iconSize:"large"})]})]})]})]})]})})})})})]})}},49475:(e,t,s)=>{"use strict";s.d(t,{E:()=>g});var a=s(87299),l=s(13410),r=s(92912),i=s(95661),n=s(31088),o=s(3555),d=s(33966),c=s(24500),m=s(83473),u=s(63851),p=s(19620),x=s(18221),h=s(69850);let g=e=>{let{workspaceId:t,selectedModel:s,techStack:g,suggestionLabel:f,selectedTemplateId:j,selectedSupabaseProject:b,selectedTheme:v,selectedLibraries:A,chatModeEnabled:w,isChatFullscreenEnabled:y,cleanupHashPrompt:N}=e,C=(0,l.useRouter)(),_=(0,a.jE)(),S=(0,d.X5)(),{store:k}=(0,x.Xl)();return{createProject:(0,i.useCallback)(async e=>{let{body:a,options:l}=e;try{let e,r=k.getState(),i=(0,o.wL)(a),d={description:i.message||"Implement exactly the screenshot and nothing else",tech_stack:g||void 0,example_prompt_label:f||void 0,visibility:"private",images_added_via_dropdown:r.imagesAddedViaDropdown&&r.images.length>0||void 0,template_project_id:j,selected_theme:v||void 0,selected_libraries:A.length>0?A:void 0,...b&&"object"==typeof b?{supabase_project_config:{supabase_organization_id:b.organization_id,supabase_project_id:b.id}}:{},...i.image_urls&&i.image_urls.length>0&&i.from_hash_fragment?{image_urls:i.image_urls}:{}};if(!t)return void n.toast.error("We had trouble finding your workspace.",{description:"Please try again later or contact support if the problem persists."});"auto"!==s&&null!==s&&(e=s);let c={id:i.id,message:i.message,images:r.images,ai_message_id:i.ai_message_id||void 0,chatOnly:!!w||!0===i.chat_only||void 0,builderToken:i.builder_token||void 0,model:e,openFullscreen:!!y&&!!w||void 0};d.initial_message={...i,model:e};let m=(0,u.P)(),p=await m.post("/workspaces/".concat(t,"/projects"),d);_.invalidateQueries({queryKey:h.workspaceKeys.all}),_.setQueryData(h.gO.initialPrompt(p.id),c),null==N||N(),C.push("/projects/"+p.id),setTimeout(()=>{var e;null==l||null==(e=l.clear)||e.call(l)},1e3)}catch(s){var i;null==l||null==(i=l.restore)||i.call(l);let e=401===s.status,t=402===s.status;if(s instanceof c.L&&"rate_limited"===s.type)return void n.toast.error("We are currently under heavy load, please try again later.");if(e)return;if(t){r.Ay.capture("out_of_credits_dialog_opened"),S();return}(0,m.Ni)(s),p.logging.error("Create project error",s);return}},[k,g,f,j,b,t,w,s,_,C,S,v,A,y,N])}}},54351:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(77145),l=s(95661),r=s(67539),i=s(19620),n=s(73923),o=s(1778),d=s.n(o);let c=e=>{let{value:t,onChange:s,className:o}=e,c=(0,l.useMemo)(()=>n.y.filter(e=>!e.experimental),[!1]);return(0,l.useEffect)(()=>{c.find(e=>e.id===t)||s(c[0].id)},[c,s,t]),(0,a.jsx)("div",{className:o,children:(0,a.jsxs)(r.l6,{required:!0,value:t,onValueChange:e=>{if(i.logging.info("_value",{value:e}),"custom"===e)return void window.open("https://antonosika.typeform.com/to/KbocJ7pz","_blank");s(e)},children:[(0,a.jsx)(r.bq,{className:"h-15 max-w-full ".concat(d().button),id:"tech-stack-selector-trigger",children:(0,a.jsx)(r.yv,{placeholder:"Select a Tech Stack"})}),(0,a.jsx)(r.gC,{className:"max-w-xs sm:max-w-[600px] md:max-w-3xl",children:(0,a.jsxs)(r.s3,{children:[(0,a.jsx)(r.TR,{children:"Tech Stacks"}),c.map(e=>(0,a.jsx)(r.eb,{value:e.id,className:"group",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500 group-hover:text-primary",children:e.description})]})},e.id))]})})]})})}},55365:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var a=s(77145),l=s(30849),r=s(27458),i=s(73923);let n=e=>{let{id:t}=e,s=i.Z.find(e=>e.id===t),n=null;return("shadcnui"===t&&(n="ShadcnLogo"),n)?(0,a.jsx)(r.gu,{name:n,className:"h-10 w-10"}):(0,a.jsx)(l.default,{src:"/img/technologies/".concat(t,".").concat({chakraui:"png"}[t]||"svg"),alt:"".concat(t," logo"),width:40,height:40,title:null==s?void 0:s.name,style:"shadcnui"===t?{filter:"invert(100%)"}:"nextjs"===t?{border:"1px solid white",borderRadius:"50%"}:{}})}},58504:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(13410),l=s(92912),r=s(95661),i=s(95018),n=s(62548);let o=e=>{let{effectivePrompt:t,autoSubmit:s,builderToken:o,workspaceId:d,isLoadingWorkspaces:c,images:m,hashPromptData:u,createProject:p,cleanupHashPrompt:x}=e,h=(0,a.useRouter)(),[g,f]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[v,A]=(0,r.useState)(!1),w=(0,r.useRef)(!1),y=(0,r.useCallback)(e=>{A(!0),f(!1)},[]),N=(0,r.useCallback)(e=>{f(e),e||v||(x(),h.replace("/"))},[v,x,h]);return(0,r.useEffect)(()=>{if(!w.current){if(o&&d){w.current=!0;let e=(0,i.A)();p({body:{message:"Build a pixel perfect UI clone of this Figma design!",builder_token:o,id:e}}),l.Ay.capture("builder_io_figma_import_request_sent",{project_id:e})}else if(t&&"true"===s&&!c)if(j){if(v&&d){w.current=!0,A(!1);let e=m.map(e=>({file_id:e.existingFileId||e.id,file_name:e.name,type:n.g.USER_UPLOAD}));p({body:{message:t,id:(0,i.A)(),files:e,optimisticImageUrls:m.map(e=>e.url),from_hash_fragment:!!((null==u?void 0:u.images)||(null==u?void 0:u.files))}})}}else b(!0),f(!0)}},[p,t,s,o,d,c,j,v,null==u?void 0:u.images,null==u?void 0:u.files,m]),{showWorkspaceDialog:g,setShowWorkspaceDialog:f,hasShownWorkspaceDialog:j,pendingAutoSubmit:v,onWorkspaceSelect:y,handleWorkspaceDialogOpenChange:N}}},65758:(e,t,s)=>{"use strict";s.d(t,{Bj:()=>r,C9:()=>o,Fj:()=>n,t:()=>i});var a=s(19620);let l="lovable_hash_prompt_";function r(e){try{let t=localStorage.getItem(l+e);if(!t)return null;let s=JSON.parse(t);if(Date.now()-s.timestamp>36e5)return i(e),null;return s}catch(t){return a.logging.error("Failed to retrieve or parse hash prompt for key: ".concat(e),{error:t}),i(e),null}}function i(e){try{localStorage.removeItem(l+e)}catch(e){a.logging.error("Failed to cleanup hash prompt from localStorage",{error:e})}}function n(){try{let e=Object.keys(localStorage),t=Date.now();e.forEach(e=>{if(e.startsWith(l))try{let s=localStorage.getItem(e);if(s){let a=JSON.parse(s);t-a.timestamp>36e5&&localStorage.removeItem(e)}}catch(t){a.logging.error("Failed to process expired hash prompt",{key:e,error:t}),localStorage.removeItem(e)}})}catch(e){a.logging.error("Failed to cleanup expired hash prompts from localStorage",{error:e})}}function o(){let e=window.location.hash.substring(1);if(!e)return null;try{let t=new URLSearchParams(e),s=t.get("prompt");if(s){let e;if(s.length>5e4)return a.logging.error("HashPromptStorage: Prompt exceeds maximum length",{promptLength:s.length,maxLength:5e4}),null;let r=t.getAll("file_id"),i=t.getAll("file_name"),n=t.getAll("mime_type"),o=t.getAll("user_id");r.length>0&&r.length===i.length&&r.length===n.length&&r.length===o.length&&(e=r.map((e,t)=>({fileId:e,fileName:i[t],mimeType:n[t],userId:o[t]})));let d=t.getAll("images"),c=function(e,t,s){if(e.length>5e4)throw Error("Prompt exceeds maximum length of ".concat(5e4," characters"));let r=crypto.randomUUID(),i={prompt:e,images:t,files:s,timestamp:Date.now()};try{return localStorage.setItem(l+r,JSON.stringify(i)),r}catch(e){throw a.logging.error("Failed to store prompt data in localStorage",{error:e}),Error("Failed to store prompt data")}}(s,d.length>0?d:void 0,e);return window.history.replaceState({},"",window.location.pathname+window.location.search),c}}catch(t){a.logging.error("Error processing hash fragment on load",{hash:e,error:t})}return null}},71549:(e,t,s)=>{"use strict";s.d(t,{T:()=>f});var a=s(77145),l=s(26294),r=s(47679),i=s(66328),n=s(82782),o=s(8711),d=s(69730),c=s(47226),m=s(26214),u=s(36062),p=s(39528),x=s(58914),h=s(35950);let g=e=>{let{connector:t}=e;return(0,a.jsxs)("div",{className:"flex w-full items-center gap-2 px-2 py-1",children:[(0,a.jsx)(i.G,{size:"sm",connector:t}),(0,a.jsx)("span",{className:"flex-1 text-sm",children:t.display_name})]})},f=e=>{let{workspace:t,selectedSupabaseProject:s,onSupabaseProjectSelect:i,hideSupabase:f,disabled:j}=e,b=(0,l.c3)("Connections"),{setSubTab:v}=(0,n.l)(),{openSettings:A}=(0,r.t)(),w=(0,m.D)(),{connectorsByStatus:y,isLoading:N}=(0,u.X)({workspaceId:t.id}),C=(0,x.i)(t),_=y.connected.filter(e=>e.is_enabled_for_workspace),S=_.length>0;return(0,a.jsxs)(o.lv,{children:[(0,a.jsxs)(o.nV,{children:[(0,a.jsx)(d.A,{name:"connections"}),(0,a.jsx)("p",{children:b("connections")})]}),(0,a.jsxs)(o.M5,{sideOffset:4,className:"min-w-64",children:[!f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h._,{workspaceId:t.id,selectedSupabaseProject:s,onSupabaseProjectSelect:i,disabled:j}),C&&(0,a.jsx)(o.mB,{})]}),N&&C&&(0,a.jsx)("div",{className:"flex flex-col gap-2",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 px-2",children:[(0,a.jsx)(c.E,{className:"h-5 w-5 shrink-0 rounded-md"})," ",(0,a.jsx)(c.E,{className:"h-5 w-full rounded-md"})]},t))}),S&&C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.lp,{className:"flex flex-col items-start gap-0.5 whitespace-normal text-sm text-foreground",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(d.A,{name:"bolt",size:"small"}),"Your MCP Servers"]})}),_.map(e=>{let t=e.integration_id||e.id;return(0,a.jsx)(o._2,{className:"cursor-pointer p-0",onClick:()=>{w(p.$6.INPUT_ACTION_MENU.MCP_SERVER_CLICKED),A("integrations"),setTimeout(()=>{v("mcp-server",e.id)},100)},children:(0,a.jsx)(g,{connector:e})},t)}),(0,a.jsx)(o.mB,{})]}),(0,a.jsxs)(o._2,{className:"cursor-pointer",onClick:()=>{w(p.$6.INPUT_ACTION_MENU.MANAGE_INTEGRATIONS_CLICKED),A("integrations")},children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-muted",children:(0,a.jsx)(d.A,{name:"plus_small",size:"small"})}),(0,a.jsx)("span",{className:"flex-1 text-sm",children:b("addConnections")}),(0,a.jsx)(d.A,{name:"arrow_up_right",size:"small",className:"text-muted-foreground"})]})]})]})}},73923:e=>{"use strict";e.exports=JSON.parse('{"y":[{"name":"shadcn/ui + typescript","id":"vite_react_shadcn_ts","experimental":false,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"shadcn/ui + typescript (minor)","id":"vite_react_shadcn_ts_20250728_minor","experimental":true,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"shadcn/ui + typescript (major)","id":"vite_react_shadcn_ts_20250728_major","experimental":true,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"Next.js","id":"nextjs","experimental":true,"description":"Build with Next.js, TypeScript, React, Tailwind","technologies":["nextjs","typescript","react","shadcnui","tailwind"]},{"name":"Custom Tech Stack","id":"custom","experimental":false,"description":"Use a customized tech stack","technologies":[]}],"Z":[{"id":"nextjs","name":"Next.js"},{"id":"nodejs","name":"Node.js"},{"id":"express","name":"Express.js"},{"id":"html","name":"HTML"},{"id":"css","name":"CSS"},{"id":"javascript","name":"JavaScript"},{"id":"typescript","name":"TypeScript"},{"id":"sqlite","name":"SQLite"},{"id":"supabase","name":"Supabase"},{"id":"vite","name":"Vite"},{"id":"cloudflare","name":"Cloudflare"},{"id":"react","name":"React"},{"id":"tailwind","name":"Tailwind"},{"id":"chakraui","name":"Chakra UI"},{"id":"daisyui","name":"Daisy UI"},{"id":"shadcnui","name":"shadcn/ui"},{"id":"typescript","name":"TypeScript"}]}')},89391:(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var a=s(77145),l=s(72632),r=s(56024);let i=e=>{let{plan:t,className:s}=e,{isInactivePlan:i,isFreePlan:n}=(0,l.cb)(t),o=(0,l._R)(t);return(0,a.jsx)("span",{className:(0,r.cn)("rounded-full px-2 py-px text-center text-[10px] font-medium uppercase transition-colors duration-150 ease-in-out",n||i?"bg-muted-active text-muted-foreground":"bg-brand-twilight-primary text-brand-twilight-primary-foreground",s),children:o})}},94602:(e,t,s)=>{"use strict";s.d(t,{s:()=>d});var a=s(77145),l=s(95661),r=s(52215),i=s(52811),n=s(69730),o=s(18221);let d=()=>{let{store:e}=(0,o.Xl)(),t=e(e=>e.message),[s,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{if(t){let e=(0,r.E)(t);d(e),e.length>0&&m(!1)}else d([])},[t]),0===s.length||c)?null:(0,a.jsx)("div",{className:"absolute -bottom-48 left-0 right-0 z-20 mb-4 flex w-full flex-col rounded-lg border border-orange-500/50 bg-orange-900 md:-bottom-40",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 py-2 pb-4 pl-3 pr-2",children:[(0,a.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,a.jsx)(n.A,{name:"info_circle",className:"mt-0.5 text-base text-orange-500","aria-label":"Warning"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Sensitive API key detected"}),(0,a.jsxs)("span",{className:"text-sm text-foreground",children:["API keys detected in your message. Create your project first, then connect Supabase to store API keys securely as secrets instead of including them in messages.",(0,a.jsx)("p",{className:"mt-2",children:(0,a.jsx)(i.$,{variant:"link",size:"sm",asChild:!0,className:"pl-0",children:(0,a.jsxs)("a",{href:"https://docs.lovable.dev/features/security",target:"_blank",rel:"noreferrer",children:[(0,a.jsx)(n.A,{name:"question_circle",className:"h-4 w-4 text-foreground"}),(0,a.jsx)("span",{className:"text-xs text-foreground",children:"Learn more about security"}),(0,a.jsx)(n.A,{name:"arrow_up_right",className:"h-4 w-4 text-foreground"})]})})})]})]})]}),(0,a.jsx)("button",{type:"button",className:"flex h-7 w-7 items-center justify-center",onClick:()=>{m(!0)},children:(0,a.jsx)(n.A,{name:"x",className:"h-3 w-3 text-foreground"})})]})})}}}]);