try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="17638416719484a12ecf001"}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7627],{3140:(e,t,a)=>{a.d(t,{M:()=>g,s:()=>f});var n=a(77145),i=a(98251),r=a(13410),s=a(95661),o=a(19620),c=a(15822),l=a(40702);let d=null,u="30uiF44drV1UnRmUEUVhfQ2L500",p="https://rs.lovable.dev",h=u&&p;u&&p||o.logging.info("Missing NEXT_PUBLIC_RUDDERSTACK_WRITE_KEY or NEXT_PUBLIC_RUDDERSTACK_DATA_PLANE_URL in env; RudderStack will be disabled");let m=(0,s.createContext)(null);function f(e){let{children:t}=e,[a]=(0,s.useState)(()=>!h||c.W?null:(d||(o.logging.log("Initializing RudderStack Analytics"),(d=new i.p).load(u,p,{integrations:{All:!0},configUrl:"https://rs.lovable.dev/sourceConfig",destSDKBaseURL:"https://rs.lovable.dev/v3/modern/js-integrations"})),d)),{authUser:f}=(0,l.Z2)(),g=(0,l.Nm)(),A=(0,r.usePathname)();return(0,s.useEffect)(()=>{a&&((null==f?void 0:f.uid)?(o.logging.debug("RudderStack: Identifying user",{userId:f.uid}),a.identify(f.uid,{email:g,name:f.displayName})):(o.logging.debug("RudderStack: Resetting user session"),a.reset()))},[null==f?void 0:f.uid,g,null==f?void 0:f.displayName,a]),(0,s.useEffect)(()=>{a&&a.page()},[A,a]),(0,n.jsx)(m.Provider,{value:a,children:t})}function g(){return(0,s.useContext)(m)}},6895:(e,t,a)=>{a.d(t,{kA:()=>g,tY:()=>h,xS:()=>m,z_:()=>f});var n=a(77145),i=a(92912),r=a(95661),s=a(21016),o=a(83473),c=a(56024),l=a(56780),d=a(52811),u=a(69730),p=a(58295);let h=e=>{let{file:t,onClick:a,onRemove:i,onReference:o,isReferenced:h,className:m,showRemoveButton:f=!0,showReferenceButton:g=!1}=e,[A,y]=(0,r.useState)(!1),v=(0,s.A)("md"),w=t.name.split("/").pop()||t.name,k=(0,l.u)(t.name)&&!A;return(0,n.jsx)("div",{className:(0,c.cn)("group/file-card relative h-full w-full shrink-0",m),children:(0,n.jsxs)("div",{className:"relative h-full w-full cursor-pointer",onClick:a,"aria-label":w,children:[k?(0,n.jsx)("div",{className:"h-full w-full",children:(0,n.jsx)("img",{src:t.url,alt:w,className:"h-full w-full rounded-lg border object-cover",onError:()=>y(!0)})}):(0,n.jsxs)("div",{className:"flex h-full w-full flex-row items-center justify-center gap-1 rounded-xl border bg-background/50 p-2 px-2 backdrop-blur-sm transition-all hover:bg-muted/50",children:[(0,n.jsx)("div",{className:"flex items-center justify-center p-1",children:(0,n.jsx)(u.A,{name:(0,l.I3)(t.name),className:"h-8 w-8 flex-shrink-0 text-muted-foreground/70 md:h-7 md:w-7"})}),(0,n.jsxs)("div",{className:"w-full min-w-0 gap-1 text-left",children:[(0,n.jsx)("div",{className:"truncate text-sm font-medium leading-tight md:text-xs",title:w,children:w}),(0,n.jsx)("div",{className:"truncate text-[12px] leading-tight text-muted-foreground",children:(0,l.QC)(t.name)})]})]}),t.uploading&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg bg-background/90",children:(0,n.jsx)(u.A,{name:"progress_activity",size:"small",className:"animate-spin text-muted-foreground"})}),f&&i&&(0,n.jsxs)(p.m_,{instant:!0,children:[(0,n.jsx)(p.k$,{asChild:!0,children:(0,n.jsx)(d.$,{variant:"outline",className:(0,c.cn)("absolute -right-1 -top-1 z-[10000] flex h-6 w-6 items-center justify-center rounded-full p-0 opacity-0 group-hover/file-card:opacity-100",v&&"h-7 w-7 opacity-100"),onClick:e=>{e.stopPropagation(),i()},children:(0,n.jsx)(u.A,{name:"x_small",size:v?"default":"small"})})}),(0,n.jsxs)(p.ZI,{children:["Remove ",k?"image":"file"]})]}),g&&o&&(0,n.jsxs)(p.m_,{instant:!0,children:[(0,n.jsx)(p.k$,{asChild:!0,children:(0,n.jsx)(d.$,{variant:"outline",className:(0,c.cn)("absolute -right-1 -top-1 z-[10000] flex h-6 w-6 items-center justify-center rounded-full p-0 opacity-0 group-hover/file-card:opacity-100",v&&"h-7 w-7 opacity-100"),onClick:e=>{e.stopPropagation(),o()},disabled:h,children:(0,n.jsx)(u.A,{name:h?"check":"paperclip",size:"small"})})}),(0,n.jsx)(p.ZI,{children:"Reference"})]})]})})},m=e=>{let{file:t,isOpen:a,onClose:i,onDownload:s,onCopy:o,copied:p,fileContent:h,isLoading:m,isBinary:f,isTooLarge:g,fileSizeInMB:A}=e,y=t.name.split("/").pop()||t.name,v=(0,l.u)(t.name);return((0,r.useEffect)(()=>{if(!a)return;let e=e=>{"Escape"===e.key&&i()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,i]),a)?(0,n.jsx)("div",{className:"fixed inset-0 z-[10001] flex items-center justify-center bg-black/70",onClick:i,children:(0,n.jsxs)("div",{className:"relative max-h-[85vh] w-[90vw] max-w-4xl rounded-xl bg-background p-6 shadow-modal",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"mb-4 flex w-full justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex w-full min-w-0 flex-col",children:[(0,n.jsx)("h2",{className:"w-full truncate text-lg font-medium",children:y}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:v?"Image":(0,l.QC)(t.name)})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,n.jsx)(d.$,{variant:"outline",onClick:s,children:"Download File"}),o&&v&&(0,n.jsx)(d.$,{variant:"outline",onClick:o,disabled:p,children:p?"Copied!":"Copy"}),(0,n.jsx)(d.$,{variant:"ghost",size:"icon-sm",onClick:i,children:(0,n.jsx)(u.A,{name:"x"})})]})]}),(0,n.jsx)("div",{className:(0,c.cn)("h-[calc(85vh-8rem)]",!v&&"overflow-auto"),children:m?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)(u.A,{name:"progress_activity",className:"h-6 w-6 animate-spin"})}):v?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("img",{src:t.url,alt:y,className:"max-h-full max-w-full rounded-lg object-contain"})}):g?(0,n.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,n.jsx)(u.A,{name:(0,l.I3)(t.name),className:"mb-4 h-16 w-16 text-muted-foreground/70"}),(0,n.jsx)("p",{className:"text-lg font-medium",children:"Large File Upload"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Cannot display files over 1 MB, but file is ready to use"})]}):f?(0,n.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,n.jsx)(u.A,{name:(0,l.I3)(t.name),className:"mb-4 h-16 w-16 text-muted-foreground/70"}),(0,n.jsx)("p",{className:"text-lg font-medium",children:"Preview Unavailable"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Cannot display preview, but file is ready to use"})]}):null!==h?(0,n.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-muted p-4 text-sm",children:(0,n.jsx)("code",{children:h})}):null})]})}):null},f=e=>{let[t,a]=(0,r.useState)(!1),n=(0,r.useCallback)(async()=>{if(e&&!t)try{let t=await fetch(e);if(!t.ok&&304!==t.status)throw Error("HTTP error! status: ".concat(t.status));let n=await t.blob();try{await navigator.clipboard.write([new ClipboardItem({[n.type]:n})])}catch(e){if("image/png"!==n.type&&"image/svg+xml"!==n.type){let e=new Image,t=URL.createObjectURL(n);try{await new Promise((a,n)=>{e.onload=a,e.onerror=n,e.src=t});let a=document.createElement("canvas");a.width=e.width,a.height=e.height;let n=a.getContext("2d");if(!n)throw Error("Failed to get canvas context");n.fillStyle="white",n.fillRect(0,0,a.width,a.height),n.drawImage(e,0,0);let i=await new Promise((e,t)=>{a.toBlob(a=>{a?e(a):t(Error("Failed to convert image to PNG"))},"image/png",1)});await navigator.clipboard.write([new ClipboardItem({"image/png":i})])}finally{URL.revokeObjectURL(t)}}else throw e}a(!0),i.Ay.capture("project:chat:image_copied",{image_type:n.type,image_size:n.size}),setTimeout(()=>{a(!1)},2e3)}catch(e){(0,o.Ni)("Failed to copy image")}},[e,t]);return{copied:t,handleCopy:n}},g=(e,t)=>(0,r.useCallback)(async()=>{if(e)try{let a=await fetch(e),n=await a.blob(),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),i.Ay.capture("project:chat:file_downloaded",{file_name:t,file_type:(0,l.QC)(t)})}catch(e){(0,o.Ni)("Failed to download file")}},[e,t])},8719:(e,t,a)=>{a.d(t,{d:()=>c});var n=a(77145),i=a(95661),r=a(18221),s=a(56780),o=a(6895);let c=e=>{let{children:t}=e,a=(0,r.Uw)(e=>e.images),s=(0,r.Uw)(e=>e.setImages),o=(0,i.useCallback)(e=>{s(t=>t.filter(t=>t.url!==e))},[s]);return 0!==a.length||t?(0,n.jsxs)("div",{className:"-mt-1 flex flex-1 flex-nowrap gap-2 overflow-x-auto pt-1",children:[t,a.map(e=>(0,n.jsx)(l,{image:e,removeImage:o},e.url))]}):null},l=e=>{let{image:t,removeImage:a}=e,[r,c]=(0,i.useState)(!1),[l,d]=(0,i.useState)(null),[u,p]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[A,y]=(0,i.useState)(""),v={url:t.url,name:t.name,uploading:t.uploading},{copied:w,handleCopy:k}=(0,o.z_)(t.url),x=(0,o.kA)(t.url,t.name),b=(0,i.useCallback)(async()=>{c(!0),(0,s.u)(t.name)||l||u||await I()},[t.name,l,u]),I=(0,i.useCallback)(async()=>{if(!(0,s.u)(t.name)){p(!0);try{let e=await fetch(t.url),a=await e.blob(),n=(a.size/1048576).toFixed(2);y(n);let i=await a.slice(0,4096).arrayBuffer(),r=new Uint8Array(i),s=0;for(let e=0;e<r.length;e++){let t=r[e];t<32&&9!==t&&10!==t&&13!==t&&s++}if(s/r.length>.05)d(null),m(!0),g(!1);else if(a.size>1048576)d(null),m(!1),g(!0);else{let e=await a.text();d(e),m(!1),g(!1)}}catch(e){d("Error loading file content"),m(!1),g(!1)}finally{p(!1)}}},[t.url,t.name]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.tY,{file:v,onClick:b,onRemove:()=>a(t.url),showRemoveButton:!0,showReferenceButton:!1,className:(0,s.u)(t.name)?"h-16 w-16 md:h-14 md:w-14":"h-16 w-48 md:h-14 md:w-48"}),(0,n.jsx)(o.xS,{file:v,isOpen:r,onClose:()=>c(!1),onDownload:x,onCopy:(0,s.u)(t.name)?k:void 0,copied:w,fileContent:l,isLoading:u,isBinary:h,isTooLarge:f,fileSizeInMB:A})]})}},15822:(e,t,a)=>{a.d(t,{W:()=>i});let n="undefined"!=typeof navigator,i=n&&!0===navigator.webdriver||n&&navigator.userAgent.includes("HeadlessChrome")},20064:(e,t,a)=>{a.d(t,{T:()=>l});var n=a(95661),i=a(3140),r=a(31088);let s=async e=>new Promise(t=>{let a=document.createElement("video");a.srcObject=new MediaStream([e]),a.play(),a.onloadeddata=async()=>{t(await c(a))}}),o=async e=>{let t=new ImageCapture(e),a=await t.grabFrame();return await c(a,()=>{a.close()})},c=async(e,t)=>{let a=document.createElement("canvas");e instanceof ImageBitmap?(a.width=e.width,a.height=e.height):(a.width=e.videoWidth,a.height=e.videoHeight);let n=a.getContext("2d");if(!n)return r.toast.error("Failed to capture screen"),null;n.drawImage(e,0,0);let i=await new Promise(e=>{a.toBlob(t=>e(t),"image/png")});if(!i)return r.toast.error("Failed to capture screen"),null;t&&t();let s=new Date().toISOString().replace(/[:.]/g,"-");return new File([i],"screenshot-".concat(s,".png"),{type:"image/png"})},l=(e,t)=>{let a=(0,i.M)(),{captureScreenshot:c}={captureScreenshot:async()=>{let e=null;try{let t;if(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)return r.toast.error("Screen capture not supported",{description:"Your browser doesn't support screen capture."}),null;let a=navigator.userAgent.toLowerCase().includes("firefox"),n=window,i=!a&&"CaptureController"in window&&"setFocusBehavior"in window.CaptureController.prototype;i&&(t=new CaptureController).setFocusBehavior("focus-capturing-application");let c=(e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1,...a?{}:{selfBrowserSurface:"include"},...t?{controller:t}:{}})).getVideoTracks()[0];if(!c)return r.toast.error("Failed to capture screen"),null;if(a){let t=await s(c);return e.getTracks().forEach(e=>e.stop()),t}{let t=await o(c);return e.getTracks().forEach(e=>e.stop()),i||n.focus(),t}}catch(e){if(e instanceof Error){if("NotAllowedError"===e.name||"AbortError"===e.name)return null;r.toast.error("Failed to capture screen",{description:e.message})}return null}finally{null==e||e.getTracks().forEach(e=>e.stop())}}};return{handleScreenCapture:(0,n.useCallback)(async()=>{let n=await c();n&&(e([n]),null==a||a.track(t,{},{integrations:{All:!1,POSTHOG:!0}}))},[c,e,a,t])}}},36062:(e,t,a)=>{a.d(t,{X:()=>r});var n=a(18502),i=a(84068);function r(e){var t;let{workspaceId:a,status:r,includeDisabled:o=!1}=e,{data:c,isLoading:l,refetch:d}=(0,n.I)(i.L.workspaceConnectors({workspaceId:a,status:r,includeDisabled:o})),u=(null==c?void 0:c.connectors)||[],p=null!=(t=null==c?void 0:c.customEnabled)&&t,h={connected:[],available:[],disabled:[]};u.forEach(e=>{h[e.status].push(e)}),h.connected.sort((e,t)=>e.display_name.localeCompare(t.display_name)),h.available.sort(s);let m=new Map(u.map(e=>[e.id,e]));return{connectors:u,connectorsByStatus:h,connectorMap:m,customEnabled:p,isLoading:l,refetch:d}}let s=(e,t)=>Number(t.launched)-Number(e.launched)||e.display_name.localeCompare(t.display_name)},44081:(e,t,a)=>{a.d(t,{f:()=>w});var n=a(77145),i=a(6698),r=a(13410),s=a(26294),o=a(92912),c=a(95661),l=a(31088),d=a(83220),u=a(56315),p=a(83473),h=a(63851),m=a(39528),f=a(18221),g=a(56024),A=a(52811),y=a(19695),v=a(69730);let w=e=>{let{className:t,size:a="small",disabled:w=!1}=e,k=(0,d.j4)(e=>e.currentWorkspace),x=(0,r.useRouter)(),b=(0,r.usePathname)(),I=(0,s.c3)("ChatVoiceButton"),{store:_}=(0,f.Xl)(),P=_(e=>e.setMessage),S=_(e=>e.message),[z,j]=(0,c.useState)(!1),[C,T]=(0,c.useState)(!1),[N,Z]=(0,c.useState)(0),{mutate:E,isPending:R}=(0,i.n)({mutationFn:async e=>{let{audioBlob:t}=e,a=new FormData;a.append("audio",t,"recording.webm");let n=(0,h.P)(),i=await n.getApi(),r=await i.postMultipart("/user/speech-to-text",a);return o.Ay.capture(m.$6.CHAT.VOICE_INPUT_STOPPED,{transcribed_text_length:r.text.length}),r},onSuccess:e=>{let{text:t}=e;t&&P("".concat(S?"".concat(S," "):"").concat(t))},onError:e=>{(0,p.Ni)(e)}}),K=(0,c.useRef)(null),D=(0,c.useRef)([]),F=(0,c.useRef)(null),L=(0,c.useRef)(null),G=(0,c.useRef)(null),U=(0,c.useRef)(null);(0,c.useEffect)(()=>{var e;T("undefined"!=typeof MediaRecorder&&!!(null==(e=navigator.mediaDevices)?void 0:e.getUserMedia))},[]);let B=(0,c.useCallback)(()=>{if(!L.current)return;let e=L.current.frequencyBinCount,t=new Uint8Array(e);L.current.getByteTimeDomainData(t);let a=0;for(let n=0;n<e;n++){let e=(t[n]-128)/128;a+=e*e}Z(Math.min(5*Math.sqrt(a/e),1)),G.current=requestAnimationFrame(B)},[]),M=(0,c.useCallback)(async()=>{if(C&&!w&&!z)try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});U.current=e;let t=new(window.AudioContext||window.webkitAudioContext);"suspended"===t.state&&await t.resume();let a=t.createAnalyser();a.fftSize=2048,a.smoothingTimeConstant=.3,t.createMediaStreamSource(e).connect(a),F.current=t,L.current=a;let n=new MediaRecorder(e);K.current=n,D.current=[],n.ondataavailable=e=>{e.data.size>0&&D.current.push(e.data)},n.onstop=async()=>{j(!1);let e=new Blob(D.current,{type:"audio/webm"});E({audioBlob:e})},n.start(),j(!0),B()}catch(e){l.toast.error("Failed to access microphone. Please check permissions.")}},[C,w,z,B,E]),O=(0,c.useCallback)(()=>{K.current&&z&&K.current.stop(),U.current&&(U.current.getTracks().forEach(e=>e.stop()),U.current=null),F.current&&(F.current.close(),F.current=null),G.current&&(cancelAnimationFrame(G.current),G.current=null),Z(0)},[z]),W=(0,c.useCallback)(()=>{if(!k)return void x.push("/signup?redirect=".concat(b));z?O():M()},[z,M,O,k,b,x]);(0,c.useEffect)(()=>()=>{O()},[]);let H=z||R,q=(0,n.jsxs)(A.$,{type:"button",variant:"outline",className:(0,g.cn)("relative z-10 flex rounded-full p-0 text-muted-foreground transition-opacity duration-150 disabled:cursor-not-allowed disabled:opacity-50",t,"items-center justify-center",H&&"border-none bg-muted","large"===a&&"h-10 w-10 md:h-8 md:w-8","small"===a&&"h-6 w-6"),disabled:w||!C||R,onClick:W,children:[z&&(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary",style:{transform:"scale(".concat(N/5+1,")")}}),R&&(0,n.jsx)("div",{className:"absolute inset-0 animate-pulse rounded-full bg-primary"}),(0,n.jsx)(v.A,{name:H?"stop_circle":"audio_lines",className:(0,g.cn)("relative z-10","large"===a&&"h-5 w-5","small"===a&&"h-3.5 w-3.5",H&&"text-primary-foreground")})]}),$=(0,n.jsxs)(u.y,{onClick:W,className:"relative z-10",children:[z&&(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary",style:{transform:"scale(".concat(N/5+1,")")}}),R&&(0,n.jsx)("div",{className:"absolute inset-0 animate-pulse rounded-full bg-primary"}),(0,n.jsx)(v.A,{name:H?"stop_circle":"audio_lines",className:(0,g.cn)("relative z-10","large"===a&&"h-5 w-5","small"===a&&"h-3.5 w-3.5",H&&"text-primary-foreground")})]}),V=C?R?"Processing audio...":void 0:I("notSupported");return(0,n.jsx)(y.Q,{showTooltip:!!V,tooltipContent:V,children:"mobile"===a?$:q})}},48891:(e,t,a)=>{a.d(t,{V:()=>r});var n=a(77145),i=a(56024);function r(e){let{children:t,className:a,onSubmit:r}=e;return(0,n.jsx)("form",{id:"chat-input",onSubmit:e=>{e.preventDefault(),r()},className:(0,i.cn)("group flex flex-col gap-2 rounded-3xl border border-muted-border bg-muted p-3 transition-colors duration-150 ease-in-out",a),children:t})}},52215:(e,t,a)=>{a.d(t,{E:()=>i,u:()=>r});let n=[{name:"OpenAI API Key",pattern:/sk-[a-zA-Z0-9]{48}/,description:"OpenAI API keys start with 'sk-'",confidence:"high"},{name:"OpenAI API Key (New Format)",pattern:/sk-[A-Za-z0-9]{20}T3BlbkFJ[A-Za-z0-9]{20}/,description:"OpenAI API keys with T3BlbkFJ pattern",confidence:"high"},{name:"OpenAI Project API Key",pattern:/sk-proj-[A-Za-z0-9\-_]{20,}/,description:"OpenAI project-specific API keys",confidence:"high"},{name:"Anthropic API Key",pattern:/sk-ant-[a-zA-Z0-9]+/,description:"Anthropic API keys start with 'sk-ant-'",confidence:"high"},{name:"AWS Access Key ID",pattern:/AKIA[0-9A-Z]{16}/,description:"AWS Access Key IDs start with 'AKIA'",confidence:"high"},{name:"AWS Access Key ID (Extended)",pattern:/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/,description:"AWS Access Key IDs with various prefixes",confidence:"high"},{name:"AWS Secret Access Key",pattern:/[a-zA-Z0-9\/\+]{40}/,description:"AWS Secret Access Keys are 40 characters long",confidence:"medium"},{name:"AWS Secret Access Key (Context)",pattern:/aws(.{0,20})?['"][0-9a-zA-Z\/+]{40}['"]/i,description:"AWS Secret Access Keys with context",confidence:"high"},{name:"AWS MWS Token",pattern:/amzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/,description:"Amazon MWS Auth Token",confidence:"high"},{name:"GitHub Personal Access Token",pattern:/ghp_[a-zA-Z0-9]{36}/,description:"GitHub personal access tokens start with 'ghp_'",confidence:"high"},{name:"GitHub OAuth Access Token",pattern:/gho_[a-zA-Z0-9]{36}/,description:"GitHub OAuth tokens start with 'gho_'",confidence:"high"},{name:"GitHub User Access Token",pattern:/ghu_[a-zA-Z0-9]{36}/,description:"GitHub user access tokens start with 'ghu_'",confidence:"high"},{name:"GitHub App Installation Access Token",pattern:/ghs_[a-zA-Z0-9]{36}/,description:"GitHub App tokens start with 'ghs_'",confidence:"high"},{name:"GitHub Refresh Token",pattern:/ghr_[a-zA-Z0-9]{36}/,description:"GitHub refresh tokens start with 'ghr_'",confidence:"high"},{name:"GitHub Fine-grained Personal Access Token",pattern:/github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59}/,description:"GitHub fine-grained PATs start with 'github_pat_'",confidence:"high"},{name:"Google API Key",pattern:/AIza[0-9A-Za-z\-_]{35}/,description:"Google API keys start with 'AIza'",confidence:"medium"},{name:"Google OAuth Access Token",pattern:/ya29\.[0-9A-Za-z\-_]+/,description:"Google OAuth access tokens start with 'ya29.'",confidence:"high"},{name:"Google OAuth Client ID",pattern:/[0-9]+-[0-9A-Za-z_]{32}\.apps\.googleusercontent\.com/,description:"Google OAuth client IDs",confidence:"high"},{name:"Google Service Account",pattern:/"type":\s*"service_account"/,description:"Google service account JSON key file",confidence:"high"},{name:"Firebase URL",pattern:/.*firebaseio\.com/,description:"Firebase database URLs",confidence:"medium"},{name:"Stripe Live API Key",pattern:/sk_live_[0-9a-zA-Z]{24,}/,description:"Stripe live API keys start with 'sk_live_'",confidence:"high"},{name:"Stripe Test API Key",pattern:/sk_test_[0-9a-zA-Z]{24,}/,description:"Stripe test API keys start with 'sk_test_'",confidence:"high"},{name:"Stripe Restricted API Key",pattern:/rk_live_[0-9a-zA-Z]{24,}/,description:"Stripe restricted API keys start with 'rk_live_'",confidence:"high"},{name:"Square Access Token",pattern:/sq0atp-[0-9A-Za-z\-_]{22}/,description:"Square access tokens start with 'sq0atp-'",confidence:"high"},{name:"Square OAuth Secret",pattern:/sq0csp-[0-9A-Za-z\-_]{43}/,description:"Square OAuth secrets start with 'sq0csp-'",confidence:"high"},{name:"Square Application ID",pattern:/sq0i[a-z]{2}-[0-9A-Za-z\-_]{22,43}/,description:"Square application IDs",confidence:"high"},{name:"SendGrid API Key",pattern:/SG\.[a-zA-Z0-9]{22}\.[a-zA-Z0-9]{43}/,description:"SendGrid API keys start with 'SG.'",confidence:"high"},{name:"Twilio Account SID",pattern:/AC[a-z0-9]{32}/,description:"Twilio Account SIDs start with 'AC'",confidence:"high"},{name:"Twilio Auth Token",pattern:/SK[a-z0-9A-F]{32}/,description:"Twilio Auth tokens start with 'SK'",confidence:"high"},{name:"Slack Token",pattern:/xox[baprs]-[0-9]{10,13}-[0-9]{10,13}-[a-zA-Z0-9]{24,34}/,description:"Slack tokens start with 'xoxb-', 'xoxa-', 'xoxp-', 'xoxr-', or 'xoxs-'",confidence:"high"},{name:"Slack Extended Token",pattern:/xoxe\.xoxp-1-[0-9a-zA-Z]{166}/,description:"Slack extended tokens",confidence:"high"},{name:"Slack Workspace Token",pattern:/xoxe-1-[0-9a-zA-Z]{147}/,description:"Slack workspace tokens",confidence:"high"},{name:"Slack Webhook",pattern:/https:\/\/hooks\.slack\.com\/services\/T[a-zA-Z0-9_]{8}\/B[a-zA-Z0-9_]{8}\/[a-zA-Z0-9_]{24}/,description:"Slack webhook URLs",confidence:"high"},{name:"Discord Bot Token",pattern:/[MN][a-zA-Z0-9]{23}\.[a-zA-Z0-9]{6}\.[a-zA-Z0-9_-]{27}/,description:"Discord bot tokens have a specific format",confidence:"high"},{name:"NPM Access Token",pattern:/npm_[a-zA-Z0-9]{36}/,description:"NPM access tokens start with 'npm_'",confidence:"high"},{name:"Facebook Access Token",pattern:/EAACEdEose0cBA[0-9A-Za-z]+/,description:"Facebook access tokens",confidence:"high"},{name:"Facebook OAuth",pattern:/[f|F][a|A][c|C][e|E][b|B][o|O][o|O][k|K].*['"][0-9a-f]{32}['"]/,description:"Facebook OAuth tokens",confidence:"high"},{name:"Twitter Access Token",pattern:/[t|T][w|W][i|I][t|T][t|T][e|E][r|R].*[1-9][0-9]+-[0-9a-zA-Z]{40}/,description:"Twitter access tokens",confidence:"high"},{name:"Twitter OAuth",pattern:/[t|T][w|W][i|I][t|T][t|T][e|E][r|R].*['"][0-9a-zA-Z]{35,44}['"]/,description:"Twitter OAuth tokens",confidence:"high"},{name:"Heroku API Key",pattern:/[h|H][e|E][r|R][o|O][k|K][u|U].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/,description:"Heroku API keys",confidence:"high"},{name:"MailChimp API Key",pattern:/[0-9a-f]{32}-us[0-9]{1,2}/,description:"MailChimp API keys",confidence:"high"},{name:"Mailgun API Key",pattern:/key-[0-9a-zA-Z]{32}/,description:"Mailgun API keys start with 'key-'",confidence:"high"},{name:"PayPal Braintree Access Token",pattern:/access_token\$production\$[0-9a-z]{16}\$[0-9a-f]{32}/,description:"PayPal Braintree access tokens",confidence:"high"},{name:"Cloudinary URL",pattern:/cloudinary:\/\/.*/,description:"Cloudinary configuration URLs",confidence:"high"},{name:"WakaTime API Key",pattern:/waka_[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/,description:"WakaTime API keys",confidence:"high"},{name:"Picatic API Key",pattern:/sk_live_[0-9a-z]{32}/,description:"Picatic API keys (similar to Stripe format)",confidence:"medium"},{name:"JWT Token",pattern:/eyJ[A-Za-z0-9_\/+-]*\.[A-Za-z0-9_\/+-]*\.[A-Za-z0-9_\/+-]*/,description:"JSON Web Tokens (JWT)",confidence:"medium"},{name:"RSA Private Key",pattern:/-----BEGIN RSA PRIVATE KEY-----/,description:"RSA private key headers",confidence:"high"},{name:"DSA Private Key",pattern:/-----BEGIN DSA PRIVATE KEY-----/,description:"DSA private key headers",confidence:"high"},{name:"EC Private Key",pattern:/-----BEGIN EC PRIVATE KEY-----/,description:"Elliptic Curve private key headers",confidence:"high"},{name:"PGP Private Key",pattern:/-----BEGIN PGP PRIVATE KEY BLOCK-----/,description:"PGP private key blocks",confidence:"high"},{name:"Database Password in URL",pattern:/[a-zA-Z]{3,10}:\/\/[^\/\s:@]{3,20}:[^\/\s:@]{3,20}@.{1,100}["'\s]/,description:"Database connection strings with embedded passwords",confidence:"high"},{name:"Generic API Key",pattern:/(api[_-]?key|apikey)(.{0,20})?['"][0-9a-zA-Z]{32,45}['"]/i,description:"Generic API key pattern with quotes",confidence:"medium"},{name:"Generic Secret Key",pattern:/(secret[_-]?key|client[_-]?secret|private[_-]?key|service[_-]?role[_-]?key|password|auth[_-]?token)[\s:=]+['"]?([a-zA-Z0-9_\-\.\/\+=]{20,})['"]?/i,description:"Generic secret key pattern",confidence:"medium"},{name:"Generic Token",pattern:/token[_-]?[a-z0-9]*['"]?\s*[:=]\s*['"]?[a-zA-Z0-9_\-\.\/\+=]{10,}['"]?/i,description:"Generic token pattern",confidence:"low"},{name:"High Entropy String",pattern:/['"][a-zA-Z0-9\/\+]{40,}['"](?:\s*[,;]|\s*$)/,description:"High entropy strings that might be secrets",confidence:"low"},{name:"Linear API Key",pattern:/lin_api_[a-zA-Z0-9]{40}/,description:"Linear personal API keys start with 'lin_api_'",confidence:"high"},{name:"Render API Key",pattern:/rnd_[a-zA-Z0-9]{32}/,description:"Render API keys start with 'rnd_'",confidence:"high"},{name:"Fly.io API Token",pattern:/fo1_[a-zA-Z0-9]{43}/,description:"Fly.io personal access tokens start with 'fo1_'",confidence:"high"},{name:"Groq API Key",pattern:/gsk_[a-zA-Z0-9]{52}/,description:"Groq API keys start with 'gsk_'",confidence:"high"},{name:"Cohere API Key",pattern:/[a-zA-Z0-9]{40}-[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}/,description:"Cohere API keys have specific format with dashes",confidence:"high"},{name:"Mistral AI API Key",pattern:/[a-zA-Z0-9]{32}/,description:"Mistral AI API keys are 32 character strings",confidence:"low"},{name:"Perplexity API Key",pattern:/pplx-[a-f0-9]{64}/,description:"Perplexity API keys start with 'pplx-'",confidence:"high"},{name:"DeepSeek API Key",pattern:/sk-[a-f0-9]{48}/,description:"DeepSeek API keys start with 'sk-' and are 48 hex chars",confidence:"medium"},{name:"xAI API Key",pattern:/xai-[a-zA-Z0-9]{64}/,description:"xAI API keys start with 'xai-'",confidence:"high"},{name:"Hugging Face User Access Token",pattern:/hf_[a-zA-Z0-9]{37}/,description:"Hugging Face user access tokens start with 'hf_'",confidence:"high"},{name:"Pinecone API Key",pattern:/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/,description:"Pinecone API keys are UUID format",confidence:"medium"},{name:"MongoDB Atlas API Key",pattern:/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/,description:"MongoDB Atlas API keys are UUID format",confidence:"medium"},{name:"Redis Cloud API Key",pattern:/redis-cloud-[a-zA-Z0-9]{32}/,description:"Redis Cloud API keys start with 'redis-cloud-'",confidence:"high"},{name:"Shopify Private App Token",pattern:/shppa_[a-f0-9]{64}/,description:"Shopify private app tokens start with 'shppa_'",confidence:"high"},{name:"Shopify Custom App Token",pattern:/shpca_[a-f0-9]{64}/,description:"Shopify custom app tokens start with 'shpca_'",confidence:"high"},{name:"Vercel API Token",pattern:/(vercel_|vc_)[a-zA-Z0-9]{24}/,description:"Vercel API tokens start with 'vercel_' or 'vc_'",confidence:"high"},{name:"PlanetScale Service Token",pattern:/pscale_tkn_[a-zA-Z0-9_-]{43}/,description:"PlanetScale service tokens start with 'pscale_tkn_'",confidence:"high"},{name:"PlanetScale OAuth Token",pattern:/pscale_oauth_[a-zA-Z0-9_-]{43}/,description:"PlanetScale OAuth tokens start with 'pscale_oauth_'",confidence:"high"},{name:"Azure Service Bus Connection String",pattern:/Endpoint=sb:\/\/[^;]+;SharedAccessKeyName=[^;]+;SharedAccessKey=[a-zA-Z0-9\/\+=]{44}/,description:"Azure Service Bus connection strings",confidence:"high"},{name:"Azure Storage Account Key",pattern:/[a-zA-Z0-9\/\+]{88}==/,description:"Azure Storage account keys are 88 chars base64 with ==",confidence:"medium"},{name:"Google Gemini API Key",pattern:/AIza[0-9A-Za-z\-_]{35}/,description:"Google Gemini API keys start with 'AIza' (same as Google API)",confidence:"medium"},{name:"Supabase Anon Key",pattern:/eyJ[A-Za-z0-9_\/+-]*\.eyJ[A-Za-z0-9_\/+-]*\."anon"[A-Za-z0-9_\/+-]*\.[A-Za-z0-9_\/+-]*/,description:"Supabase anon keys are JWTs with 'anon' role",confidence:"high"},{name:"Supabase Service Role Key",pattern:/eyJ[A-Za-z0-9_\/+-]*\.eyJ[A-Za-z0-9_\/+-]*\."service_role"[A-Za-z0-9_\/+-]*\.[A-Za-z0-9_\/+-]*/,description:"Supabase service role keys are JWTs with 'service_role'",confidence:"high"},{name:"Replicate API Token",pattern:/r8_[a-zA-Z0-9]{40}/,description:"Replicate API tokens start with 'r8_'",confidence:"high"},{name:"Tavily API Key",pattern:/tvly-[a-zA-Z0-9]{38}/,description:"Tavily API keys start with 'tvly-'",confidence:"high"},{name:"Langchain API Key",pattern:/lc_[a-zA-Z0-9]{50}/,description:"Langchain API keys start with 'lc_'",confidence:"high"},{name:"Assembly AI API Key",pattern:/[a-f0-9]{32}/,description:"Assembly AI API keys are 32 character hex strings",confidence:"low"},{name:"ElevenLabs API Key",pattern:/[a-f0-9]{32}/,description:"ElevenLabs API keys are 32 character hex strings",confidence:"low"},{name:"Stability AI API Key",pattern:/sk-[a-zA-Z0-9]{48}/,description:"Stability AI API keys start with 'sk-'",confidence:"medium"},{name:"Midjourney Bot Token",pattern:/[MN][a-zA-Z0-9]{23}\.[a-zA-Z0-9]{6}\.[a-zA-Z0-9_-]{27}/,description:"Midjourney uses Discord bot tokens",confidence:"high"},{name:"WeChat Work Webhook",pattern:/https:\/\/qyapi\.weixin\.qq\.com\/cgi-bin\/webhook\/send\?key=[a-zA-Z0-9\-]{36}/,description:"WeChat Work webhook URLs",confidence:"high"},{name:"Lark Bot Token",pattern:/t-[a-zA-Z0-9]{64}/,description:"Lark/Feishu bot tokens start with 't-'",confidence:"high"},{name:"Airtable Personal Access Token",pattern:/pat[a-zA-Z0-9]{14}\.[a-zA-Z0-9]{64}/,description:"Airtable personal access tokens start with 'pat'",confidence:"high"},{name:"Notion Integration Token",pattern:/secret_[a-zA-Z0-9]{43}/,description:"Notion integration tokens start with 'secret_'",confidence:"high"},{name:"Monday.com API Key",pattern:/[a-f0-9]{64}/,description:"Monday.com API keys are 64 character hex strings",confidence:"low"},{name:"Asana Personal Access Token",pattern:/1\/[0-9]{16}:[a-f0-9]{32}/,description:"Asana personal access tokens have specific format",confidence:"high"},{name:"Figma Personal Access Token",pattern:/figd_[a-zA-Z0-9\-_]{43}/,description:"Figma personal access tokens start with 'figd_'",confidence:"high"}];function i(e){let t=[];for(let a of n)if("high"===a.confidence){let n=e.match(RegExp(a.pattern.source,"g"));n&&n.length>0&&t.push(a)}return t}function r(e){return i(e).length>0}},53413:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(77145),i=a(56024);let r=e=>{let{children:t,className:a}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex items-center gap-1",a),children:t})}},56315:(e,t,a)=>{a.d(t,{y:()=>o});var n=a(77145),i=a(71148);a(95661);var r=a(52811);let s=i.P.create(r.$),o=e=>{let{children:t,type:a,className:i,variant:r,...o}=e;return(0,n.jsx)(s,{variant:r||"outline",size:"mobile-round",type:a,initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},className:i,...o,children:t})}},58914:(e,t,a)=>{a.d(t,{i:()=>n});function n(e){var t;return null==(t=null==e?void 0:e.mcp_enabled)||t}},67185:(e,t,a)=>{a.d(t,{h:()=>f});var n=a(77145),i=a(26294),r=a(95661),s=a(55966),o=a(31088),c=a(21016),l=a(18221),d=a(56024),u=a(69730),p=a(32313),h=a(49692),m=a(69858);let f=e=>{let{autoSize:t,minHeight:a=40,className:f,shouldAutoFocus:A,placeholder:y,forceShowPlaceholder:v,disabled:w,isChatModeActive:k=!1,onEnableChatMode:x=()=>{},onDisableChatMode:b=()=>{},enableSlashCommands:I=!1}=e,_=(0,i.c3)("ChatInputTextArea"),{chatInputRef:P,isVoiceListening:S}=(0,h.N)(),{store:z,setStorageData:j}=(0,l.Xl)(),C=z(e=>e.message),T=z(e=>e.setMessage),[N,Z]=(0,r.useState)(!1),E=(0,r.useRef)(null),R=(0,c.A)("md");(0,r.useEffect)(()=>{var e;let t=null==(e=P.current)?void 0:e.value;t&&j(e=>({...e,message:t}))},[j,P]);let K=(0,r.useRef)(!1),D=(0,r.useCallback)(e=>{let t=e.target.value,a=t;I&&(/^\/\s*(c|ch|cha|chat)?$/i.test(t)?Z(!0):Z(!1),/^\/\s*chat\s+/i.test(t)&&(x(),a=t.replace(/^\/\s*chat\s+/i,""),Z(!1))),T(a)},[T,I,x]);return g({autoSize:t,value:C,textareaRef:P,minHeight:a}),(0,s.vC)("t",e=>{if(e.preventDefault(),P.current){var t;null==(t=P.current)||t.focus()}}),(0,r.useEffect)(()=>{if((null==P?void 0:P.current)&&!R&&window.innerWidth>=c.f.md){var e;null==(e=P.current)||e.focus()}},[C,P,R]),(0,r.useEffect)(()=>{let e=e=>{E.current&&!E.current.contains(e.target)&&P.current&&!P.current.contains(e.target)&&Z(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[P]),(0,n.jsxs)("div",{className:"relative flex flex-1 items-center",children:[I&&k&&(0,n.jsx)("div",{className:"ml-1.5 mt-0 py-2",children:(0,n.jsx)("div",{className:"mt-0 h-fit rounded-sm bg-affirmative px-2 py-0.5 text-xs font-medium text-affirmative-foreground dark:bg-affirmative dark:text-affirmative-foreground",children:_("chatMode")})}),I&&N&&(0,n.jsx)("div",{ref:E,className:"absolute -top-10 left-2 z-50 cursor-pointer rounded-md border border-input bg-popover p-1 shadow-md",onClick:()=>{if(P.current){var e;T(""),x(),Z(!1),null==(e=P.current)||e.focus()}},children:(0,n.jsxs)("div",{className:"flex items-center gap-1.5 rounded-sm bg-accent px-2 py-1",children:[(0,n.jsx)(u.A,{name:"message",className:"h-4 w-4"}),(0,n.jsx)("span",{className:"font-medium",children:_("chatSuggestion")})]})}),(0,n.jsx)(p.T,{id:"chatinput",autoFocus:A,ref:null!=P?P:void 0,disabled:w,readOnly:S,value:v?"":C,onChange:D,onCompositionStart:()=>K.current=!0,onCompositionEnd:()=>K.current=!1,onFocus:e=>{let t=/Android/i.test(navigator.userAgent);R&&t&&setTimeout(()=>{e.target.scrollIntoView({behavior:"smooth",block:"center"})},200)},className:(0,d.cn)("resize-none border-none text-[16px] leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap md:text-base","focus-visible:border-none focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[max(35svh,5rem)]","bg-transparent focus:bg-transparent","flex-1",{"cursor-default text-muted-foreground":S},f),style:{height:a},placeholder:y,onKeyDown:e=>{"Backspace"===e.key&&""===e.target.value&&(b(),Z(!1));let t=K.current||e.nativeEvent.isComposing;if("Enter"===e.key&&!e.shiftKey&&!R&&!t)if(e.preventDefault(),Z(!1),I&&N)x(),T("");else{let t=e.currentTarget.closest("form");t&&t.requestSubmit(),e.currentTarget.blur()}},maxLength:m.d2,onPaste:e=>{e.clipboardData.getData("text/plain").length>m.d2&&o.toast.warning(_("limitReached"),{description:_("limitReachedDescription",{count:m.d2})})}})]})};f.displayName="ChatInputTextArea";let g=e=>{let{autoSize:t,value:a,textareaRef:n,minHeight:i=0}=e;(0,r.useLayoutEffect)(()=>{if(!n.current||!t)return;let e=n.current,r=document.createElement("div");r.style.visibility="hidden",r.style.position="absolute",r.style.overflow="hidden",r.style.whiteSpace="pre-wrap",r.style.wordBreak="break-word",document.body.appendChild(r);let s=window.getComputedStyle(e);r.style.width=s.width,r.style.padding=s.padding,r.style.lineHeight=s.lineHeight,r.style.fontSize=s.fontSize,r.style.fontFamily=s.fontFamily,r.style.boxSizing=s.boxSizing,r.textContent=a+"\n";let o=Math.max(r.scrollHeight,i);e.style.height!=="".concat(o,"px")&&(e.style.height="".concat(o,"px")),document.body.removeChild(r)},[a,n,i,t])}},69070:(e,t,a)=>{a.d(t,{c:()=>l});var n=a(77145),i=a(46753),r=a.n(i),s=a(52811),o=a(20247),c=a(69730);let l=e=>{let{isOpen:t,onDismiss:a=()=>{},onConfirm:i=()=>{}}=e;return(0,n.jsx)(o.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,n.jsxs)(o.Cf,{children:[(0,n.jsx)(o.c7,{children:(0,n.jsx)(o.L3,{children:"Are you sure you want to send this message?"})}),(0,n.jsx)(o.rr,{children:"We detected API keys in your message. For security, ask Lovable to manage your secrets instead of including them directly."}),(0,n.jsxs)(o.Es,{children:[(0,n.jsx)(s.$,{variant:"outline",children:(0,n.jsxs)(r(),{href:"https://docs.lovable.dev/features/security",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,n.jsx)("span",{className:"truncate",children:"Learn more"}),(0,n.jsx)(c.A,{name:"arrow_up_right"})]})}),(0,n.jsx)(s.$,{variant:"outline",onClick:i,children:(0,n.jsx)("span",{className:"truncate",children:"Send anyway"})}),(0,n.jsx)(s.$,{variant:"affirmative",onClick:a,children:"Got it"})]})]})})}},82782:(e,t,a)=>{a.d(t,{l:()=>n});let n=(0,a(84510).vt)(e=>({subTab:null,activeIntegrationId:null,setSubTab:(t,a)=>e({subTab:t,activeIntegrationId:a}),setActiveIntegrationId:t=>e({activeIntegrationId:t})}))},86396:(e,t,a)=>{a.d(t,{F:()=>f});var n=a(77145),i=a(95661),r=a(73071),s=a(31088),o=a(95018),c=a(49692),l=a(84448),d=a(56024),u=a(69730);let p=(0,i.memo)(e=>{let{getRootProps:t,portalTargetRef:a,isDragReject:r}=e,[s,o]=(0,i.useState)(!1),[c,p]=(0,i.useState)(!1),h=(0,i.useRef)(0),m=(0,i.useRef)(""),[f,g]=(0,i.useState)(null);(0,i.useEffect)(()=>{g((null==a?void 0:a.current)||document.body)},[a]);let A=!!(null==a?void 0:a.current);(0,i.useEffect)(()=>{h.current=0},[f]);let y=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),v=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h.current--,h.current<=0&&(h.current=0,o(!1))},[]),w=(0,i.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),h.current++,(null==(t=e.dataTransfer)?void 0:t.types.includes("Files"))&&o(!0)},[]),k=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h.current=0,o(!1)},[]);return((0,i.useEffect)(()=>{if(!f)return;let e=[["dragenter",w],["dragleave",v],["dragover",y],["drop",k]];return e.forEach(e=>{let[t,a]=e;f.addEventListener(t,a)}),()=>{e.forEach(e=>{let[t,a]=e;f.removeEventListener(t,a)})}},[f,w,v,y,k]),(0,i.useEffect)(()=>{if(f)return s?(m.current=f.style.overflow,f.style.overflow="hidden"):void 0!==m.current&&(f.style.overflow=m.current),()=>{f&&void 0!==m.current&&(f.style.overflow=m.current)}},[s,f]),(0,i.useEffect)(()=>{p(!0)},[]),f&&c)?(0,l.createPortal)((0,n.jsx)("div",{...t(),className:(0,d.cn)("inset-0 z-30 flex items-center justify-center bg-background/95 transition-opacity duration-75",A?"absolute pl-3":"fixed",s?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 px-20 py-10",children:[(0,n.jsx)(u.A,{name:"folder",className:"h-10 w-10"}),(0,n.jsx)("h1",{className:"text-center",children:r?"Too many files":"Add files"}),(0,n.jsx)("p",{className:"text-center",children:r?"Too many files (maximum 10 files per message)":"Drop any files here to add them to your message"})]})}),f):null},(e,t)=>{var a,n;return e.isDragReject===t.isDragReject&&(null==(a=e.portalTargetRef)?void 0:a.current)===(null==(n=t.portalTargetRef)?void 0:n.current)});p.displayName="ImageDropzone";var h=a(79757),m=a(18221);let f=e=>{let{portalTargetRef:t,onDropAccepted:a}=e,{focusChatInput:l}=(0,c.N)(),d=(0,m.Uw)(e=>e.setImages),u=(0,m.Uw)(e=>e.images),f=(0,m.Uw)(e=>e.setImagesAddedViaDropdown),g=(0,i.useCallback)(e=>{if(u.length+e.length>10)return void s.toast.error("File limit reached",{description:"Please limit your message to ".concat(10," ").concat("files",".")});let t=e.map(e=>({url:URL.createObjectURL(e),name:e.name,uploading:!1,uploaded:!1,id:(0,o.A)()}));d(e=>[...e,...t])},[d,u]),{getInputProps:A,open:y,getRootProps:v,isDragReject:w}=(0,r.VB)({onDrop:g,onDropAccepted:()=>{l(),null==a||a()},noClick:!0,noKeyboard:!0,maxSize:(0,h.XP)(),maxFiles:10-u.length,accept:void 0,onDropRejected:e=>{let t=!1;for(let a of e)if(a.errors.length>0){let e=a.errors[0].message,n=a.errors[0].code;if("file-too-large"===a.errors[0].code)n="File too large",e="File is too large. Max size is 20MB";else if("too-many-files"===a.errors[0].code){if(t)continue;n="".concat("File"," limit reached"),e="Please limit your message to ".concat(10," ").concat("files","."),t=!0}s.toast.error(n,{description:e})}}});(0,i.useEffect)(()=>{let e=e=>{let t=(0,h.DD)(e);t.length>0&&(g(t),l())};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[g,l]);let k=(0,n.jsx)(p,{getRootProps:v,portalTargetRef:t,isDragReject:w}),x=(0,i.useCallback)(()=>{f(!0),y()},[y,f]);return{dropzoneElement:k,openFileUpload:y,openFileUploadFromDropdown:x,getInputProps:A,addImages:g}}},92753:(e,t,a)=>{a.d(t,{B:()=>l});var n=a(77145),i=a(26294),r=a(92912),s=a(79294),o=a(67539),c=a(69730);let l=e=>{let{projectId:t}=e,a=(0,i.c3)("ModelSelector"),{selectedModel:l,setSelectedModel:d}=(0,s.Y$)();return(0,n.jsxs)(o.l6,{value:l||"",onValueChange:e=>(e=>{r.Ay.capture("model_selected",{model:e,project_id:t}),d(e)})(e),children:[(0,n.jsxs)(o.bq,{className:"h-6 w-fit gap-1.5 rounded-full border bg-transparent px-1.5 py-0.5 text-muted-foreground shadow-none hover:border-border hover:bg-transparent md:hover:bg-accent md:hover:text-muted-foreground",children:[(0,n.jsx)(c.A,{name:"smart_toy",size:"small"}),(0,n.jsx)(o.yv,{placeholder:a("selectModel"),className:"gap-0"})]}),(0,n.jsx)(o.gC,{align:"end",children:s.$Q.map(e=>(0,n.jsx)(o.eb,{value:e,children:e},e))})]})}}}]);