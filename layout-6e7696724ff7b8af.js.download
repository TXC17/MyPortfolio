try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="17638416719484a12ecf001"}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5125],{4412:(e,s,t)=>{"use strict";t.d(s,{Q:()=>n});var a=t(77145),r=t(52811),l=t(20247);function n(e){let{open:s,onOpenChange:t,folderName:n,onConfirm:i,isDeleting:o=!1}=e;return(0,a.jsx)(l.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(l.Cf,{className:"!w-[360px] !max-w-[360px] p-6",size:"sm",children:[(0,a.jsxs)(l.c7,{className:"mb-2",children:[(0,a.jsx)(l.L3,{className:"text-2xl",children:"Delete folder"}),(0,a.jsxs)(l.rr,{className:"text-sm",children:['Are you sure you want to delete "',n,'"?',(0,a.jsx)("br",{}),"Projects won't be deleted, only the folder."]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:o,className:"h-10 flex-1 border-border text-base hover:border-border hover:bg-muted/50",children:"Cancel"}),(0,a.jsx)(r.$,{type:"button",variant:"destructive",onClick:i,disabled:o,className:"h-10 flex-1 text-base",children:o?"Deleting...":"Delete"})]})]})})}},6186:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var a=t(77145),r=t(63687),l=t(79400),n=t(15822);let i=function(){return n.W?null:(0,a.jsx)(r.default,{id:"delve-cookie-consent",src:"https://cdn.delve.co/src/delve-cookie-consent-lovable.js",strategy:"afterInteractive",onLoad:l.H})}},8223:(e,s,t)=>{"use strict";t.d(s,{y:()=>o});var a=t(77145),r=t(95661),l=t(69730),n=t(89002);let i=[{name:"sapphire-foreground",value:"hsl(var(--brand-sapphire-foreground))"},{name:"twilight-foreground",value:"hsl(var(--brand-twilight-foreground))"},{name:"bubblegum-foreground",value:"hsl(var(--brand-bubblegum-foreground))"},{name:"tiger-foreground",value:"hsl(var(--brand-tiger-foreground))"},{name:"saffron-foreground",value:"hsl(var(--brand-saffron-foreground))"},{name:"muted-foreground",value:"hsl(var(--muted-foreground))"}];function o(e){let{color:s,onChange:t,className:o=""}=e,[d,c]=(0,r.useState)(!1),u=e=>{t(e),c(!1)};return(0,a.jsxs)(n.AM,{open:d,onOpenChange:c,children:[(0,a.jsx)(n.Wv,{asChild:!0,children:(0,a.jsx)("button",{type:"button",className:"absolute left-4 top-1/2 z-10 -translate-y-1/2 ".concat(o),tabIndex:-1,children:(0,a.jsx)(l.A,{name:"folder",className:s?"":"text-muted-foreground",style:s?{color:s}:void 0})})}),(0,a.jsx)(n.hl,{className:"w-auto p-3",align:"center",side:"bottom",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i.slice(0,-1).map(e=>(0,a.jsx)("button",{type:"button",className:"rounded p-1.5 transition-all hover:bg-muted ".concat(s===e.value?"ring-2 ring-primary ring-offset-1":""),onClick:()=>u(e.value),title:e.name,children:(0,a.jsx)(l.A,{name:"folder",style:{color:e.value}})},e.name)),(0,a.jsx)("button",{type:"button",className:"rounded p-1.5 transition-all hover:bg-muted ".concat(null===s||s===i[i.length-1].value?"ring-2 ring-primary ring-offset-1":""),onClick:()=>u(i[i.length-1].value),title:"Default",children:(0,a.jsx)(l.A,{name:"folder",className:"text-muted-foreground"})})]})})]})}},15822:(e,s,t)=>{"use strict";t.d(s,{W:()=>r});let a="undefined"!=typeof navigator,r=a&&!0===navigator.webdriver||a&&navigator.userAgent.includes("HeadlessChrome")},18260:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a={src:"/_next/static/media/grain.1ccdda41.png",height:200,width:200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMdHwT3rNEAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAlSURBVHicY2BkYGAEYQYQYASzwTwoDeFDBJCUgjEjI1geRDMCAAPXAB/bXWiHAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},28994:(e,s,t)=>{"use strict";t.d(s,{PostCheckoutDialog:()=>h});var a=t(77145),r=t(30849),l=t(13410),n=t(95661),i=t(83220),o=t(52811),d=t(20247),c=t(27458),u=t(47226),m=t(72632),p=t(56024);let x={ktlo:{name:"Lite",title:"Boom, you rock!",buttonText:"Let's keep building",description:void 0,lightImage:"/img/postupgrade/lite-light.jpg",darkImage:"/img/postupgrade/lite-dark.jpg"},pro:{name:"Pro",title:"You are all set",buttonText:"Let's build",description:"Start using custom domains, powerful features and plenty of credits.",lightImage:"/img/postupgrade/pro-light.jpg",darkImage:"/img/postupgrade/pro-dark.jpg"},biz:{name:"Business",title:"You are all set",buttonText:"Let's build",description:"Start using SSO, design templates and plenty of credits.",lightImage:"/img/postupgrade/biz-light.jpg",darkImage:"/img/postupgrade/biz-dark.jpg"}},h=()=>{let e=(0,l.useSearchParams)(),s=(0,l.useRouter)(),t=(0,l.usePathname)(),[h,f]=(0,n.useState)(!1),g=(0,i.j4)(e=>e.currentWorkspace),j=(0,m.m6)(null==g?void 0:g.plan),v=Object.keys(x).includes(j)?x[j]:null,b=(0,n.useCallback)(()=>{let a=new URLSearchParams(e);a.delete("change_type"),a.delete("plan_type"),a.delete("payment_status"),s.push("".concat(t,"?").concat(a.toString()))},[t,s,e]);(0,n.useEffect)(()=>{if("failed"===e.get("payment_status"))return;let s=e.get("change_type");s&&"upgrade"===s&&f(!0),g&&!j&&b()},[e,g,b,j]),(0,n.useEffect)(()=>{e.get("change_type")||f(!1)},[e]);let N=!g||!v;return(0,a.jsx)(d.lG,{open:h,onOpenChange:e=>{e||b()},children:(0,a.jsx)(d.Cf,{className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto outline-none",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)(u.E,{className:"h-9 w-32"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(u.E,{className:"h-8 w-48"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(u.E,{className:"h-4 w-full"}),(0,a.jsx)(u.E,{className:"h-4 w-3/4"})]})]})]}),(0,a.jsx)(u.E,{className:"h-48 w-full rounded-xl"}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(u.E,{className:"h-11 w-full rounded-xl"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)(c.Fy,{className:"h-9"}),(0,a.jsxs)(d.c7,{children:[(0,a.jsx)(d.L3,{className:"text-2xl md:text-3xl",children:v.title}),(0,a.jsxs)(d.rr,{className:"text-muted-foreground",children:[g.is_personal?"You are":'"'.concat(g.name,'" is')," now subscribed to"," ",(0,a.jsxs)("b",{className:"font-medium",children:["Lovable ",v.name]}),".","ktlo"!==j&&" Start using custom domains, powerful features and plenty of credits."]})]})]}),(0,a.jsx)(r.default,{src:v.lightImage,alt:"upgrade",className:"block h-48 w-full rounded-xl border object-cover dark:hidden",width:800,height:200,priority:!0}),(0,a.jsx)(r.default,{src:v.darkImage,alt:"upgrade",className:"hidden h-48 w-full rounded-xl object-cover dark:block",width:800,height:200,priority:!0}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(o.$,{size:"lg",onClick:b,className:(0,p.cn)("group relative mt-1 flex w-full items-center rounded-xl"),children:(0,a.jsx)("span",{className:"z-40",children:v.buttonText})})})]})})})}},29894:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(77145),r=t(27458);let l=e=>{let{className:s,size:t="default"}=e,l="large"===t?{mobile:"h-[22px]",sm:"sm:h-[28px]",desktop:"md:h-[36px]"}:{mobile:"h-[16px]",sm:"sm:h-[22px]",desktop:"md:h-[22px]"};return(0,a.jsxs)("div",{className:"flex flex-col gap-1.5 ".concat(s||""),children:[(0,a.jsx)(r.Qn,{className:"flex ".concat(l.mobile," ").concat(l.sm," ").concat(l.desktop," dark:hidden")}),(0,a.jsx)(r.I_,{className:"hidden ".concat(l.mobile," ").concat(l.sm," ").concat(l.desktop," dark:flex")})]})}},36062:(e,s,t)=>{"use strict";t.d(s,{X:()=>l});var a=t(18502),r=t(84068);function l(e){var s;let{workspaceId:t,status:l,includeDisabled:i=!1}=e,{data:o,isLoading:d,refetch:c}=(0,a.I)(r.L.workspaceConnectors({workspaceId:t,status:l,includeDisabled:i})),u=(null==o?void 0:o.connectors)||[],m=null!=(s=null==o?void 0:o.customEnabled)&&s,p={connected:[],available:[],disabled:[]};u.forEach(e=>{p[e.status].push(e)}),p.connected.sort((e,s)=>e.display_name.localeCompare(s.display_name)),p.available.sort(n);let x=new Map(u.map(e=>[e.id,e]));return{connectors:u,connectorsByStatus:p,connectorMap:x,customEnabled:m,isLoading:d,refetch:c}}let n=(e,s)=>Number(s.launched)-Number(e.launched)||e.display_name.localeCompare(s.display_name)},37962:(e,s,t)=>{"use strict";t.d(s,{TU:()=>c,tD:()=>u});var a=t(81496),r=t(21562),l=t(95661),n=t(40911),i=t(99989),o=t(74507);let d=e=>{if(!e)return 0;try{if(e instanceof a.Dc)return e.toDate().getTime();if("number"==typeof e)return isNaN(e)?0:e;if("string"==typeof e){let s=Date.parse(e);return isNaN(s)?0:s}return 0}catch(e){return 0}},c=(e,s,t)=>e.sort((e,a)=>{let r=0;switch(s){case"name":r=(e.name||"").localeCompare(a.name||"");break;case"created_at":r=d(e.created_at)-d(a.created_at);break;default:r=d(e.updated_at)-d(a.updated_at)}return"desc"===t?-r:r}),u=e=>{let{workspaceId:s,pageSize:t=12,isDraft:a=!1,enableVisibilityFilter:d=!1,enablePublishStatusFilter:u=!1}=e,[m,p]=(0,l.useState)(""),[x,h]=(0,l.useState)(1),[f,g]=(0,l.useState)("all"),[j,v]=(0,l.useState)("updated_at"),[b,N]=(0,l.useState)("desc"),[w,y]=(0,l.useState)("all"),[k,C]=(0,l.useState)("all"),A=(0,l.useRef)(s);(0,l.useEffect)(()=>{A.current!==s&&(g("all"),v("updated_at"),N("desc"),p(""),y("all"),C("all"),h(1),A.current=s)},[s]),(0,l.useEffect)(()=>{h(1)},[f,j,b,m,w,k]);let{data:S,isLoading:_,refetch:E}=(0,n.I)({...i.y.projects({workspaceId:s,userId:f,isDraft:a,visibility:d?w:void 0}),permission:o.eZ.ViewWorkspaceProjects,enabled:!!s}),P=(0,l.useMemo)(()=>({keys:[{name:"name",weight:.5},{name:"description",weight:.5},{name:"tech_stack",weight:.3}],threshold:.5,includeScore:!0}),[]),I=(0,l.useMemo)(()=>{let e=null==S?void 0:S.projects;return e?new r.A(e,P):null},[null==S?void 0:S.projects,P]),O=(0,l.useMemo)(()=>{let e=null==S?void 0:S.projects;if(!e)return;let s=[...e];if(u&&"all"!==k&&(s=s.filter(e=>{let s=!0===e.is_published&&"private"===e.publish_visibility,t=!0===e.is_published&&(null==e.publish_visibility||"public"===e.publish_visibility);return"published"===k?s||t:"internally_published"===k?s:"externally_published"===k?t:"unpublished"!==k||!s&&!t})),m.length>0&&I){let e=new Set(I.search(m).map(e=>e.item.id));s=s.filter(s=>e.has(s.id))}return c(s,j,b)},[null==S?void 0:S.projects,m,I,j,b,k,u]),z=(0,l.useMemo)(()=>{if(O)return O.slice(0,x*t)},[O,x,t]),D=((null==O?void 0:O.length)||0)>x*t;return{projects:z,allProjects:null==S?void 0:S.projects,isLoading:_,hasMore:D,searchQuery:m,setSearchQuery:p,selectedUserId:f,setSelectedUserId:g,sortBy:j,setSortBy:v,order:b,setOrder:N,visibility:w,setVisibility:y,publishStatus:k,setPublishStatus:C,refetch:E,showMore:()=>{D&&h(e=>e+1)}}}},48285:(e,s,t)=>{Promise.resolve().then(t.bind(t,6186)),Promise.resolve().then(t.bind(t,61803)),Promise.resolve().then(t.bind(t,97385)),Promise.resolve().then(t.bind(t,96746)),Promise.resolve().then(t.bind(t,28994)),Promise.resolve().then(t.bind(t,51762)),Promise.resolve().then(t.bind(t,34883)),Promise.resolve().then(t.bind(t,54982)),Promise.resolve().then(t.bind(t,27835))},58124:(e,s,t)=>{"use strict";t.d(s,{D:()=>r,o:()=>l});var a=t(2074);let r=[{category:a.U2.INTERNAL_TOOLS,label:"Internal Tools"},{category:a.U2.WEBSITE,label:"Website"},{category:a.U2.PERSONAL,label:"Personal"},{category:a.U2.CONSUMER_APP,label:"Consumer App"},{category:a.U2.B2B_APP,label:"B2B App"},{category:a.U2.PROTOTYPE,label:"Prototype"}],l=Object.fromEntries(r.map(e=>{let{category:s,label:t}=e;return["/dashboard/explore/".concat(s),t]}))},58914:(e,s,t)=>{"use strict";function a(e){var s;return null==(s=null==e?void 0:e.mcp_enabled)||s}t.d(s,{i:()=>a})},61803:(e,s,t)=>{"use strict";t.d(s,{Layout:()=>e$});var a=t(77145),r=t(13410),l=t(95661),n=t(4075),i=t(214),o=t(56024),d=t(89781),c=t(46753),u=t.n(c),m=t(85615),p=t(37962),x=t(83220),h=t(52811),f=t(69730),g=t(85628),j=t(72632),v=t(94123),b=t(8711);function N(e){let{items:s}=e;return(0,a.jsxs)(b.rI,{children:[(0,a.jsx)(b.ty,{asChild:!0,children:(0,a.jsxs)(h.$,{variant:"ghost",size:"icon",className:"h-8 w-8 px-2 hover:bg-muted/50",children:[(0,a.jsx)(f.A,{name:"ellipsis_horizontal",size:"large",className:"text-muted-foreground/50"}),(0,a.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,a.jsx)(b.SQ,{align:"start",children:s.map(e=>{let s=(0,a.jsxs)(b._2,{onClick:e.onClick,className:"destructive"===e.variant?"text-destructive-primary focus:bg-muted":"focus:bg-muted",children:[(0,a.jsx)(f.A,{name:e.icon,size:"small",className:"mr-2"}),e.label]});return(0,a.jsx)(v.E,{permission:e.permission,children:s},e.label)})})]})}var w=t(72566),y=t(64614),k=t(4412),C=t(58124),A=t(74507);let S={"/dashboard":"Dashboard","/dashboard/projects":"Projects","/dashboard/explore":"Explore","/dashboard/discover":"Discover",...C.o,"/dashboard/shared-with-me":"Shared with me","/dashboard/starred":"Starred"};function _(){let e=(0,r.usePathname)(),s=(0,r.useRouter)(),t=(0,x.j4)(e=>e.currentWorkspace),{folders:n}=(0,g.ow)(null==t?void 0:t.id),i=(0,g.Fd)(null==t?void 0:t.id),[o,d]=(0,l.useState)(!1),[c,j]=(0,l.useState)(!1),[v,b]=(0,l.useState)(!1),C=(0,w.I)(),_=(0,l.useMemo)(()=>{let s=e.split("/").filter(Boolean);return s.includes("folders")&&s.some(e=>e.startsWith("fold_"))},[e]),E="/dashboard/projects"===e,P=(0,l.useMemo)(()=>{if(!_)return null;let s=e.split("/").filter(Boolean).find(e=>e.startsWith("fold_"));return null==n?void 0:n.find(e=>e.id===s)},[e,n,_]),{projectIds:I}=(0,g.Zi)(null==t?void 0:t.id,null==P?void 0:P.id),{allProjects:O}=(0,p.tD)({workspaceId:null==t?void 0:t.id,isDraft:!1}),z=(0,l.useMemo)(()=>P&&O?O.filter(e=>!(null==I?void 0:I.includes(e.id))):[],[O,I,P]),D=async()=>{P&&(await i.mutateAsync(P.id),s.push("/dashboard/projects"))},L=[{label:"Add projects",icon:"plus",onClick:()=>b(!0),permission:A.eZ.AddProjectsToFolders},{label:"Edit folder",icon:"edit",onClick:()=>d(!0),permission:A.eZ.UpdateFolders},{label:"Delete folder",icon:"trash",onClick:()=>j(!0),permission:A.eZ.DeleteFolders,variant:"destructive"}],T=[{label:"Add folder",icon:"plus",onClick:C,permission:A.eZ.CreateFolders}],F=(0,l.useMemo)(()=>{if(_)return[];let s=e.split("/").filter(Boolean),t=[],a="";for(let e of s){let s=S[a+="/".concat(e)]||e;t.push({path:a,label:s})}return t.filter(e=>"/dashboard"!==e.path)},[e,_]);return _&&P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-8 w-8 px-2 hover:bg-muted/50",asChild:!0,children:(0,a.jsxs)(u(),{href:"/dashboard/projects",children:[(0,a.jsx)(f.A,{name:"arrow_left",size:"large",className:"text-muted-foreground/50"}),(0,a.jsx)("span",{className:"sr-only",children:"Back to All Projects"})]})}),(0,a.jsx)(f.A,{size:"large",name:"folder",className:P.color?"":"text-muted-foreground",style:P.color?{color:P.color}:void 0}),(0,a.jsx)("span",{className:"text-xl font-medium text-foreground",children:P.name}),(0,a.jsx)(N,{items:L})]}),(0,a.jsx)(m.p,{open:v,onOpenChange:b,folderId:P.id,availableProjects:z,workspaceId:null==t?void 0:t.id,totalProjectCount:(null==O?void 0:O.length)||0}),(0,a.jsx)(y.v,{open:o,onOpenChange:d,folder:P}),(0,a.jsx)(k.Q,{open:c,onOpenChange:j,folderName:P.name,onConfirm:D,isDeleting:i.isPending})]}):0===F.length?null:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[F.map((e,s)=>{let t=s===F.length-1;return(0,a.jsxs)("span",{className:"flex items-center",children:[s>0&&(0,a.jsx)("span",{className:"mx-1 text-xl",children:"/"}),t?(0,a.jsx)("span",{className:"text-xl font-medium text-foreground",children:e.label}):(0,a.jsx)(u(),{href:e.path,className:"cursor-pointer text-xl font-medium transition-colors hover:text-foreground hover:underline hover:underline-offset-4",children:e.label})]},e.path)}),E&&(0,a.jsx)(N,{items:T})]})})}function E(){let e=(0,r.usePathname)(),s=(0,r.useSearchParams)(),t=(0,x.j4)(e=>e.currentWorkspace),[n,i]=(0,l.useState)(!1),{isFreePlan:d}=(0,j.cb)(null==t?void 0:t.plan),c=(0,l.useMemo)(()=>{let s=e.split("/").filter(Boolean);return s.includes("folders")&&s.some(e=>e.startsWith("fold_"))?s.find(e=>e.startsWith("fold_")):null},[e]),{projectIds:v}=(0,g.Zi)(null==t?void 0:t.id,null!=c?c:void 0),{allProjects:b}=(0,p.tD)({workspaceId:null==t?void 0:t.id,isDraft:!1}),N=(0,l.useMemo)(()=>c&&b?b.filter(e=>!(null==v?void 0:v.includes(e.id))):[],[b,v,c]),w=(0,l.useMemo)(()=>t=>{let a=new URLSearchParams(s);return a.set("settings",t),"".concat(e,"?").concat(a.toString())},[e,s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("nav",{className:(0,o.cn)("sticky top-0 hidden w-full items-center justify-between pr-4 pt-6 md:flex md:pr-6",!c&&"pb-4"),children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)("div",{className:"ml-8 mt-2.5",children:(0,a.jsx)(_,{})})}),(0,a.jsx)("div",{className:"flex min-h-9 items-center gap-2",children:d&&(0,a.jsx)(h.$,{size:"default",asChild:!0,variant:"decline",className:"h-9",children:(0,a.jsxs)(u(),{href:w("billing"),children:[(0,a.jsx)(f.A,{name:"crown",size:"small"}),"Upgrade"]})})})]}),c&&(0,a.jsx)(m.p,{open:n,onOpenChange:i,folderId:c,availableProjects:N,workspaceId:null==t?void 0:t.id,totalProjectCount:(null==b?void 0:b.length)||0})]})}var P=t(18502),I=t(75417),O=t(71148),z=t(21562),D=t(55966),L=t(20247),T=t(6397),F=t(86386),R=t(87299),W=t(6698),M=t(31088),B=t(95018),U=t(63851),V=t(69850),H=t(36421),$=t(53103);let G=(0,t(84510).vt)(e=>({isOpen:!1,open:()=>e({isOpen:!0}),close:()=>e({isOpen:!1})}));var Q=t(99989),Z=t(30849),K=t(73279),Y=t(12847),q=t(51385),J=t(702);function X(e){var s;let{project:t,isSelected:r,onClick:n,onHover:i,isRecent:d,isMobile:c}=e,u=l.useRef(null),m=(0,K.Ym)();l.useEffect(()=>{r&&u.current&&u.current.scrollIntoView({block:"nearest"})},[r]);let p=null==(s=t.latest_screenshot_url)?void 0:s.replace("https://pub-bb2e103a32db4e198524a2e9ed8f35b4.r2.dev","https://screenshot2.lovable.dev"),x=t.display_name||t.name||"Untitled Project",h=t.user_id||t.created_by||"";return(0,a.jsxs)(O.P.div,{ref:u,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.05},className:(0,o.cn)("group flex cursor-pointer items-center gap-3",c?"mx-2 rounded-lg px-2 py-2":"mx-3 rounded-lg px-2 py-2.5","transition-colors duration-75",r?"bg-muted":"hover:bg-muted/30"),onClick:n,onMouseEnter:i,children:[(0,a.jsx)("div",{className:(0,o.cn)("relative flex-shrink-0 overflow-hidden rounded-md bg-muted",c?"h-8 w-[50px]":"h-10 w-[62px]"),children:p?(0,a.jsx)(Z.default,{src:p,alt:x,fill:!0,sizes:"62px",className:"object-cover object-top"}):(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)(f.A,{name:"image",className:"h-4 w-4 text-muted-foreground/40"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"truncate text-sm font-medium text-foreground/90",children:x}),t.created_by&&(0,a.jsxs)("div",{className:"mt-0.5 flex items-center gap-1.5",children:[(0,a.jsx)(q.UserAvatar,{user:{id:h,username:h},className:"h-4 w-4 text-[8px]"}),(0,a.jsx)(J.f,{username:h,showAsLink:!1,className:"truncate text-xs text-muted-foreground/60"})]})]}),(d&&t.last_viewed_at||t.created_at)&&(0,a.jsx)("div",{className:"flex-shrink-0 text-xs text-muted-foreground/40",children:(0,Y.P)({updatedAt:d&&t.last_viewed_at||t.created_at,locale:m})})]})}let ee={MAX_RESULTS:20,RECENT_PROJECTS_DESKTOP:5,RECENT_PROJECTS_MOBILE:8,FUSE_THRESHOLD:.4};function es(){let e=G(e=>e.isOpen),s=G(e=>e.close),t=G(e=>e.open),[n,i]=(0,l.useState)(""),[d,c]=(0,l.useState)(0),u=(0,r.useRouter)(),m=(0,$.a)(),{isMac:h}=(0,H.A)(),g=(0,x.j4)(e=>e.currentWorkspace),{mutate:j,isPending:v}=function(e){let s=(0,r.useRouter)(),t=(0,R.jE)(),a=(0,x.j4)(e=>e.currentWorkspace);return(0,W.n)({mutationFn:async s=>{if(!(null==a?void 0:a.id))throw Error("Please select a workspace first");let r=(0,B.A)(),l={description:s,visibility:(null==e?void 0:e.visibility)||"private",initial_message:{id:r,message:s},...(null==e?void 0:e.techStack)&&{tech_stack:e.techStack},...(null==e?void 0:e.templateProjectId)&&{template_project_id:e.templateProjectId}},n=(0,U.P)(),i=await n.post("/workspaces/".concat(a.id,"/projects"),l);return t.setQueryData(V.gO.initialPrompt(i.id),{id:r,message:s,images:[]}),i},onSuccess:a=>{var r;t.invalidateQueries({queryKey:V.workspaceKeys.all}),s.push("/projects/".concat(a.id)),null==e||null==(r=e.onSuccess)||r.call(e,a.id)},onError:s=>{var t;s instanceof Error?M.toast.error("Failed to create project: ".concat(s.message)):M.toast.error("Failed to create project. Please try again."),null==e||null==(t=e.onError)||t.call(e,s)}})}({onSuccess:()=>{s(),i("")}}),{allProjects:b,isLoading:N}=(0,p.tD)({workspaceId:null==g?void 0:g.id,pageSize:500,isDraft:!1}),{data:w,isLoading:y}=(0,P.I)(Q.y.recentlyViewedProjects({workspaceId:null==g?void 0:g.id,limit:m?ee.RECENT_PROJECTS_MOBILE:ee.RECENT_PROJECTS_DESKTOP})),k=(0,l.useMemo)(()=>(null==w?void 0:w.projects)||[],[w]),C=(0,l.useMemo)(()=>b?new z.A(b,{keys:[{name:"name",weight:.5},{name:"display_name",weight:.5},{name:"description",weight:.3},{name:"user_display_name",weight:.2}],threshold:ee.FUSE_THRESHOLD,includeScore:!0}):null,[b]),A=(0,l.useMemo)(()=>n.trim()?C?C.search(n).slice(0,ee.MAX_RESULTS).map(e=>e.item):[]:k,[n,k,C]),S=N||y,_=n.trim().length>0,E=A.length>0;(0,l.useEffect)(()=>{_?c(+!!E):c(0)},[_,E]),(0,D.vC)("meta+k, ctrl+k",e=>{e.preventDefault(),t()},{enableOnFormTags:!0}),(0,D.vC)("escape",()=>{e&&(s(),i(""))},{enabled:e,enableOnFormTags:!0}),(0,D.vC)("down",e=>{e.preventDefault();let s=_?A.length+1:A.length;s>0&&c(e=>(e+1)%s)},{enabled:e&&(_||A.length>0),enableOnFormTags:!0}),(0,D.vC)("up",e=>{e.preventDefault();let s=_?A.length+1:A.length;s>0&&c(e=>(e-1+s)%s)},{enabled:e&&(_||A.length>0),enableOnFormTags:!0}),(0,D.vC)("enter",e=>{if(e.preventDefault(),_&&0===d)j(n);else{let e=_?d-1:d;A[e]&&Z(A[e])}},{enabled:e&&(_||A.length>0),enableOnFormTags:!0}),(0,D.vC)("meta+enter, ctrl+enter",e=>{e.preventDefault(),_&&j(n)},{enabled:e&&_,enableOnFormTags:!0});let Z=(0,l.useCallback)(e=>{u.push("/projects/".concat(e.id)),s(),i("")},[u,s]);return(0,a.jsx)(L.lG,{open:e,onOpenChange:e=>{e?t():(s(),i(""))},children:(0,a.jsxs)(L.Cf,{className:(0,o.cn)("gap-0 p-0","bg-sidebar","border border-border","rounded-2xl","shadow-2xl","overflow-hidden","[&>button]:flex [&>button]:h-8 [&>button]:w-8 [&>button]:items-center [&>button]:justify-center","sm:!w-[650px] sm:!max-w-[650px]","sm:!top-1/4 sm:!translate-y-0","!w-[calc(100%-2rem)] !max-w-[calc(100%-2rem)]","!top-[20%] !translate-y-0"),children:[(0,a.jsx)(L.L3,{className:"sr-only",children:"Search projects"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center",m?"px-4 py-3":"px-5 py-4"),children:[(0,a.jsx)(f.A,{name:_&&!S&&0===A.length?"plus":"search",size:m?"default":"large",className:(0,o.cn)("text-muted-foreground",m?"mr-2.5":"mr-3.5")}),(0,a.jsx)(T.p,{value:n,onChange:e=>i(e.target.value),placeholder:"Search projects",className:(0,o.cn)("flex-1 border-0 bg-transparent px-0","focus-visible:ring-0 focus-visible:ring-offset-0","outline-none",m?"!text-lg font-normal placeholder:!text-base placeholder:text-muted-foreground/40":"!text-2xl font-normal placeholder:!text-xl placeholder:text-muted-foreground/40"),autoFocus:!m})]}),(A.length>0||_)&&(0,a.jsx)("div",{className:(0,o.cn)("h-[0.5px] bg-white/[0.08]",m?"mx-4":"mx-5")})]}),(0,a.jsx)(F.F,{className:0!==A.length||_?m?"h-[420px]":"h-[320px]":"h-0",children:(0,a.jsx)("div",{className:"py-1",children:(0,a.jsx)(I.N,{mode:"popLayout",children:S&&0===A.length&&!_?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground/40",children:"Loading..."})}):_||A.length>0?(0,a.jsxs)("div",{children:[!n&&(0,a.jsx)("div",{className:"px-5 py-2 text-[11px] font-medium uppercase tracking-wide text-muted-foreground/30",children:"Recent projects"}),_&&(0,a.jsxs)(O.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.05},className:(0,o.cn)("group flex cursor-pointer items-center gap-3",m?"mx-2 rounded-lg px-2 py-2":"mx-3 rounded-lg px-2 py-2.5","transition-colors duration-75",0===d?"bg-muted":"hover:bg-muted/30"),onClick:()=>j(n),onMouseEnter:()=>c(0),children:[(0,a.jsx)("div",{className:(0,o.cn)("flex flex-shrink-0 items-center justify-center rounded-md bg-gradient-to-br from-purple-500/20 to-pink-500/20",m?"h-8 w-[50px]":"h-10 w-[62px]"),children:(0,a.jsx)(f.A,{name:"bolt",size:"default",className:"text-purple-400"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-foreground/90",children:"Create project with prompt"}),(0,a.jsxs)("span",{className:"truncate text-sm text-muted-foreground/60",children:["'",n,"'"]})]}),(0,a.jsx)("div",{className:"mt-0.5 text-xs text-muted-foreground/40",children:"Press Enter to create a new project with this prompt"})]}),!m&&(0,a.jsxs)("kbd",{className:"mr-2 flex-shrink-0 rounded px-2 py-1 text-lg text-muted-foreground/60",children:[h?"⌘":"Ctrl+","⏎"]}),v&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground/40 border-t-transparent"})})]}),A.map((e,s)=>{let t=_?s+1:s;return(0,a.jsx)(X,{project:e,isSelected:t===d,onClick:()=>Z(e),onHover:()=>c(t),isRecent:!n,isMobile:m},e.id)})]}):null})})})]})]})})}var et=t(71941),ea=t(63810),er=t(29894),el=t(20256),en=t(92912),ei=t(19695),eo=t(58295),ed=t(39528),ec=t(61374);function eu(e){let{id:s,name:t,color:r,href:n,isActive:i=!1,className:d,workspaceId:c,isOpen:j=!1,onOpenChange:N}=e,[w,C]=(0,l.useState)(!1),[S,_]=(0,l.useState)(t),[E,P]=(0,l.useState)(!1),[I,O]=(0,l.useState)(!1),[z,D]=(0,l.useState)(!1),L=(0,l.useRef)(null),F=(0,x.j4)(e=>e.currentWorkspace),R=(0,g.HP)(c),W=(0,g.Fd)(c),{allProjects:M}=(0,p.tD)({workspaceId:null==F?void 0:F.id,isDraft:!1});(0,l.useEffect)(()=>{w&&L.current&&(L.current.focus(),L.current.select())},[w]);let B=async()=>{S.trim()&&S.trim()!==t?await R.mutateAsync({folderId:s,data:{name:S.trim()}}):_(t),C(!1)},U=async()=>{await W.mutateAsync(s),O(!1)};return w?(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-lg px-3 py-1.5",children:[(0,a.jsx)(f.A,{name:"folder",size:"small",style:{color:r||void 0}}),(0,a.jsx)(T.p,{ref:L,value:S,onChange:e=>_(e.target.value),onBlur:B,onKeyDown:e=>{"Enter"===e.key?B():"Escape"===e.key&&(_(t),C(!1))},className:"h-6 px-1 py-0 text-sm"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,o.cn)("group relative flex items-center rounded-lg pr-1 text-sm transition-colors active:bg-muted md:hover:bg-muted",{"bg-muted":i},d),children:[(0,a.jsxs)(u(),{href:n,className:"flex min-w-0 flex-1 items-center gap-3 py-1.5 pl-3",children:[(0,a.jsx)(f.A,{name:"folder",size:"small",className:"flex-shrink-0 ".concat(r?"":"text-muted-foreground"),style:r?{color:r}:void 0}),(0,a.jsx)("span",{className:"w-full overflow-hidden",style:{whiteSpace:"nowrap",maskImage:"linear-gradient(to right, black calc(100% - 24px), transparent calc(100% - 8px))"},children:t})]}),(0,a.jsxs)(b.rI,{open:j,onOpenChange:N,children:[(0,a.jsx)(b.ty,{asChild:!0,children:(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:"absolute right-0 h-5 w-5 flex-shrink-0 opacity-100 data-[state=open]:static data-[state=open]:bg-muted data-[state=open]:opacity-100 hover:!bg-muted-hover focus-visible:ring-0 md:opacity-0 md:group-hover:static md:group-hover:bg-muted md:group-hover:opacity-100",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,a.jsx)(f.A,{name:"ellipsis_horizontal",className:"h-3 w-3"})})}),(0,a.jsxs)(b.SQ,{align:"end",sideOffset:5,children:[(0,a.jsx)(v.E,{permission:A.eZ.AddProjectsToFolders,children:(0,a.jsxs)(b._2,{onClick:e=>{e.stopPropagation(),D(!0)},className:"focus:bg-muted",children:[(0,a.jsx)(f.A,{name:"plus",size:"small",className:"mr-2"}),"Add projects"]})}),(0,a.jsx)(v.E,{permission:A.eZ.UpdateFolders,children:(0,a.jsxs)(b._2,{onClick:e=>{e.stopPropagation(),C(!0)},className:"focus:bg-muted",children:[(0,a.jsx)(f.A,{name:"pen_top_right_square",size:"small",className:"mr-2"}),"Rename"]})}),(0,a.jsx)(v.E,{permission:A.eZ.UpdateFolders,children:(0,a.jsxs)(b._2,{onClick:e=>{e.stopPropagation(),P(!0)},className:"focus:bg-muted",children:[(0,a.jsx)(f.A,{name:"edit",size:"small",className:"mr-2"}),"Edit folder"]})}),(0,a.jsx)(v.E,{permission:A.eZ.DeleteFolders,children:(0,a.jsxs)(b._2,{onClick:e=>{e.stopPropagation(),O(!0)},className:"text-destructive-primary focus:bg-muted",children:[(0,a.jsx)(f.A,{name:"trash",size:"small",className:"mr-2"}),"Delete"]})})]})]})]}),(0,a.jsx)(y.v,{folder:{id:s,name:t,color:r},open:E,onOpenChange:P}),(0,a.jsx)(k.Q,{open:I,onOpenChange:O,folderName:t,onConfirm:U,isDeleting:W.isPending}),(0,a.jsx)(m.p,{open:z,onOpenChange:D,folderId:s,availableProjects:M||[],workspaceId:null==F?void 0:F.id,totalProjectCount:(null==M?void 0:M.length)||0})]})}let em=e=>{let{isActive:s,isCollapsed:t,isExpanded:r,setIsExpanded:l}=e;return(0,a.jsxs)(u(),{href:"/dashboard/projects",className:(0,o.cn)("group flex h-[42px] w-full items-center rounded-xl text-sm hover:bg-muted",s&&"bg-muted"),children:[(0,a.jsx)("button",{onClick:e=>{t||(e.preventDefault(),e.stopPropagation(),l(!r))},className:"relative flex w-[42px] shrink-0 items-center justify-center",children:(0,a.jsxs)("div",{className:(0,o.cn)("relative flex h-6 w-6 items-center justify-center rounded-md",{"md:hover:bg-muted-hover":!t}),children:[(0,a.jsx)(f.A,{name:"projects",className:(0,o.cn)("absolute opacity-0 transition-all duration-300 ease-in-out group-hover:scale-[1.15] md:opacity-100",{"group-hover:opacity-0":!t,"group-hover:scale-[1.15]":t})}),(0,a.jsx)(f.A,{name:"chevron_right",size:"large",className:(0,o.cn)("absolute opacity-100 transition-all duration-300 ease-in-out md:opacity-0",{"rotate-90":r,"group-hover:opacity-100":!t})})]})}),!t&&(0,a.jsx)("span",{className:"flex-1 truncate",children:"All projects"})]})};function ep(e){var s;let{isCollapsed:t=!1}=e,n=(0,w.I)(),[i,d]=(0,l.useState)(!1),c=(0,x.j4)(e=>e.currentWorkspace),{folders:u,isLoading:m}=(0,g.ow)(null==c?void 0:c.id),{isLoading:p}=(0,ec.S)(),[h,j]=(0,l.useState)(null),b=(0,r.usePathname)(),N=i&&!m&&!p&&!!(null==c?void 0:c.id),[y,k]=(0,l.useState)(!1),C=y?u:null!=(s=null==u?void 0:u.slice(0,5))?s:[];return(0,l.useEffect)(()=>{(!i||t)&&k(!1)},[i,t]),(0,l.useEffect)(()=>{d(!1)},[t,d]),(0,a.jsx)(ei.Q,{showTooltip:t,tooltipContent:"All projects",side:"right",instant:!0,children:(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)(em,{isActive:"/dashboard/projects"===b,isCollapsed:t,isExpanded:N,setIsExpanded:d}),(0,a.jsx)(O.P.div,{initial:!1,animate:{height:N?"auto":0,opacity:+!!N},transition:{height:{duration:.2,ease:"easeInOut"},opacity:{duration:.12,ease:"easeInOut"}},className:"overflow-hidden",children:(0,a.jsxs)("div",{className:(0,o.cn)("mt-1 flex flex-col gap-1",{"mb-1":y}),children:[(0,a.jsxs)("div",{className:(0,o.cn)("relative ml-4 flex flex-col gap-0.5 border-l border-border pl-2"),children:[(0,a.jsx)(v.E,{permission:A.eZ.CreateFolders,children:(0,a.jsxs)("button",{onClick:n,className:"flex items-center gap-3 overflow-hidden rounded-lg px-3 py-1.5 text-sm transition-colors hover:bg-muted",children:[(0,a.jsx)(f.A,{name:"plus",size:"small"}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:"New folder"})]})}),C.length>0&&(0,a.jsx)(a.Fragment,{children:C.map(e=>(0,a.jsx)(eu,{id:e.id,name:e.name,color:e.color,href:"/dashboard/projects/folders/".concat(e.id),isActive:b==="/dashboard/projects/folders/".concat(e.id),workspaceId:null==c?void 0:c.id,isOpen:h===e.id,onOpenChange:s=>j(s?e.id:null)},e.id))})]}),(null==u?void 0:u.length)>5&&!y&&(0,a.jsx)("button",{onClick:()=>k(!y),className:"ml-6 flex items-center gap-3 rounded-lg px-3 py-1.5 text-sm text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",children:"See all"})]})})]})})}function ex(e){let{title:s,iconName:t,href:r,onClick:l,isActive:n=!1,className:i,comingSoon:d=!1,shortcut:c,isCollapsed:m=!1}=e,p=(0,o.cn)("group/item flex h-[42px] w-[224px] items-center overflow-x-clip whitespace-nowrap rounded-xl text-sm transition-[width] duration-200 ease-linear hover:bg-muted",{"bg-muted":n,"w-[42px]":m},i),x=null==r?void 0:r.startsWith("http"),h=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:(0,o.cn)("flex h-[42px] w-[42px] shrink-0 items-center justify-center transition-transform",{"group-hover/item:scale-[1.15]":m}),children:(0,a.jsx)(f.A,{name:t})}),(0,a.jsx)("span",{className:(0,o.cn)("overflow-hidden whitespace-nowrap transition-opacity duration-150",{"opacity-0":m}),children:s}),c&&(0,a.jsx)("kbd",{className:"ml-auto mr-2 px-1.5 py-px text-sm leading-normal text-muted-foreground opacity-0 transition-opacity duration-150 group-hover/sidebar:opacity-100",children:c}),d&&(0,a.jsx)("span",{className:(0,o.cn)("ml-2 rounded-lg bg-muted-hover/50 px-2 py-px text-xs leading-normal text-muted-foreground",{"opacity-0":m}),children:"Soon"}),x&&(0,a.jsx)(f.A,{name:"arrow_up_right",size:"small",className:"ml-auto mr-2 shrink-0 opacity-0 transition-opacity duration-150 group-hover/item:opacity-100"})]}),g=r?(0,a.jsx)(u(),{href:r,className:p,target:x?"_blank":void 0,onClick:l,children:h}):(0,a.jsx)("button",{onClick:l,className:p,children:h});return(0,a.jsx)(ei.Q,{showTooltip:m,tooltipContent:s,side:"right",instant:!0,children:g})}let eh=e=>{let{title:s,isCollapsed:t,children:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:(0,o.cn)("flex h-[42px] items-center px-2 text-muted-foreground transition-opacity",{"opacity-0":t}),children:s}),r&&(0,a.jsx)("div",{className:"pointer-events-auto flex flex-col gap-1",children:r})]})},ef=e=>{let{isCollapsed:s}=e,t=(0,r.usePathname)(),l=(0,$.a)();return(0,a.jsx)(ei.Q,{showTooltip:s,tooltipContent:"Home",side:"right",instant:!0,children:(0,a.jsxs)(u(),{href:"/dashboard",className:(0,o.cn)("group/item flex h-[42px] w-[224px] items-center justify-between overflow-x-clip whitespace-nowrap rounded-xl text-sm transition-[width] duration-200 ease-linear hover:bg-muted"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:(0,o.cn)("flex h-[42px] w-[42px] shrink-0 items-center justify-center transition-transform",{"group-hover/item:scale-[1.15]":s}),children:(0,a.jsx)(f.A,{name:"home"})}),(0,a.jsx)("span",{className:(0,o.cn)("overflow-hidden whitespace-nowrap transition-opacity duration-150",{"opacity-0":s}),children:"Home"})]}),"/dashboard"!==t&&(!s||l)&&(0,a.jsx)(eo.Bc,{children:(0,a.jsx)(v.E,{permission:A.eZ.CreateWorkspaceProjects,children:(0,a.jsxs)(eo.m_,{children:[(0,a.jsx)(eo.k$,{asChild:!0,children:(0,a.jsx)(u(),{href:"/dashboard",className:"mr-2 flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border border-muted-border bg-card/70 opacity-0 transition-all duration-150 group-hover/sidebar:opacity-100 max-md:opacity-100",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(f.A,{name:"plus",size:"small"})})}),(0,a.jsx)(eo.ZI,{side:"right",children:(0,a.jsx)("p",{children:"Create project"})})]})})})]})})},eg=e=>{let{isCollapsed:s}=e,t=(0,$.a)(),{isMac:r}=(0,H.A)(),l=G(e=>e.open);return(0,a.jsx)(ex,{title:"Search",iconName:"search",onClick:l,shortcut:t?void 0:r?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(f.A,{name:"keyboard_command_key",className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:"K"})]}):"Ctrl+K",isCollapsed:s})};function ej(e){let{isCollapsed:s}=e,t=(0,r.usePathname)(),n=(0,i.Z8)(),d=(0,l.useRef)(null),[c,u]=(0,l.useState)(!1),m=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=d.current,s=m.current;if(!e||!s)return;let t=()=>{let s=e.scrollHeight>e.clientHeight,t=e.scrollHeight-e.scrollTop<=e.clientHeight+1;u(s&&!t)};t(),e.addEventListener("scroll",t),window.addEventListener("resize",t);let a=new ResizeObserver(t);return a.observe(s),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t),a.disconnect()}},[]),(0,a.jsxs)("div",{className:"relative min-h-0 flex-1",children:[(0,a.jsx)("nav",{ref:d,className:"h-full overflow-y-auto overflow-x-clip scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted-foreground/30",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",ref:m,children:[(0,a.jsxs)("div",{className:"pointer-events-auto flex flex-col gap-1",children:[(0,a.jsx)(ef,{isCollapsed:s}),(0,a.jsx)(eg,{isCollapsed:s})]}),(0,a.jsxs)(eh,{title:"Projects",isCollapsed:s,children:[(0,a.jsx)(ep,{isCollapsed:s}),(0,a.jsx)(ex,{title:"Starred",iconName:"star",href:"/dashboard/starred",isActive:"/dashboard/starred"===t,isCollapsed:s}),(0,a.jsx)(ex,{title:"Shared with me",iconName:"people",href:"/dashboard/shared-with-me",isActive:"/dashboard/shared-with-me"===t,isCollapsed:s})]}),(0,a.jsxs)(eh,{title:"Resources",isCollapsed:s,children:[n?(0,a.jsx)(ex,{title:"Discover",iconName:"compass",href:"/dashboard/discover",isActive:"/dashboard/discover"===t,isCollapsed:s,onClick:()=>{en.Ay.capture(ed.AC.CLICK,{destination:"discover"})}}):(0,a.jsx)(ex,{title:"Explore",iconName:"explore",href:"/dashboard/explore",isActive:"/dashboard/explore"===t,isCollapsed:s}),(0,a.jsx)(ex,{title:"Templates",iconName:"cube",comingSoon:!0,isCollapsed:s}),(0,a.jsx)(ex,{title:"Learn",iconName:"books",href:"https://docs.lovable.dev/introduction/welcome",isActive:"https://docs.lovable.dev/introduction/welcome"===t,isCollapsed:s})]})]})}),(0,a.jsx)("div",{className:(0,o.cn)("absolute -bottom-6 left-1/2 flex h-6 w-6 -translate-x-1/2 items-center justify-center opacity-100 transition-opacity duration-200 ease-linear",{"opacity-0":!c}),children:(0,a.jsx)(f.A,{name:"chevron_down",size:"small",className:"text-muted-foreground"})})]})}var ev=t(58419),eb=t(27458),eN=t(15365);function ew(e){let{className:s,isCollapsed:t,toggleCollapsed:r}=e,[n,i]=(0,l.useState)(!1),d=(0,eN.WW)();return(0,a.jsxs)("div",{className:(0,o.cn)("pointer-events-auto flex w-full items-center justify-between",s),children:[(0,a.jsxs)("div",{className:"group/logo relative",children:[(0,a.jsxs)(u(),{href:"/",className:"flex h-[42px] w-[42px] shrink-0 items-center justify-center rounded-lg p-2 hover:bg-muted",onClick:e=>{e.altKey&&d?(e.preventDefault(),e.stopPropagation(),i(!0)):t&&r&&(e.preventDefault(),e.stopPropagation(),r())},children:[(0,a.jsx)(eb.Fy,{className:(0,o.cn)("h-6 w-6 shrink-0",t&&"group-hover/logo:opacity-0")}),t&&(0,a.jsx)(f.A,{name:"sidebar_open",size:"default",className:"absolute inset-0 m-auto cursor-e-resize opacity-0 transition-transform duration-200 group-hover/logo:scale-[1.15] group-hover/logo:opacity-100"})]}),d&&(0,a.jsx)(ev.A,{open:n,setOpen:i})]}),(0,a.jsx)("div",{className:"hidden transition-opacity delay-100 duration-100 group-data-[collapsed=true]/sidebar:pointer-events-none group-data-[collapsed=true]/sidebar:opacity-0 group-data-[collapsed=true]/sidebar:delay-0 group-data-[collapsed=true]/sidebar:duration-0 md:block",children:(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:"group/toggle h-[42px] w-[42px] cursor-w-resize rounded-lg hover:bg-muted",onClick:r,children:(0,a.jsx)(f.A,{name:"sidebar_closed",size:"default",className:"transform text-muted-foreground duration-200 group-hover/toggle:scale-[1.15]"})})})]})}var ey=t(53986),ek=t(40702),eC=t(47679),eA=t(28717),eS=t(83548),e_=t(51762),eE=t(50344),eP=t(47226),eI=t(35711);let eO="gap-2 px-3 py-2 focus:bg-muted",ez=()=>(0,a.jsx)("div",{className:"absolute flex items-center gap-2 transition-transform duration-300 group-data-[collapsed=true]/sidebar:-translate-y-12",children:(0,a.jsx)("div",{className:"flex h-10 w-[42px] items-center justify-center",children:(0,a.jsx)(eP.E,{className:"h-8 w-8 rounded-full border-border"})})});function eD(){var e,s;let{authUser:t}=(0,ek.Z2)(),{userData:r}=(0,eA.ur)(),n=(0,x.j4)(e=>{var s;return null==(s=e.currentWorkspace)?void 0:s.plan}),[i]=(0,eI.I)(),{openSettings:d}=(0,eC.t)(),c=(0,e_.f)(ey.E),m=(0,l.useCallback)(()=>{document.cookie="forceOldDashboard=true; path=/; max-age=".concat(63072e3,"; SameSite=Lax; Secure"),window.location.href="/"},[]),p=(0,l.useCallback)(()=>{en.Ay.capture(ed.h6.OPENED_DIALOG,{button_used:"dashboard-sidebar"}),c({childProps:{onSuccess:()=>c(!1)}})},[c]),h="enterprise"===(0,j.m6)(n),g=(0,l.useCallback)(async()=>{await i()},[i]);return r&&t&&n?(0,a.jsxs)(b.rI,{children:[(0,a.jsx)(b.ty,{asChild:!0,children:(0,a.jsx)("div",{className:"group pointer-events-auto absolute flex h-[42px] w-[42px] cursor-pointer items-center justify-center rounded-lg transition-transform duration-300 data-[state=open]:bg-muted group-data-[collapsed=true]/sidebar:-translate-y-12 hover:bg-muted",children:(0,a.jsx)("div",{className:"flex w-fit",children:(0,a.jsx)(eS.O,{userData:r,authUser:t,className:"size-8 transform border border-muted duration-200 group-hover:scale-105"})})})}),(0,a.jsxs)(b.SQ,{align:"start",side:"top",sideOffset:12,alignOffset:4,className:"w-[220px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 border-b px-3 py-2 pb-3",children:[(0,a.jsx)(eS.O,{userData:r,authUser:t,className:"size-8 shrink-0 border border-muted"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"truncate text-sm font-medium",children:(null==(e=r.attributes)?void 0:e.display_name)||t.email}),(null==(s=r.attributes)?void 0:s.display_name)&&(0,a.jsx)("p",{className:"truncate text-xs text-muted-foreground",children:t.email})]})]}),(0,a.jsxs)(b._2,{onClick:()=>d("account"),className:eO,children:[(0,a.jsx)(f.A,{name:"cog"}),(0,a.jsx)("span",{children:"Settings"})]}),(0,a.jsx)(eE.H,{className:(0,o.cn)(eO,"data-[state=open]:bg-muted"),iconSize:"default",useV2:!0}),(0,a.jsx)(b._2,{onSelect:e=>{e.preventDefault(),m()},className:(0,o.cn)(eO,"justify-between"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{name:"info_circle",className:"w-4"}),(0,a.jsx)("span",{children:"Legacy dash"})]})}),(0,a.jsx)(b._2,{asChild:!0,children:(0,a.jsxs)(u(),{href:"/support",className:"flex w-full items-center ".concat(eO),children:[(0,a.jsx)(f.A,{name:"question_circle"}),(0,a.jsx)("span",{children:"Help center"})]})}),!h&&(0,a.jsxs)(b._2,{onClick:p,className:eO,children:[(0,a.jsx)(f.A,{name:"gift"}),(0,a.jsx)("span",{children:"Earn credits"})]}),(0,a.jsxs)(b._2,{onClick:g,className:eO,children:[(0,a.jsx)(f.A,{name:"sign_out"}),(0,a.jsx)("span",{children:"Sign out"})]})]})]}):(0,a.jsx)(ez,{})}var eL=t(49493),eT=t(57841),eF=t(19525),eR=t(25080),eW=t(76538),eM=t(79652);function eB(e){let{workspaces:s,currentWorkspace:t,onWorkspaceSelect:r,onCreateWorkspace:n}=e,[i,o]=(0,l.useState)(!0),d=(0,l.useRef)(null),c=(0,l.useCallback)(()=>{if(d.current){let{scrollTop:e,scrollHeight:s,clientHeight:t}=d.current;o(!(s-e-t<1))}},[]);return((0,l.useEffect)(()=>{c()},[s,c]),0===s.length)?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(b._2,{onClick:n,children:[(0,a.jsx)("div",{className:"flex h-[26px] w-[26px] items-center justify-center rounded-[8px] bg-muted",children:(0,a.jsx)(f.A,{name:"plus",size:"small"})}),(0,a.jsx)("span",{children:"Create new workspace"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center justify-between px-3 py-1.5",children:(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"All workspaces"})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{ref:d,onScroll:c,className:"flex max-h-[140px] w-full flex-col overflow-y-auto",style:s.length>3&&i?{maskImage:"linear-gradient(to bottom, black 0%, black calc(100% - 1.5rem), transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 0%, black calc(100% - 1.5rem), transparent 100%)"}:void 0,children:s.map(e=>(0,a.jsx)(eM.v,{workspace:e,onSelect:()=>r(e),selected:t.id===e.id},e.id))})}),(0,a.jsx)(b.mB,{}),(0,a.jsxs)(b._2,{onClick:n,children:[(0,a.jsx)("div",{className:"flex h-[26px] w-[26px] items-center justify-center rounded-[8px] bg-muted",children:(0,a.jsx)(f.A,{name:"plus",size:"small"})}),(0,a.jsx)("span",{children:"Create new workspace"})]})]})}let eU=e=>{let{isInNavbar:s}=e;return s?(0,a.jsx)(eP.E,{className:"h-10 w-10 rounded-lg"}):(0,a.jsx)("div",{className:"pointer-events-auto flex h-auto w-full items-center justify-start overflow-x-clip rounded-xl border border-border px-0 py-2 pr-2 md:pr-0",children:(0,a.jsxs)("span",{className:"flex max-w-40 items-center gap-1.5 whitespace-nowrap group-data-[collapsed=true]/sidebar:w-full md:w-[224px] md:max-w-[unset]",children:[(0,a.jsx)("span",{className:"-mr-2 flex w-10 shrink-0 justify-center",children:(0,a.jsx)(eP.E,{className:"h-6 w-6 rounded-xl"})}),(0,a.jsx)(eP.E,{className:"h-4 w-24 rounded group-data-[collapsed=true]/sidebar:hidden"}),(0,a.jsxs)("span",{className:"hidden shrink-0 grow items-center gap-1.5 pr-2 group-data-[collapsed=true]/sidebar:hidden md:flex",children:[(0,a.jsx)(eP.E,{className:"h-4 w-8 rounded"}),(0,a.jsx)(eP.E,{className:"ml-auto h-4 w-4 flex-shrink-0"})]})]})})};function eV(e){let{isCollapsed:s,isInNavbar:t}=e,r=(0,$.a)(),n=(0,x.j4)(e=>e.currentWorkspace),i=(0,eL.Mu)(e=>e.workspaces),d=(0,x.j4)(e=>e.hasFetchedCurrentWorkspace),c=null!=n?n:i[0],{memberCount:u}=(0,eR.yj)({workspaceId:(null==c?void 0:c.id)||"",status:"active"}),m=(0,x.j4)(e=>e.membership),{openSettings:p}=(0,eC.t)(),{setCurrentWorkspaceId:g}=(0,x.Dx)(),v=(0,R.jE)(),N=(0,l.useCallback)(e=>{var s;let t=Q.y.detail({workspaceId:e.id,projectId:void 0}).queryKey,a=v.getQueryData(t);v.setQueryData(t,{workspace:e,is_member:!0,current_member:null!=(s=null==a?void 0:a.current_member)?s:null}),g(e.id)},[g,v]),w=(0,eL.Mu)(e=>e.setShowCreateWorkspaceDialog);return d&&c?(0,a.jsxs)(b.rI,{modal:!1,children:[(0,a.jsx)(b.ty,{asChild:!0,children:t?(0,a.jsx)(h.$,{variant:"ghost",className:(0,o.cn)("pointer-events-auto","h-auto w-auto justify-center rounded-full border-0 p-0 hover:bg-transparent"),"aria-label":"Workspace menu",children:(0,a.jsx)(eT.z,{workspace:c,className:"h-10 w-10 flex-shrink-0"})}):(0,a.jsx)(h.$,{variant:"ghost",className:(0,o.cn)("pointer-events-auto transition-transform duration-300","h-auto w-full justify-start overflow-x-clip rounded-xl border border-border px-0 pr-2 hover:bg-muted md:pr-0"),"aria-label":"Workspace menu",children:(0,a.jsxs)("span",{className:"flex max-w-40 items-center gap-1.5 whitespace-nowrap group-data-[collapsed=true]/sidebar:w-full group-data-[dragging=true]/sidebar:w-full md:w-[224px] md:max-w-[unset]",children:[(0,a.jsx)("span",{className:"-mr-2 flex w-10 shrink-0 justify-center",children:(0,a.jsx)(eT.z,{workspace:c,className:"h-6 w-6 flex-shrink-0"})}),(0,a.jsx)("p",{className:"truncate text-sm transition-opacity duration-100 group-data-[collapsed=true]/sidebar:pointer-events-none group-data-[collapsed=true]/sidebar:opacity-0",children:c.name}),(0,a.jsx)("span",{className:"hidden shrink-0 grow items-center gap-1.5 pr-2 transition-opacity duration-100 group-data-[collapsed=true]/sidebar:pointer-events-none group-data-[collapsed=true]/sidebar:opacity-0 md:flex",children:(0,a.jsx)(f.A,{name:"chevron_down",size:"large",className:"ml-auto flex-shrink-0"})})]})})}),(0,a.jsx)(b.SQ,{className:"max-h-[calc(100vh-64px)] w-[250px] overflow-y-auto",align:t?"end":"start",alignOffset:!r&&s?70:t?0:-13,sideOffset:t?8:s?-42:8,avoidCollisions:!1,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"px-3 py-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(eT.z,{workspace:c,className:"h-10 w-10"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:c.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,j._R)(c.plan)," Plan",u>0&&(0,a.jsxs)(a.Fragment,{children:[" ","• ",u," ",1===u?"member":"members"]})]})]})]}),(0,a.jsxs)("div",{className:"mt-2 flex gap-1.5",children:[(0,a.jsxs)(h.$,{variant:"secondary",size:"sm",onClick:()=>p("workspace"),className:"h-7 flex-1 justify-center gap-1.5 px-2 text-xs",children:[(0,a.jsx)(f.A,{name:"cog",size:"xsmall"}),(0,a.jsx)("span",{children:"Settings"})]}),(0,a.jsxs)(h.$,{variant:"secondary",size:"sm",onClick:()=>p("people"),className:"h-7 flex-1 justify-start gap-1.5 px-2 text-xs",children:[(0,a.jsx)(f.A,{name:"person_plus",size:"xsmall"}),"Invite members"]})]})]}),(null==c?void 0:c.plan)!=="enterprise"&&(null==c?void 0:c.plan)!=="inactive"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.mB,{className:"mx-0"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(eW.A,{plan:null==c?void 0:c.plan,withWrapper:!0,onClick:()=>{en.Ay.capture(ed.lY.UPGRADE.BUTTON_CLICKED.ACCOUNT_DROPDOWN,{context:ed.lY.UPGRADE.CONTEXT.BILLING})}})}),(0,a.jsx)("div",{className:"flex flex-col pt-1",children:(0,a.jsx)(eF.m,{workspace:c,membership:m})})]}),(0,a.jsx)(b.mB,{className:"mx-0"}),(0,a.jsx)(eB,{workspaces:i,currentWorkspace:c,onWorkspaceSelect:N,onCreateWorkspace:()=>{w(!0)}})]})})]}):(0,a.jsx)(eU,{isInNavbar:t})}function eH(e){let{isCollapsed:s}=e,[t,n]=(0,l.useState)(s),[i,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(t?91:273),p=(0,$.a)(),x=(0,r.usePathname)(),h=(0,et.d)(t?91:273),g=(0,l.useCallback)(()=>{n(!t)},[t]);(0,ea.L)(h,"change",e=>{m(e)}),(0,l.useEffect)(()=>{h.set(t?91:273),document.cookie="".concat("is_sidebar_collapsed","=").concat(t,"; path=/; max-age=").concat(63072e3,"; SameSite=Lax; Secure")},[t,h]),(0,l.useEffect)(()=>{d(!1)},[x]);let j=!p&&t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,o.cn)("pointer-events-none fixed inset-0 z-20 bg-black/20 opacity-0 transition-opacity duration-200 ease-out md:hidden",i&&"pointer-events-auto opacity-100"),onClick:()=>d(!1)}),(0,a.jsxs)("div",{className:"sticky top-0 z-30 flex items-center justify-between bg-background/90 p-4 py-3 backdrop-blur-sm md:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("button",{type:"button",className:"",onClick:()=>d(!0),children:(0,a.jsx)(f.A,{name:"menu",size:"large"})}),(0,a.jsx)(u(),{href:"/",className:"shrink-0",children:(0,a.jsx)(er.A,{})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(el.R,{align:"end",sideOffset:8,alignOffset:-8,className:"h-[42px] w-[42px]"}),(0,a.jsx)(eV,{isInNavbar:!0,isCollapsed:j})]})]}),(0,a.jsxs)(O.P.aside,{className:(0,o.cn)("group/sidebar fixed inset-y-0 z-30 flex h-screen flex-shrink-0 flex-col gap-2 border-r border-muted bg-card/70 p-6 backdrop-blur-[48px] md:sticky","transition-[width] duration-200 ease-linear",p&&"transition-transform duration-200 ease-out data-[open=false]:-translate-x-full data-[open=true]:translate-x-0"),"data-collapsed":j,"data-open":i,style:{width:p?273:h,"--sidebar-width":"".concat(c,"px")},children:[(0,a.jsx)("div",{className:(0,o.cn)("absolute inset-0 hidden w-[calc(100%-2px)] md:block",j?"cursor-e-resize":"cursor-w-resize"),onClick:g}),(0,a.jsxs)("div",{className:"pointer-events-none relative z-[1] flex h-full max-h-screen flex-shrink-0 flex-col gap-2 overflow-x-visible",children:[(0,a.jsx)(ew,{isCollapsed:j,toggleCollapsed:g}),(0,a.jsx)("div",{className:"hidden items-center gap-2 md:flex",children:(0,a.jsx)(eV,{isCollapsed:j})}),(0,a.jsx)(ej,{isCollapsed:j}),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)(eD,{}),(0,a.jsx)("div",{className:"flex grow justify-end",children:(0,a.jsx)("div",{className:"pointer-events-auto flex w-[42px] justify-center",children:(0,a.jsx)(el.R,{align:"start",side:"top",sideOffset:-42,alignOffset:p?-190:54,avoidCollisions:!1,className:"h-[42px] w-[42px]"})})})]})]})]})]})}let e$=e=>{let{children:s,isCollapsed:t}=e,c=(0,r.usePathname)(),u=(0,r.useRouter)(),m=(0,i.vD)();return((0,l.useEffect)(()=>{if(void 0!==m){let e=m?"true":"false";document.cookie="dashboardV2Enabled=".concat(e,"; path=/; max-age=").concat(63072e3,"; SameSite=Lax; Secure")}},[m]),(0,l.useEffect)(()=>{m||u.push("/")},[m,u]),m)?(0,a.jsxs)(d.n,{children:[(0,a.jsx)(es,{}),(0,a.jsxs)("div",{className:"relative flex h-full flex-col",children:[(0,a.jsx)(n.N,{className:"relative z-50"}),(0,a.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col gap-x-4 md:flex-row",children:[(0,a.jsx)(eH,{isCollapsed:t}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,a.jsx)(E,{}),(0,a.jsx)("main",{className:(0,o.cn)("relative flex-1 rounded-xl pl-4 pr-4 md:pl-0",{"overflow-scroll":"/dashboard"!==c}),children:(0,a.jsx)("div",{className:"relative z-10 h-full",children:s})})]})]})]})]}):(0,a.jsx)(a.Fragment,{})}},64614:(e,s,t)=>{"use strict";t.d(s,{v:()=>m});var a=t(77145),r=t(95661),l=t(83220),n=t(8223),i=t(52811),o=t(20247),d=t(6397),c=t(85628),u=t(85394);function m(e){let{folder:s,open:t,onOpenChange:m}=e,p=(0,l.j4)(e=>e.currentWorkspace),x=(0,c.HP)(null==p?void 0:p.id),[h,f]=(0,r.useState)(s.name),[g,j]=(0,r.useState)(s.color||null),[v,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{f(s.name),j(s.color||null),b(null)},[s]);let N=async e=>{e.preventDefault();let t=(0,u.SS)(h);if(!t.isValid)return void b(t.error||"Invalid folder name");let a={};h.trim()!==s.name&&(a.name=h.trim()),g!==s.color&&(a.color=g),Object.keys(a).length>0&&await x.mutateAsync({folderId:s.id,data:a}),m(!1)};return(0,a.jsx)(o.lG,{open:t,onOpenChange:m,children:(0,a.jsx)(o.Cf,{className:"!w-[360px] !max-w-[360px] p-6",size:"sm",children:(0,a.jsxs)("form",{onSubmit:N,children:[(0,a.jsxs)(o.c7,{className:"mb-5",children:[(0,a.jsx)(o.L3,{className:"text-2xl",children:"Edit folder"}),(0,a.jsx)(o.rr,{className:"text-sm",children:"Make changes to your folder"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.y,{color:g,onChange:j}),(0,a.jsx)(d.p,{id:"edit-name",value:h,onChange:e=>{let s=e.target.value;f(s);let t=(0,u.SS)(s);b(t.isValid?null:t.error||null)},placeholder:"e.g. Side Projects",maxLength:u.pm,required:!0,autoFocus:!0,className:"h-11 !rounded-xl pl-12 text-base ".concat(v?"border-red-500":"")})]}),v&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:v}),!v&&h.length>.8*u.pm&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[h.length,"/",u.pm," characters"]})]})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>{f(s.name),j(s.color||null),b(null),m(!1)},disabled:x.isPending,className:"h-10 flex-1 border-border text-base hover:border-border hover:bg-muted/50",children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:!h.trim()||!!v||x.isPending,className:"h-10 flex-1 text-base",children:x.isPending?"Saving...":"Save"})]})]})})})}},72566:(e,s,t)=>{"use strict";t.d(s,{I:()=>x});var a=t(77145),r=t(13410),l=t(95661),n=t(83220),i=t(8223),o=t(51762),d=t(52811),c=t(20247),u=t(6397),m=t(85628),p=t(85394);let x=()=>{let e=(0,o.f)(h),s=(0,l.useCallback)(()=>{e(!1)},[e]);return(0,l.useCallback)(()=>{e({childProps:{onClose:s}})},[e,s])};function h(e){let{onClose:s}=e,t=(0,r.useRouter)(),o=(0,n.j4)(e=>e.currentWorkspace),x=(0,m.Si)(null==o?void 0:o.id),[h,f]=(0,l.useState)(""),[g,j]=(0,l.useState)(null),[v,b]=(0,l.useState)(null),N=async e=>{e.preventDefault();let a=(0,p.SS)(h);if(!a.isValid)return void b(a.error||"Invalid folder name");let r=await x.mutateAsync({name:h.trim(),color:g});t.push("/dashboard/projects/folders/".concat(r.id)),f(""),j(null),b(null),s()};return(0,a.jsx)(c.Cf,{className:"!w-[360px] !max-w-[360px] p-6",size:"sm",children:(0,a.jsxs)("form",{onSubmit:N,children:[(0,a.jsxs)(c.c7,{className:"mb-5",children:[(0,a.jsx)(c.L3,{className:"text-2xl",children:"Create folder"}),(0,a.jsx)(c.rr,{className:"text-sm",children:"Group related projects together"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.y,{color:g,onChange:j}),(0,a.jsx)(u.p,{id:"name",value:h,onChange:e=>{let s=e.target.value;f(s);let t=(0,p.SS)(s);b(t.isValid?null:t.error||null)},placeholder:"e.g. Side Projects",maxLength:p.pm,required:!0,autoFocus:!0,className:"h-11 !rounded-xl pl-12 text-base ".concat(v?"border-red-500":"")})]}),v&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:v}),!v&&h.length>.8*p.pm&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[h.length,"/",p.pm," characters"]})]})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>{f(""),j(null),b(null),s()},disabled:x.isPending,className:"h-10 flex-1 border-border text-base hover:border-border hover:bg-muted/50",children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",disabled:!h.trim()||!!v||x.isPending,className:"h-10 flex-1 text-base",children:x.isPending?"Creating...":"Create"})]})]})})}},79400:(e,s,t)=>{"use strict";t.d(s,{H:()=>a,f:()=>r});let a=()=>{var e;(null==(e=window.DelveCookieConsent)?void 0:e.init)&&window.DelveCookieConsent.init({message:"We use cookies to enhance your development experience and keep your data secure.",privacyPolicyUrl:"https://lovable.dev/privacy",settingsText:"Cookie Settings",manageScriptTags:!0,categories:{necessary:{enabled:!0,cookieTable:{cookies:[{name:"delve_cookie_consent",purpose:"Stores your cookie preferences",duration:"1 year"},{name:"session_id",purpose:"Keeps you logged in",duration:"Session"},{name:"csrf_token",purpose:"Security protection",duration:"Session"}]}},analytics:{enabled:!1,cookieTable:{cookies:[{name:"_ga*",purpose:"Google Analytics - Distinguishes users",duration:"2 years"},{name:"_gid",purpose:"Google Analytics - Session identification",duration:"24 hours"},{name:"_gat",purpose:"Google Analytics - Throttles request rate",duration:"1 minute"},{name:"analytics_session",purpose:"Custom analytics session",duration:"Session"}]}},marketing:{enabled:!1,cookieTable:{cookies:[{name:"_fbp*",purpose:"Facebook Browser Pixel",duration:"3 months"},{name:"_fbc*",purpose:"Facebook Click ID",duration:"7 days"},{name:"_gcl_au",purpose:"Google Ads attribution",duration:"90 days"},{name:"utm_*",purpose:"UTM tracking parameters",duration:"Session"}]}},preferences:{enabled:!1,cookieTable:{cookies:[{name:"theme_*",purpose:"UI theme preferences",duration:"1 year"},{name:"lang_*",purpose:"Language preferences",duration:"1 year"},{name:"user_prefs",purpose:"General user settings",duration:"1 year"}]}}},onAccept:e=>{console.log("✅ Cookies accepted:",e)},onReject:()=>{console.log("❌ Non-essential cookies rejected")},onChange:e=>{console.log("⚙️ Cookie preferences changed:",e)}})},r=()=>{var e;(null==(e=window.DelveCookieConsent)?void 0:e.show)?window.DelveCookieConsent.show():console.error("Cookie consent manager not available")}},82782:(e,s,t)=>{"use strict";t.d(s,{l:()=>a});let a=(0,t(84510).vt)(e=>({subTab:null,activeIntegrationId:null,setSubTab:(s,t)=>e({subTab:s,activeIntegrationId:t}),setActiveIntegrationId:s=>e({activeIntegrationId:s})}))},85394:(e,s,t)=>{"use strict";t.d(s,{SS:()=>l,pm:()=>a});let a=255,r=/^[^/\\:*?"<>|]+$/;function l(e){let s=e.trim();return s.length<1?{isValid:!1,error:"Folder name cannot be empty"}:s.length>a?{isValid:!1,error:"Folder name cannot exceed ".concat(a," characters")}:r.test(s)?{isValid:!0}:{isValid:!1,error:'Folder name contains invalid characters. Please avoid using / \\ : * ? " < > |'}}},85615:(e,s,t)=>{"use strict";t.d(s,{p:()=>u});var a=t(77145),r=t(95661),l=t(92866),n=t(52811),i=t(91604),o=t(20247),d=t(6397),c=t(85628);function u(e){let{open:s,onOpenChange:t,folderId:u,availableProjects:m,workspaceId:p,totalProjectCount:x=0}=e,[h,f]=(0,r.useState)([]),[g,j]=(0,r.useState)(""),v=(0,c._U)(p),b=m.filter(e=>{var s;return null==(s=e.name)?void 0:s.toLowerCase().includes(g.toLowerCase())}),N=async()=>{0!==h.length&&(await v.mutateAsync({folderId:u,projectIds:h}),f([]),j(""),t(!1))},w=e=>{f(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},y=()=>{f([]),j(""),t(!1)};return(0,a.jsx)(o.lG,{open:s,onOpenChange:y,children:(0,a.jsxs)(o.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(o.c7,{children:[(0,a.jsx)(o.L3,{children:"Add projects to folder"}),(0,a.jsx)(o.rr,{children:"Select projects to add to this folder. A project can only be in one folder at a time."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(d.p,{placeholder:"Search projects...",value:g,onChange:e=>j(e.target.value),className:"w-full"}),(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:0===b.length?(0,a.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:g?"No projects found matching your search":0===x?"No projects in this workspace yet":"All projects are already in a folder"}):(0,a.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,a.jsxs)("div",{className:"grid cursor-pointer grid-cols-[96px_1fr_20px] items-center gap-3 rounded-lg border p-3 transition-all ".concat(h.includes(e.id)?"border-primary bg-primary/5 ring-1 ring-primary/20":"border-border hover:bg-muted/50"),onClick:()=>w(e.id),children:[(0,a.jsx)(l.J,{project:e,className:"h-16 w-24",imageClassName:"border-none"}),(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsx)("h4",{className:"truncate font-medium",children:e.display_name||e.name}),e.display_name&&e.name&&(0,a.jsx)("p",{className:"truncate text-sm text-muted-foreground",children:e.name})]}),(0,a.jsx)(i.S,{checked:h.includes(e.id),onCheckedChange:()=>w(e.id),onClick:e=>e.stopPropagation(),className:"h-4 w-4"})]},e.id))})})]}),(0,a.jsxs)(o.Es,{children:[(0,a.jsx)(n.$,{variant:"outline",onClick:y,children:"Cancel"}),(0,a.jsx)(n.$,{onClick:N,disabled:0===h.length||v.isPending,children:v.isPending?"Adding...":"Add ".concat(h.length," project").concat(1!==h.length?"s":"")})]})]})})}},86386:(e,s,t)=>{"use strict";t.d(s,{F:()=>i});var a=t(77145),r=t(8250),l=t(95661),n=t(56024);let i=l.forwardRef((e,s)=>{let{className:t,children:l,viewportRef:i,...d}=e;return(0,a.jsxs)(r.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",t),...d,children:[(0,a.jsx)(r.LM,{ref:i,className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(o,{}),(0,a.jsx)(r.OK,{})]})});i.displayName=r.bL.displayName;let o=l.forwardRef((e,s)=>{let{className:t,orientation:l="vertical",...i}=e;return(0,a.jsx)(r.VM,{ref:s,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-px","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-px",t),...i,children:(0,a.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=r.VM.displayName},89781:(e,s,t)=>{"use strict";t.d(s,{Q:()=>c,n:()=>d});var a=t(77145),r=t(18502),l=t(95661),n=t(83220),i=t(99989);let o=(0,l.createContext)(null);function d(e){let{children:s}=e,t=(0,n.j4)(e=>e.currentWorkspace),{data:l,isLoading:d}=(0,r.I)({...i.y.projectCounts({workspaceId:null==t?void 0:t.id}),enabled:!!(null==t?void 0:t.id)});return(0,a.jsx)(o.Provider,{value:{counts:l,isLoading:d},children:s})}function c(){let e=(0,l.useContext)(o);if(!e)throw Error("useProjectCountsContext must be used within ProjectCountsProvider");return e}},96746:(e,s,t)=>{"use strict";t.d(s,{AnnouncementDialogSelector:()=>j});var a=t(77145),r=t(92912),l=t(95661),n=t(50514),i=t(40702),o=t(83220),d=t(214),c=t(15822),u=t(30849),m=t(67844),p=t(52811),x=t(20247),h=t(69730);let f=[{icon:"color_swatch",title:"Introducing Themes",description:"Customize your app's look easier than ever."},{icon:"pointer_dashed_square",title:"All-new Visual edits",description:"Quick access to all the editing tools you need and improved content editing."},{icon:"image",title:"AI-generated images",description:"Generate and edit images with AI in Visual edits."}],g=[{key:"themes-visual-edits-announcement",Component:e=>{let{isOpen:s,onOpenChange:t,onClose:r}=e;return(0,a.jsx)(x.lG,{open:s,onOpenChange:t,children:(0,a.jsx)(x.Cf,{className:"overflow-hidden rounded-3xl border-none bg-background p-0",style:{width:"45rem",maxWidth:"95vw"},hideCloseButton:!0,children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"m-4 hidden w-2/5 overflow-hidden rounded-xl border bg-cover md:flex md:items-center md:justify-center",children:(0,a.jsx)(u.default,{src:"/img/announcements/themes-release.webp",alt:"Themes and Visual Edits",width:720,height:1019,className:"h-full object-cover"})}),(0,a.jsxs)("div",{className:"relative flex w-full flex-col p-8 text-card-foreground md:w-3/5 md:pl-4",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(x.c7,{className:"gap-0",children:[(0,a.jsx)(m.E,{variant:"brand-twilight",className:"w-fit rounded-full px-4 py-1.5 text-sm",children:"New"}),(0,a.jsx)(x.L3,{className:"flex items-center gap-2 text-2xl font-medium leading-tight text-card-foreground",children:"New ways to customize your app"}),(0,a.jsx)("p",{className:"mt-2 text-base text-muted-foreground",children:"We've added powerful new theming capabilities and some great enhancements to Visual edits."})]})}),(0,a.jsx)("div",{className:"flex flex-col gap-3",children:f.map(e=>(0,a.jsxs)("div",{className:"flex min-h-14 items-start justify-start gap-4",children:[(0,a.jsx)("div",{className:"mt-1 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-secondary",children:(0,a.jsx)(h.A,{name:e.icon,size:"small",className:"text-secondary-foreground"})}),(0,a.jsxs)("div",{className:"flex h-full flex-col gap-0.5 py-0.5",children:[(0,a.jsx)("h3",{className:"text-base font-medium leading-tight text-card-foreground",children:e.title}),(0,a.jsx)("p",{className:"text-sm leading-tight text-muted-foreground",children:e.description})]})]},e.title))})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-3 pt-4 md:mt-0",children:[(0,a.jsx)(p.$,{onClick:()=>window.open("https://lovable.dev/blog/mcp-servers","_blank","noopener,noreferrer"),variant:"secondary",className:"flex-1",children:"Learn more"}),(0,a.jsx)(p.$,{variant:"default",className:"flex-1",onClick:r,children:"Got it"})]})]})]})})})},shouldShow:()=>!0,disabled:!1}].filter(e=>!e.disabled),j=()=>{let e=(0,o.j4)(e=>e.currentWorkspace),[s,t]=(0,l.useState)(!1),[u,m]=(0,l.useState)(null),[p,x]=(0,l.useState)(!1),{isAuthenticated:h}=(0,i.Z2)(),f=(0,l.useRef)(!1),j=(0,l.useMemo)(()=>e?"seen_announcements_".concat(e.id):"",[e]),[v,b]=(0,n.A)(j,{defaultValue:{}}),N=(0,d.ZG)();(0,l.useEffect)(()=>{x(!0)},[]),(0,l.useEffect)(()=>{if(p&&h&&e&&!c.W&&!f.current)for(let a of g){var s;let l=null!=(s=null==v?void 0:v[a.key])&&s;if("themes-visual-edits-announcement"===a.key&&!N)continue;let n=a.shouldShow({workspace:e});if(!l&&n){m(a.key),t(!0),r.Ay.capture("announcement:".concat(a.key,":shown"),{workspace:e.id});return}}},[p,h,e,v,N]);let w=s=>{t(s),!s&&e&&u&&(f.current=!0,b({...v,[u]:!0}))};if(!p||!h||!e||c.W||!u)return null;let y=g.find(e=>e.key===u);return y?(0,a.jsx)(y.Component,{isOpen:s,onOpenChange:w,onClose:()=>{w(!1)}}):null}},97385:(e,s,t)=>{"use strict";t.d(s,{LayoutBackground:()=>x});var a=t(77145),r=t(13410),l=t(18260);let n=e=>{let{opaque:s=!1}=e;return(0,a.jsx)("div",{className:"pointer-events-none fixed inset-0",style:{backgroundImage:"url(".concat(l.default.src,")"),backgroundSize:"100px 100px",backgroundRepeat:"repeat",opacity:s?.4:1,zIndex:1,backgroundBlendMode:"overlay",backgroundPosition:"left top",mixBlendMode:"overlay"}})};var i=t(71148),o=t(61035),d=t(95661),c=t(21016);let u=e=>{let{src:s,onLoad:t}=e,l=(0,c.A)("md"),n=(0,c.A)("sm"),i="/dashboard"===(0,r.usePathname)();return(0,d.useEffect)(()=>{let e=new Image;e.src=s,e.onload=()=>{null==t||t()}},[s,t]),(0,d.useMemo)(()=>n?"275% auto":i?l?"250% auto":"150% auto":l?"150% auto":"cover",[n,i,l]),(0,a.jsx)("div",{className:"absolute inset-0 w-full overflow-hidden",style:{backgroundImage:"url(".concat(s,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center top",height:"100vh",width:"100vw"}})},m=()=>{let[e,s]=(0,d.useState)(0),[t,r]=(0,d.useState)(!1),l=(0,o.D)();return(0,d.useEffect)(()=>{let e=()=>{s(e=>e+1),r(!1)};return window.addEventListener("restartBackgroundAnimation",e),()=>window.removeEventListener("restartBackgroundAnimation",e)},[]),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 w-full overflow-hidden",children:(0,a.jsx)(i.P.div,{className:"absolute inset-0 mt-0 blur-[10px]",...t?{initial:{opacity:0,y:"50vh"},animate:{opacity:.45,y:"0vh"},transition:{duration:1.1,ease:[.215,.61,.355,1]}}:{initial:{opacity:0,y:"50vh"}},children:(0,a.jsx)(u,{src:"/img/background/dash/".concat("dark"==l.resolvedTheme?"dark":"light",".webp"),onLoad:()=>r(!0)})},e)})};var p=t(214);function x(){let e=(0,r.usePathname)(),s=(0,p.b0)();return"/dashboard"!==e?null:s?(0,a.jsx)("div",{className:"pointer-events-none absolute left-0 top-8 flex h-screen w-full items-end bg-background"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{}),(0,a.jsx)("div",{className:"pointer-events-none absolute left-0 top-8 flex h-screen w-full items-end",children:(0,a.jsx)("div",{className:"z-[1] mt-12 h-96 w-full bg-gradient-to-b from-transparent to-background to-90%"})}),(0,a.jsx)(n,{opaque:!0})]})}}},e=>{e.O(0,[4197,5890,8888,5220,4397,5472,2247,3841,7172,9995,1240,2195,2598,1410,6753,2670,8922,8352,5222,4718,3995,6419,4026,6415,9045,4041,9792,8038,7908,3279,9190,1148,9898,1537,6926,9473,3071,2140,8563,4251,4791,675,7739,9730,3851,5861,5200,7380,3161,9241,9980,8463,4021,3068,8419,4179,5349,7127,1689,7358],()=>e(e.s=48285)),_N_E=e.O()}]);