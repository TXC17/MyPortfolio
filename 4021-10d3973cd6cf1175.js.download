try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{})["__faroBundleId_gptengineer-app"]="17638416719484a12ecf001"}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4021],{2074:(e,t,r)=>{"use strict";r.d(t,{MD:()=>o,U2:()=>s,eo:()=>a,yB:()=>n});var s=function(e){return e.INTERNAL_TOOLS="internal_tools",e.WEBSITE="website",e.PERSONAL="personal",e.CONSUMER_APP="consumer_app",e.B2B_APP="b2b_app",e.PROTOTYPE="prototype",e}({});let a={internal_tools:"Internal Tools",website:"Website",personal:"Personal",consumer_app:"Consumer App",b2b_app:"B2B App",prototype:"Prototype"},n=Object.entries(a).map(e=>{let[t,r]=e;return[t,r]}),o={recent:"edit-time",remixes:"remixes",featured:"remixes"}},6676:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,x:()=>a});var s=r(63851);async function a(e){return(0,s.P)().delete("/projects/".concat(e))}async function n(e,t){let r=(0,s.P)();await r.put("/projects/".concat(e,"/move-to-workspace"),{workspace_id:t})}},24247:(e,t,r)=>{"use strict";r.d(t,{BX:()=>n,Yd:()=>d,g$:()=>o,lV:()=>c,sE:()=>l,td:()=>i,vV:()=>a});var s=r(63851);async function a(e,t){return(0,s.P)().post("/workspaces/".concat(e,"/folders"),t)}async function n(e){return(0,s.P)().get("/workspaces/".concat(e,"/folders"))}async function o(e,t,r){return(0,s.P)().patch("/workspaces/".concat(e,"/folders/").concat(t),r)}async function l(e,t){return(0,s.P)().delete("/workspaces/".concat(e,"/folders/").concat(t))}async function i(e,t,r){return(0,s.P)().post("/workspaces/".concat(e,"/folders/").concat(t,"/projects/batch"),{project_ids:r})}async function c(e,t,r){return(0,s.P)().delete("/workspaces/".concat(e,"/folders/").concat(t,"/projects"),{project_ids:r})}async function d(e,t){return(0,s.P)().get("/workspaces/".concat(e,"/folders/").concat(t,"/projects"))}},26800:(e,t,r)=>{"use strict";r.d(t,{B:()=>g});var s=r(77145),a=r(87299),n=r(6698),o=r(13410),l=r(95661),i=r(31088),c=r(83220),d=r(35385),u=r(52811),p=r(20247),m=r(69730),h=r(6397),x=r(83473),j=r(6676),f=r(69850),v=r(19695);let g=e=>{let{project:t,isOpen:r,onClose:g,hasActiveLock:b=!1}=e,[y,w]=(0,l.useState)(null),[_,N]=(0,l.useState)(!1),[C,k]=(0,l.useState)(""),P=(0,o.useRouter)(),E=(0,a.jE)(),A=(0,c.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),S=(0,n.n)({mutationFn:async()=>(0,j.x)(t.id),onSuccess:e=>{if(E.invalidateQueries({queryKey:f.gO.all}),E.invalidateQueries({queryKey:f.workspaceKeys.detail(A||"")}),e.deleting_repo)i.toast.success("Project deleted",{description:"Your project has been deleted."}),P.push("/");else{var r;t.github_repo_name&&(null==(r=t.github_owner)?void 0:r.name)?P.push("/?deleted=true&projectName=".concat(encodeURIComponent(t.github_repo_name),"&githubOwner=").concat(encodeURIComponent(t.github_owner.name))):(i.toast.success("Project deleted",{description:"Your project has been deleted."}),P.push("/"))}g()},onError:e=>{var t;let r=(null==e||null==(t=e.data)?void 0:t.detail)||"Something went wrong";(0,x.Ni)(e),w(r)}}),I=async()=>{w(null),await S.mutateAsync()},D=()=>{g(),w(null),N(!1),k("")},F=t.display_name||t.name,R=C.trim()===(null==F?void 0:F.trim());if(!_){var T,z,O,L,K;return(0,s.jsx)(p.lG,{open:r,onOpenChange:D,children:(0,s.jsxs)(p.Cf,{size:"sm",children:[(0,s.jsxs)(p.c7,{children:[(0,s.jsxs)(p.L3,{children:["Delete ",F,"?"]}),(0,s.jsxs)(p.rr,{children:["This action cannot be undone."," ",(0,s.jsx)("span",{className:"text-destructive-primary",children:"This will permanently delete your project."})," Including:",(0,s.jsxs)("ul",{className:"my-2 list-disc pl-5 text-left",children:[(0,s.jsx)("li",{children:"Any deployments made with Lovable"}),(0,s.jsx)("li",{children:"All preview links"}),(null==t||null==(T=t.github_owner)?void 0:T.name)&&t.github_owner.name===d.CS&&(0,s.jsx)("li",{children:"All generated code"})]}),(null==t||null==(z=t.github_owner)?void 0:z.name)&&t.github_owner.name!==d.CS&&(0,s.jsxs)("p",{className:"mt-2",children:["Note: The Github repository"," ",(0,s.jsxs)("a",{href:null!=(K=(0,d.rZ)(t.github_repo_name,null==t||null==(O=t.github_owner)?void 0:O.name))?K:"#",target:"_blank",rel:"noreferrer",className:"font-medium text-foreground hover:underline",children:[null==t||null==(L=t.github_owner)?void 0:L.name,"/",null==t?void 0:t.github_repo_name]})," ","will not be deleted."]})]})]}),(0,s.jsxs)(p.Es,{children:[(0,s.jsx)(u.$,{variant:"outline",size:"sm",onClick:D,children:"Cancel"}),(0,s.jsx)(v.Q,{showTooltip:b,tooltipContent:"Cannot delete project while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete.",children:(0,s.jsx)(u.$,{variant:"destructive",size:"sm",onClick:()=>{N(!0)},disabled:b,children:"Continue"})})]})]})})}return(0,s.jsx)(p.lG,{open:r,onOpenChange:D,children:(0,s.jsxs)(p.Cf,{size:"sm",children:[(0,s.jsxs)(p.c7,{children:[(0,s.jsx)(p.L3,{children:"Final Confirmation"}),(0,s.jsx)(p.rr,{children:t.display_name?(0,s.jsxs)("p",{className:"",children:["To confirm deletion, please type the exact project name:"," ",(0,s.jsx)("span",{className:"font-medium",children:t.display_name})]}):(0,s.jsxs)("p",{className:"",children:["To confirm deletion, please type the exact project slug:"," ",(0,s.jsx)("span",{className:"font-medium",children:t.name})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(h.p,{placeholder:"Enter project ".concat(t.display_name?"display name":"slug"),value:C,onChange:e=>k(e.target.value),autoFocus:!0}),(0,s.jsxs)("div",{className:"flex items-center gap-1 px-1 text-sm text-destructive-primary",children:[(0,s.jsx)(m.A,{name:"warning",className:"text-destructive-primary",size:"small"}),"This action is irreversible!"]})]}),(0,s.jsxs)(p.Es,{children:[(0,s.jsx)(u.$,{variant:"outline",size:"sm",onClick:()=>{N(!1),k(""),w(null)},children:"Back"}),(0,s.jsx)(v.Q,{showTooltip:b,tooltipContent:"Cannot delete project while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete.",children:(0,s.jsx)(u.$,{variant:"destructive",size:"sm",onClick:I,loading:S.isPending,disabled:!R||S.isPending||b,children:S.isPending?"Deleting...":"Delete Project"})})]}),y&&(0,s.jsx)("p",{className:"mt-2 text-sm text-destructive-primary",children:y})]})})}},34217:(e,t,r)=>{"use strict";r.d(t,{D:()=>l});var s=r(77145),a=r(47494),n=r.n(a);function o(){return(0,s.jsx)("span",{className:"bg-foreground before:bg-foreground after:bg-foreground ".concat(n().DotElastic," inline-block")})}let l=e=>{let{project:t}=e;return(0,s.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"in_progress"!==t.status||t.name?t.display_name||t.name||t.id:(0,s.jsxs)(s.Fragment,{children:["Dreaming up name",(0,s.jsx)(o,{})]})})}},47494:e=>{e.exports={DotElastic:"AnimatedDots_DotElastic__JXvFf","DotElastic-before":"AnimatedDots_DotElastic-before__gaC87","DotElastic-after":"AnimatedDots_DotElastic-after__CStzD"}},57993:(e,t,r)=>{"use strict";r.d(t,{U:()=>b});var s=r(77145),a=r(9898),n=r(87299),o=r(6698),l=r(52037),i=r(31088),c=r(75222),d=r(83220),u=r(52811),p=r(20247),m=r(27549),h=r(6397),x=r(83473),j=r(63851),f=r(69850),v=r(99473);let g=c.Ik({displayName:c.Yj().min(1,"Display name is required").max(100,"Display name must be less than 100 characters")}),b=e=>{let{project:t,isOpen:r,onClose:c}=e,b=(0,n.jE)(),y=(0,d.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),w=(0,v.Kr)(),_=(0,l.mN)({resolver:(0,a.u)(g),defaultValues:{displayName:t.display_name||t.name||""}}),N=(0,o.n)({mutationFn:async e=>{let{displayName:r}=e;return(0,j.P)().put("/projects/".concat(t.id),{display_name:r})},onSuccess:(e,t)=>{b.invalidateQueries({queryKey:f.gO.all}),b.invalidateQueries({queryKey:f.workspaceKeys.detail(y||"")}),i.toast.success("Project renamed successfully"),c(),_.reset({displayName:t.displayName})},onError:e=>{(0,x.Ni)(e)}}),C=async e=>{await N.mutateAsync({displayName:e.displayName})},k=!!_.formState.dirtyFields.displayName;return(0,s.jsx)(p.lG,{open:r,onOpenChange:c,children:(0,s.jsxs)(p.Cf,{size:"sm",children:[(0,s.jsxs)(p.c7,{children:[(0,s.jsx)(p.L3,{children:"Rename project"}),(0,s.jsx)(p.rr,{children:"Update how this project appears in your workspace."})]}),(0,s.jsx)(m.lV,{..._,children:(0,s.jsxs)("form",{onSubmit:_.handleSubmit(C),className:"flex w-full flex-col gap-5",children:[(0,s.jsxs)("div",{className:"w-full space-y-4",children:[(0,s.jsx)(m.zB,{control:_.control,name:"displayName",render:e=>{let{field:t}=e;return(0,s.jsxs)(m.eI,{className:"space-y-2",children:[(0,s.jsx)(m.lR,{children:"Display name"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(h.p,{placeholder:"My Project",...t,autoFocus:!0})}),!_.formState.errors.displayName&&(0,s.jsx)(m.Rr,{className:"text-xs leading-relaxed",children:"Supports spaces and special characters, up to 100 characters. Note: this name is only visible to you and members of your workspace, not to visitors of your published app."}),(0,s.jsx)(m.C5,{})]})}}),t.name&&(0,s.jsxs)("div",{className:"rounded-lg border border-border/50 bg-muted/30 px-3.5 py-3",children:[(0,s.jsxs)("p",{className:"mt-1.5 text-xs text-muted-foreground",children:["Changing the display name does not change your project URL:"," ",(0,s.jsxs)("b",{children:[t.name,w]}),"."]}),(0,s.jsx)("p",{className:"mt-1.5 text-xs text-muted-foreground",children:"You can change this URL in the publish dialog"})]})]}),(0,s.jsxs)(p.Es,{children:[(0,s.jsx)(u.$,{variant:"outline",onClick:c,type:"button",children:"Cancel"}),(0,s.jsx)(u.$,{type:"submit",disabled:!k||N.isPending,loading:N.isPending,children:N.isPending?"Saving...":"Save"})]})]})})]})})}},64021:(e,t,r)=>{"use strict";r.d(t,{K:()=>J,U:()=>Y});var s=r(77145),a=r(46753),n=r.n(a),o=r(13410),l=r(26294),i=r(73279),c=r(95661),d=r(92866),u=r(34217),p=r(27458),m=r(58295);let h=(0,c.memo)(e=>{let{supabaseProjectConfig:t,clickable:r=!0}=e;return(0,s.jsxs)(m.m_,{children:[(0,s.jsx)(m.k$,{asChild:!0,children:r?(0,s.jsx)(n(),{href:"https://supabase.com/dashboard/project/".concat(null==t?void 0:t.supabase_project_id),target:"_blank",children:(0,s.jsx)(p.Wu,{className:"size-4"})}):(0,s.jsx)("div",{children:(0,s.jsx)(p.Wu,{className:"size-4"})})}),(0,s.jsx)(m.ZI,{children:r?"Click to open in Supabase.":"Connected to Supabase"})]})});h.displayName="SupabaseIcon";var x=r(12847),j=r(34056),f=r(51385),v=r(26800),g=r(83220),b=r(61374),y=r(67844),w=r(52811),_=r(91604),N=r(20247),C=r(69730),k=r(47226),P=r(85628),E=r(56024),A=r(74507);function S(e){let{project:t,open:r,onOpenChange:a}=e,n=(0,g.j4)(e=>e.currentWorkspace),{folders:o,isLoading:l}=(0,P.ow)(null==n?void 0:n.id),i=(0,P._U)(null==n?void 0:n.id),d=(0,P.eJ)(null==n?void 0:n.id),{permitted:u}=(0,b.J)(A.eZ.AddProjectsToFolders),{permitted:p}=(0,b.J)(A.eZ.RemoveProjectsFromFolders),m=(null==t?void 0:t.folder_id)||null,[h,x]=(0,c.useState)(null),[j,f]=(0,c.useState)({toAdd:null,toRemove:null});c.useEffect(()=>{r&&(x(m),f({toAdd:null,toRemove:null}))},[r,m]);let v=e=>{let t=m===e;h===e&&t?(x(null),f({toAdd:null,toRemove:m})):(x(e),f({toAdd:e,toRemove:m}))},S=async()=>{j.toRemove&&p&&await d.mutateAsync({folderId:j.toRemove,projectIds:[t.id]}),j.toAdd&&u&&await i.mutateAsync({folderId:j.toAdd,projectIds:[t.id]}),a(!1)},I=null!==j.toAdd||null!==j.toRemove,D=i.isPending||d.isPending;return(0,s.jsx)(N.lG,{open:r,onOpenChange:a,children:(0,s.jsxs)(N.Cf,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(N.c7,{children:[(0,s.jsx)(N.L3,{children:"Move to folder"}),(0,s.jsxs)(N.rr,{children:['Select a folder to move "',t.name,'" to. A project can only be in one folder at a time.']})]}),(0,s.jsx)("div",{className:"py-4",children:l?(0,s.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(k.E,{className:"h-10 w-full"},t))}):0===o.length?(0,s.jsxs)("div",{className:"py-8 text-center",children:[(0,s.jsx)(C.A,{name:"folder",className:"mx-auto mb-3 h-12 w-12 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No folders available"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Create a folder first to organize your projects"})]}):(0,s.jsx)("div",{className:"max-h-[300px] space-y-2 overflow-y-auto",children:o.map(e=>{let t=h===e.id,r=m===e.id,a=j.toAdd===e.id||j.toRemove===e.id;return(0,s.jsxs)("div",{className:(0,E.cn)("grid cursor-pointer grid-cols-[20px_1fr] items-center gap-3 rounded-lg border transition-[opacity,background-color,border-color] duration-150 hover:bg-accent/50",a&&"opacity-70",e.color&&t?"pb-[calc(0.75rem-1px)] pl-[calc(0.75rem-1px)] pr-[calc(0.75rem-1px)] pt-[calc(0.75rem-1px)]":"pb-3 pl-3 pr-3 pt-3"),onClick:()=>v(e.id),style:{borderColor:e.color&&t?e.color:void 0,borderWidth:e.color&&t?"2px":"1px"},children:[(0,s.jsx)(_.S,{checked:t,onCheckedChange:()=>v(e.id),onClick:e=>e.stopPropagation()}),(0,s.jsxs)("div",{className:"overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(C.A,{name:"folder",size:"small",className:e.color?"flex-shrink-0":"text-muted-foreground",style:e.color?{color:e.color}:void 0}),(0,s.jsx)("span",{className:"truncate text-sm font-medium",children:e.name}),r&&t&&!a&&(0,s.jsx)(y.E,{variant:"secondary",className:"flex-shrink-0 text-xs",children:"Current"}),a&&(0,s.jsx)(y.E,{variant:"secondary",className:"flex-shrink-0 text-xs",children:j.toAdd===e.id?"Adding":"Removing"})]}),e.description&&(0,s.jsx)("p",{className:"mt-1 truncate text-xs text-muted-foreground",children:e.description})]})]},e.id)})})}),(0,s.jsxs)(N.Es,{children:[(0,s.jsx)(w.$,{variant:"outline",onClick:()=>a(!1),disabled:D,children:"Cancel"}),(0,s.jsx)(w.$,{onClick:S,disabled:!I||D,children:D?"Saving...":"Save changes"})]})]})})}var I=r(57993),D=r(94123),F=r(19695),R=r(8711),T=r(702),z=r(2074);let O={internal_tools:"bg-brand-sapphire text-brand-sapphire-foreground",website:"bg-brand-saffron text-brand-saffron-foreground",personal:"bg-brand-bubblegum text-brand-bubblegum-foreground",consumer_app:"bg-brand-flamingo text-brand-flamingo-foreground",b2b_app:"bg-brand-twilight text-brand-twilight-foreground",prototype:"bg-brand-tiger text-brand-tiger-foreground"},L=e=>{let{category:t}=e;if(!t)return null;let r=z.eo[t],a=O[t];return(0,s.jsx)("span",{className:(0,E.cn)("mr-2 inline-block rounded-md px-2 py-0.5 text-xs font-medium",a),title:r,children:r})};var K=r(98672),q=r(51762),B=r(26214),Q=r(39528),W=r(76916);let U=e=>{let{project:t}=e,r=(0,o.useRouter)(),a=(0,B.D)(t.id),n=(0,q.f)(K.e),{shouldShow:l,isProfilePublished:i,isProjectPublished:c,canEdit:d,isLoadingPermission:u}=(0,W.h)(t);if(!l||!t.name)return null;if(i)return(0,s.jsxs)(R._2,{onClick:()=>{t.name&&(a(Q.mb.HOME_PAGE_OPEN_CLICKED),r.push("/products/".concat(encodeURIComponent(t.name)),{scroll:!0}))},children:[(0,s.jsx)(C.A,{name:"compass",size:"small"}),"Profile ",(0,s.jsx)(C.A,{name:"arrow_up_right",size:"small"})]});if(!u&&!d)return null;let p=(0,s.jsxs)(R._2,{disabled:!c,onClick:()=>{a(Q.mb.HOME_PAGE_CREATE_CLICKED),n({childProps:{projectId:t.id},dialogProps:{onOpenChange:e=>{e||a(Q.mb.HOME_PAGE_CREATE_CLOSED)}}})},children:[(0,s.jsx)(C.A,{name:"compass",size:"small"}),"Create profile"]});return c?p:(0,s.jsx)(m.Bc,{children:(0,s.jsxs)(m.m_,{delayDuration:200,children:[(0,s.jsx)(m.k$,{children:p}),(0,s.jsx)(m.ZI,{side:"right",children:"Publish the project before creating a Lovable profile"})]})})};var M=r(169),$=r(62819);let J=e=>{let{project:t,align:r="end",onSelectModeToggle:a,enableBulkSelection:n=!1}=e,l=(0,o.useRouter)(),i=(0,o.usePathname)(),d=(0,j.D)(),[u,p]=(0,c.useState)(!1),[m,h]=(0,c.useState)(!1),[x,f]=(0,c.useState)(!1),[g,b]=(0,c.useState)(!1),{isPending:y}=(0,$.O)({}),{isProjectRemixAllowed:_,hasCheckedProjectRemixAllowed:N,projectRemixNotAllowedReason:k}=(0,M.O)({projectId:t.id,enabled:u}),P=null==i?void 0:i.startsWith("/dashboard");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(R.rI,{open:u,onOpenChange:p,children:[(0,s.jsx)(R.ty,{asChild:!0,children:(0,s.jsx)(w.$,{variant:"ghost",size:"icon-sm",className:"transition-opacity hover:bg-muted hover:text-foreground ".concat(u?"opacity-100":"opacity-100 group-hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100"),disabled:y,children:(0,s.jsx)(C.A,{name:"ellipsis_horizontal",size:"small"})})}),(0,s.jsxs)(R.SQ,{align:r,children:[n&&P&&(0,s.jsxs)(R._2,{onClick:()=>{p(!1),null==a||a(t.id)},children:[(0,s.jsx)(C.A,{name:"select",size:"small"}),"Select"]}),(0,s.jsx)(D.E,{permission:A.eZ.AddProjectsToFolders||A.eZ.RemoveProjectsFromFolders,children:P&&(0,s.jsxs)(R._2,{onClick:()=>{p(!1),b(!0)},children:[(0,s.jsx)(C.A,{name:"folder",size:"small"}),"Move to folder"]})}),(0,s.jsx)(F.Q,{showTooltip:!_&&!y,tooltipContent:N?k||"This project can't be remixed":"Checking if project can be remixed...",side:"left",children:(0,s.jsxs)(R._2,{onClick:()=>d(t),disabled:!_||!N||y,children:[(0,s.jsx)(C.A,{name:y?"progress_activity":"remix",size:"small",className:y?"animate-spin":""}),y?"Remixing...":"Remix"]})}),(0,s.jsxs)(R._2,{onClick:()=>{p(!1),h(!0)},children:[(0,s.jsx)(C.A,{name:"pen_top_right_square",size:"small"}),"Rename"]}),(0,s.jsxs)(R._2,{onClick:()=>{p(!1),l.push("/projects/".concat(t.id,"?settings=project"))},children:[(0,s.jsx)(C.A,{name:"cog",size:"small"}),"Settings"]}),(0,s.jsx)(U,{project:t}),(0,s.jsxs)(R._2,{onClick:()=>{p(!1),f(!0)},className:"text-destructive-primary",children:[(0,s.jsx)(C.A,{name:"trash",size:"small"}),"Delete"]})]})]}),(0,s.jsx)(I.U,{project:t,isOpen:m,onClose:()=>h(!1)}),(0,s.jsx)(v.B,{project:t,isOpen:x,onClose:()=>f(!1)}),P&&(0,s.jsx)(S,{project:t,open:g,onOpenChange:b})]})},Y=(0,c.memo)(e=>{var t;let{project:r,isSupabaseClickable:a=!0,showAvatar:o=!0,selectedCategory:c,subtitleType:p,showStars:m=!1,onToggleStar:j,showActionsDropdown:v=!0,linkHref:g,onClick:b,imagePreviewButtonText:w,selectionMode:N=!1,isSelected:C=!1,onSelectionChange:k,onSelectModeToggle:P,enableBulkSelection:A=!1}=e,S=(0,l.c3)("ProjectCard"),I=(0,i.Ym)(),D=null!=g?g:b?void 0:"/projects/".concat(r.id),F=r.remix_count?r.remix_count:0,R=1===F?S("remixCount",{count:1}):S("remixesCount",{count:F}),z="all"===c||c!==r.category,O=(()=>{if(!p)return null;switch(p){case"remixes":return R;case"edit-time":return r.updated_at?"".concat(S("edited")," ").concat((0,x.P)({updatedAt:r.updated_at,locale:I})):null;case"create-time":return r.created_at?"".concat(S("created")," ").concat((0,x.P)({updatedAt:r.created_at,locale:I}).replace("about ","")):null;case"view-time":return r.last_viewed_at?"".concat(S("viewed")," ").concat((0,x.P)({updatedAt:r.last_viewed_at,locale:I})):null;case"trending-rank":return null!=r.feature_rank?"".concat(S("ranked")," ").concat(r.feature_rank):"".concat(S("ranked")," -");case"created-by":return r.created_by?(0,s.jsx)(T.f,{username:r.created_by,prefix:"Created by ",className:""}):null;default:return p}})();return(0,s.jsxs)("div",{className:(0,E.cn)("group relative flex flex-col",N&&"-m-2 cursor-pointer rounded-lg p-2 transition-colors hover:bg-muted/50"),"data-testid":"project-card-".concat(r.name),onClick:N?()=>null==k?void 0:k(r.id):void 0,children:[(0,s.jsxs)("div",{className:"relative mb-3 flex flex-col",children:[N&&(0,s.jsx)("div",{className:"pointer-events-none absolute left-2 top-2 z-20 flex items-center justify-center rounded-md bg-background/80 p-1 backdrop-blur-sm",children:(0,s.jsx)(_.S,{checked:C,className:"pointer-events-none h-5 w-5"})}),(0,s.jsx)(d.J,{project:r,href:N?void 0:D,onClick:N?e=>{e.preventDefault()}:b,imagePreviewButtonText:w,showStars:m&&!N,onToggleStar:N?void 0:j}),r.is_published&&!w&&(0,s.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 p-2",children:(0,s.jsx)(y.E,{variant:"secondary",className:"text-xs opacity-50",children:"Published"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[o&&(N?(0,s.jsx)("div",{className:"transition-opacity",children:(0,s.jsx)(f.UserAvatar,{user:{id:r.user_id,username:r.user_display_name||""},className:"h-9 w-9"})}):(0,s.jsx)(n(),{href:"/users/".concat(r.created_by),className:"transition-opacity hover:opacity-80",children:(0,s.jsx)(f.UserAvatar,{user:{id:r.user_id,username:r.user_display_name||""},className:"h-9 w-9"})})),(0,s.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,s.jsx)(u.D,{project:r}),z&&(0,s.jsx)(L,{category:null!=(t=r.category)?t:void 0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[O&&(0,s.jsx)("p",{children:O}),!o&&"supabase_project_config"in r&&r.supabase_project_config&&(0,s.jsx)(h,{supabaseProjectConfig:r.supabase_project_config,clickable:a})]})]}),v&&!N&&(0,s.jsx)(J,{project:r,onSelectModeToggle:P,enableBulkSelection:A})]})]})]})});Y.displayName="ProjectCard"},76916:(e,t,r)=>{"use strict";r.d(t,{h:()=>c});var s=r(83220),a=r(61374),n=r(92918),o=r(680),l=r(72632),i=r(74507);let c=e=>{let t=(0,n.Tp)(o.x.ProjectProfiles),r=(0,s.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.plan}),{isEnterprisePlan:c}=(0,l.cb)(r),{permitted:d,isLoading:u}=(0,a.J)(i.eZ.EditProject,null==e?void 0:e.id),p=t&&!!e&&!c;if(!p)return{shouldShow:!1,isProfilePublished:!1,canCreateProfile:!1,isProjectPublished:!1,canEdit:!1,isLoadingPermission:!1};let m=!!e.is_profile_published,h=e.is_published;return{shouldShow:p,isProfilePublished:m,canCreateProfile:d&&!m&&h,isProjectPublished:h,canEdit:d,isLoadingPermission:u}}},85628:(e,t,r)=>{"use strict";r.d(t,{Fd:()=>x,HP:()=>h,Si:()=>m,Xn:()=>d,Zi:()=>v,_U:()=>j,eJ:()=>f,ow:()=>p});var s=r(18502),a=r(87299),n=r(6698),o=r(13410),l=r(31088),i=r(24247),c=r(69850);let d={all:["folders"],lists:()=>[...d.all,"list"],list:e=>[...d.lists(),e],projectsInFolder:(e,t)=>[...d.all,"projects",e,t]};function u(e,t){return"conflict"===e.type&&409===e.status?e.message||"A folder with this name already exists":e.details||e.message||t}function p(e){var t;let r=(0,s.I)({queryKey:d.list(null!=e?e:""),queryFn:()=>e?(0,i.BX)(e):Promise.resolve([]),enabled:!!e});return{folders:null!=(t=r.data)?t:[],isLoading:r.isLoading,error:r.error,refetch:r.refetch}}function m(e){let t=(0,a.jE)();return(0,n.n)({mutationFn:t=>{if(!e)throw Error("Workspace ID is required");return(0,i.vV)(e,t)},onSuccess:()=>{l.toast.success("Folder created successfully"),e&&t.invalidateQueries({queryKey:d.list(e)})},onError:e=>{let t=u(e,"Failed to create folder");l.toast.error(t)}})}function h(e){let t=(0,a.jE)();return(0,n.n)({mutationFn:t=>{let{folderId:r,data:s}=t;if(!e)throw Error("Workspace ID is required");return(0,i.g$)(e,r,s)},onSuccess:()=>{l.toast.success("Folder updated successfully"),e&&t.invalidateQueries({queryKey:d.list(e)})},onError:e=>{let t=u(e,"Failed to update folder");l.toast.error(t)}})}function x(e){let t=(0,a.jE)(),r=(0,o.useRouter)();return(0,n.n)({mutationFn:t=>{if(!e)throw Error("Workspace ID is required");return(0,i.sE)(e,t)},onSuccess:()=>{if(l.toast.success("Folder deleted successfully"),e){let s=t.getQueryData(d.list(e));s&&1===s.length&&r.push("/dashboard/projects"),t.invalidateQueries({queryKey:d.list(e)})}},onError:e=>{l.toast.error(e.message||"Failed to delete folder")}})}function j(e){let t=(0,a.jE)();return(0,n.n)({mutationFn:t=>{let{folderId:r,projectIds:s}=t;if(!e)throw Error("Workspace ID is required");return(0,i.td)(e,r,s)},onSuccess:(r,s)=>{l.toast.success("Projects added to folder"),e&&(t.invalidateQueries({queryKey:d.projectsInFolder(e,s.folderId)}),t.invalidateQueries({queryKey:c.workspaceKeys.detail(e),exact:!1}),t.invalidateQueries({queryKey:c.workspaceKeys.projects({workspaceId:e})}))},onError:e=>{l.toast.error(e.message||"Failed to add projects to folder")}})}function f(e){let t=(0,a.jE)();return(0,n.n)({mutationFn:t=>{let{folderId:r,projectIds:s}=t;if(!e)throw Error("Workspace ID is required");return(0,i.lV)(e,r,s)},onSuccess:(r,s)=>{l.toast.success("Projects removed from folder"),e&&(t.invalidateQueries({queryKey:d.projectsInFolder(e,s.folderId)}),t.invalidateQueries({queryKey:c.workspaceKeys.detail(e),exact:!1}),t.invalidateQueries({queryKey:c.workspaceKeys.projects({workspaceId:e})}))},onError:e=>{l.toast.error(e.message||"Failed to remove projects from folder")}})}function v(e,t){var r;let a=(0,s.I)({queryKey:d.projectsInFolder(null!=e?e:"",null!=t?t:""),queryFn:()=>e&&t?(0,i.Yd)(e,t):Promise.resolve([]),enabled:!!e&&!!t});return{projectIds:null!=(r=a.data)?r:[],isLoading:a.isLoading,error:a.error,refetch:a.refetch}}},92866:(e,t,r)=>{"use strict";r.d(t,{J:()=>m});var s=r(77145),a=r(30849),n=r(46753),o=r.n(n),l=r(95661),i=r(52811),c=r(56024),d=r(69730);let u=(0,l.memo)(e=>{let{isStarred:t,onToggle:r}=e,[a,n]=(0,l.useState)(!1),[o,i]=(0,l.useState)(t);return(0,l.useEffect)(()=>{i(t)},[t]),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),i(!o),n(!0),setTimeout(()=>n(!1),300),r()},className:(0,c.cn)("absolute right-2 top-2 z-[5] flex h-8 w-8 items-center justify-center rounded-md bg-muted/80 backdrop-blur-sm transition-all duration-200 hover:bg-muted",!o&&"opacity-0 group-hover:opacity-100",a&&"scale-110"),"aria-label":o?"Remove from favorites":"Add to favorites",children:(0,s.jsx)(d.A,{name:o?"star_filled":"star",size:"default",className:(0,c.cn)("transition-all duration-200",o?"text-yellow-500 opacity-100 drop-shadow-sm":"text-foreground/60 opacity-0 group-hover:text-foreground/80 group-hover:opacity-100",a&&"scale-125")})})});u.displayName="StarButton";let p=e=>{let{text:t}=e;return(0,s.jsx)("div",{className:"absolute inset-0 hidden cursor-pointer items-center justify-center bg-black/30 opacity-0 transition-all duration-300 ease-out group-hover:opacity-100 md:flex",children:(0,s.jsx)(i.$,{variant:"secondary",className:"pointer-events-none",children:t})})},m=(0,l.memo)(e=>{var t;let{project:r,href:n,onClick:l,imagePreviewButtonText:i,showStars:d=!1,onToggleStar:m,className:h,imageClassName:x}=e,j=null==(t=r.latest_screenshot_url)?void 0:t.replace("https://pub-bb2e103a32db4e198524a2e9ed8f35b4.r2.dev","https://screenshot2.lovable.dev"),f=n?o():"div";return(0,s.jsx)(f,{href:n,className:(0,c.cn)("group relative aspect-video w-full overflow-hidden rounded-xl bg-muted",h),scroll:!1,onClick:l,children:(0,s.jsxs)("div",{className:"relative h-full w-full",children:[j?(0,s.jsx)(a.default,{src:j,alt:"Screenshot of ".concat(r.name||"project"),className:(0,c.cn)("rounded-xl border border-muted-border",x),fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover",objectPosition:"top"},draggable:"false"}):(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl border border-muted-border bg-muted"}),i&&(0,s.jsx)(p,{text:i}),d&&m&&(0,s.jsx)(u,{isStarred:r.is_starred||!1,onToggle:()=>m(r.id)})]})})});m.displayName="ProjectImage"},98672:(e,t,r)=>{"use strict";r.d(t,{e:()=>I});var s=r(77145),a=r(75417),n=r(71148),o=r(20247),l=r(82149),i=r(1673),c=r(98463),d=r(30849),u=r(52811),p=r(69730),m=r(27458),h=r(26214),x=r(39528);let j=()=>{let e=(0,h.D)(),{goToNextTab:t}=(0,i.x)();return(0,s.jsxs)("div",{className:"flex h-full w-full items-center justify-between overflow-hidden rounded-xl",children:[(0,s.jsxs)("div",{className:"w-full py-8 pe-2 ps-2 md:w-1/2 md:pe-24 md:ps-8",children:[(0,s.jsx)(m.Fy,{className:"size-9"}),(0,s.jsx)("h1",{className:"py-4",children:"Create a Lovable project profile"}),(0,s.jsx)("p",{className:"pb-8 pt-4",children:"Want your app to be listed on the Lovable Discover page? Submit your profile to be considered for being featured"}),(0,s.jsx)("p",{className:"pt-4",children:"Why you should get your site listed:"}),(0,s.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:["Showcase your work to the Lovable community","Be seen by millions of builders on Lovable","Popular apps get featured on Lovable"].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 rounded-lg bg-muted p-4",children:[(0,s.jsx)(p.A,{name:"check_circle"})," ",e]},e))}),(0,s.jsx)("p",{className:"py-8",children:"We curate apps from all applications and regularly review new or updated pages."}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(u.$,{type:"button",size:"default",className:"w-full md:w-auto",onClick:()=>{e(x.mb.CREATE_FORM.CONTINUE_FROM_INTRO_CLICKED),t()},children:["Continue ",(0,s.jsx)(p.A,{name:"arrow_right",className:"h-4 w-4"})]})})]}),(0,s.jsx)("div",{style:{backgroundImage:"url('/img/create-product-page/create-bg.webp')",backgroundSize:"cover",backgroundPositionY:"top",backgroundPositionX:"left"},className:"relative hidden h-full w-1/2 flex-col justify-center overflow-hidden rounded-lg py-16 md:flex",children:(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-end",children:(0,s.jsx)("div",{className:"relative w-[85%]",children:(0,s.jsx)(d.default,{src:"/img/create-product-page/intro-teaser.webp",alt:"an example of how a page can look",width:0,height:0,sizes:"80vw",className:"h-auto w-full"})})})})]})};var f=r(9898),v=r(6698),g=r(13410),b=r(95661),y=r(52037),w=r(31088),_=r(51762),N=r(83473),C=r(63851),k=r(30542),P=r(19620),E=r(93946);let A=()=>{let{activeTab:e,handleSubmit:t,form:r}=(0,i.x)();return(0,s.jsxs)(o.Cf,{size:"xl",className:"max-h-[95vh] overflow-y-auto outline-none",children:[(0,s.jsx)(o.c7,{children:(0,s.jsx)(o.L3,{children:"Discovery profile"})}),(0,s.jsx)("form",{onSubmit:r.handleSubmit(t),className:"flex h-full min-h-0 overflow-visible outline-none",children:(0,s.jsx)("div",{className:"flex h-full w-full",children:(0,s.jsxs)(a.N,{mode:"wait",initial:!1,children:["intro"===e&&(0,s.jsx)(n.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"h-full min-h-0 w-full flex-shrink-0",children:(0,s.jsx)(j,{})},"intro"),("details"===e||"images"===e||"about"===e)&&(0,s.jsx)(n.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:0},transition:{duration:.2,ease:"easeInOut"},className:"h-full min-h-0 w-full flex-shrink-0",children:(0,s.jsx)(c.N,{})},"edit")]})})})]})},S=()=>{let e=(()=>{let[e,t]=(0,b.useState)("intro"),r=(0,l.Iw)(e=>e.project),s=(0,l.Iw)(e=>e.projectId),a=(0,l.Iw)(e=>{var t;return null==(t=e.project)?void 0:t.name}),n=(0,l.Iw)(e=>{var t;return null==(t=e.project)?void 0:t.display_name}),o=(null==r?void 0:r.url)||(0,k.O)({projectId:s}),i=(0,C.P)(),c=(0,g.useRouter)(),d=(0,_.f)(I),u=(0,h.D)(),{mutateAsync:p,isPending:m,isSuccess:j}=(0,v.n)({mutationFn:async e=>i.post("/projects/".concat(s,"/profile"),e),onSuccess:()=>{w.toast.success("Product page created successfully! \uD83D\uDE80",{description:"Your product page is now available."}),u(x.mb.CREATE_FORM.CREATED,{step:e}),setTimeout(()=>{a&&(d(!1),c.push("/products/".concat(encodeURIComponent(a))))},1e3)},onError:e=>{(0,N.Ni)(e),u(x.mb.CREATE_FORM.FAILED,{reason:e instanceof Error?e.message:"An unknown error occurred"})}}),A=(0,y.mN)({resolver:(0,f.u)(E.JS),mode:"onTouched",reValidateMode:"onChange",defaultValues:{name:null!=n?n:"",tagline:"",description:"",category:"",about:"",icon:"",thumbnail:"",additional_images:[],hide_preview:!1,socials:[]}}),S=e=>{p(e).catch(e=>{P.logging.error("Failed to create project profile",{error:e})})};return{form:A,activeTab:e,setActiveTab:t,goToNextTab:()=>{"intro"===e?t("details"):"details"===e?t("images"):"images"===e&&t("about")},goToPreviousTab:()=>{"about"===e?t("images"):"images"===e?t("details"):"details"===e&&t("intro")},handleSubmit:()=>{A.handleSubmit(S)()},isPending:m,projectUrl:o,isSuccess:j,submitText:"Create Page",mode:"create"}})();return(0,s.jsx)(i.v,{value:e,children:(0,s.jsx)(A,{})})},I=e=>{let{projectId:t}=e;if((0,l.vd)())return(0,s.jsx)(S,{});if(!t)throw Error("Project ID is required if not already in context");return(0,s.jsx)(l.Np,{projectId:t,children:(0,s.jsx)(S,{})})}}}]);